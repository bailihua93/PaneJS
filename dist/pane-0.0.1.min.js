!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.pane=t():e.pane=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.shapes=t.Paper=t.Model=t.NodeView=t.LinkView=t.CellView=t.Node=t.Link=t.Cell=t.Events=t.vector=t.utils=void 0;var a=n(1),o=i(a),u=n(10),l=r(u),c=n(11),s=r(c),f=n(12),d=r(f),v=n(13),h=r(v),p=n(14),g=r(p),y=n(15),m=r(y),b=n(16),k=r(b),w=n(17),C=r(w),O=n(18),P=r(O),x=n(22),_=r(x),j=n(23),T=r(j),E=n(24),A=r(E);t.utils=o,t.vector=l["default"],t.Events=s["default"],t.Cell=d["default"],t.Link=h["default"],t.Node=g["default"],t.CellView=m["default"],t.LinkView=k["default"],t.NodeView=C["default"],t.Model=P["default"],t.Paper=_["default"];t.shapes={basic:{Generic:T["default"],Rect:A["default"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})};for(var a in r){i(a)}var o=n(3),u=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})};for(var l in o){u(l)}var c=n(4),s=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})};for(var f in c){s(f)}var d=n(5),v=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})};for(var h in d){v(h)}var p=n(6),g=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})};for(var y in p){g(y)}var m=n(7),b=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})};for(var k in m){b(k)}var w=n(8),C=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return w[e]}})};for(var O in w){C(O)}var P=n(9),x=function(e){return"default"===e?"continue":void Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}})};for(var _ in P){x(_)}t["default"]={}},function(e,t){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function r(e){return null===e}function i(e){return"undefined"==typeof e}function a(e){return"string"==typeof e}function o(e){return"boolean"==typeof e}function u(e){return i(e)||r(e)}function l(e,t){return m.call(e)==="[object "+t+"]"}function c(e){if(!e)return!1;var t="undefined"==typeof e?"undefined":n(e);return"function"===t||"object"===t}function s(e){return l(e,"Function")}function f(e){return e&&e===e.window}function d(e){return Array.isArray(e)}function v(e){if(d(e))return!0;if(s(e)||f(e))return!1;var t=!!e&&"length"in e&&e.length;return 0===t||"number"==typeof t&&t>0&&t-1 in e}function h(e){return!d(e)&&e-parseFloat(e)+1>=0}function p(e){return!c(e)||e.nodeType||f(e)?!1:e.constructor&&!b.call(e.constructor.prototype,"isPrototypeOf")?!1:!0}function g(e){var t;for(t in e)return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var y=Object.prototype,m=y.toString,b=y.hasOwnProperty;t.isNull=r,t.isType=l,t.isArray=d,t.isObject=c,t.isString=a,t.isWindow=f,t.isBoolean=o,t.isNumeric=h,t.isFunction=s,t.isArrayLike=v,t.isUndefined=i,t.isPlainObject=p,t.isEmptyObject=g,t.isNullOrUndefined=u},function(e,t){"use strict";function n(e){return""+e}function r(e){return(""+e).toUpperCase()}function i(e){return(""+e).toLowerCase()}function a(e){return(e||"").replace(/ /g,"\xa0")}function o(e){return e?u.trim.call(""+e):""}Object.defineProperty(t,"__esModule",{value:!0});var u=String.prototype;t.lc=i,t.uc=r,t.trim=o,t.toString=n,t.sanitizeText=a},function(e,t){"use strict";function n(e){return parseInt(e,10)}function r(e){return parseFloat(e)}function i(e,t){var n=Math.pow(10,t);return r((Math.round(e*n)/n).toFixed(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.toInt=n,t.toFloat=r,t.toFixed=i},function(e,t,n){"use strict";function r(e){return(0,v.isArray)(e)?e:(0,v.isArrayLike)(e)?h.slice.call(e):[e]}function i(e,t){return e?h.indexOf.call(e,t):-1}function a(e,t){return e?h.lastIndexOf.call(e,t):-1}function o(e,t,n){return e?h.every.call(e,t,n):!1}function u(e,t,n){return e?h.some.call(e,t,n):!1}function l(e,t,n){e&&h.forEach.call(e,t,n)}function c(e,t,n){return e?h.map.call(e,t,n):[]}function s(e,t,n){return e?h.filter.call(e,t,n):[]}function f(e,t,n){return e?h.reduce.call(e,t,n):n}function d(e,t,n){return e?h.reduceRight.call(e,t,n):n}Object.defineProperty(t,"__esModule",{value:!0}),t.reduceRight=t.reduce=t.filter=t.map=t.forEach=t.some=t.every=t.lastIndexOf=t.indexOf=t.toArray=void 0;var v=n(2),h=Array.prototype;t.toArray=r,t.indexOf=i,t.lastIndexOf=a,t.every=o,t.some=u,t.forEach=l,t.map=c,t.filter=s,t.reduce=f,t.reduceRight=d},function(e,t,n){"use strict";function r(e,t){return null!==e&&Object.prototype.hasOwnProperty.call(e,t)}function i(e){return e?Object.keys(e):[]}function a(e,t,n){(0,l.forEach)(i(e),function(r){t.call(n,e[r],r)})}function o(e){e||(e={});for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var i in r)e[i]=r[i]}return e}function u(e){e||(e={});for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];if(r)for(var i in r){var a=e[i],o=r[i],l=(0,c.isArray)(o);if(l||(0,c.isPlainObject)(o)){var s;s=l?a&&(0,c.isArray)(a)?a:[]:a&&(0,c.isPlainObject)(a)?a:{},e[i]=u(s,o)}else e[i]=o}}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.extend=t.merge=t.forIn=t.keys=t.hasKey=void 0;var l=n(5),c=n(2);t.hasKey=r,t.keys=i,t.forIn=a,t.merge=u,t.extend=o},function(e,t,n){"use strict";function r(e,t,n){if(e&&(0,a.isFunction)(e)){var r,i=t[0],o=t[1],u=t[2];switch(t.length){case 0:r=e.call(n);break;case 1:r=e.call(n,i);break;case 2:r=e.call(n,i,o);break;case 3:r=e.call(n,i,o,u);break;default:r=e.apply(n,t)}return r}}function i(e,t){return(0,a.isFunction)(e)?Function.prototype.bind.apply(arguments):e}Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=t.bind=void 0;var a=n(2);t.bind=i,t.invoke=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=e&&!isNaN(e.nodeType);return i&&(i=isNullOrUndefined(t)||a(e)===t.toLowerCase()),i&&(i=isNullOrUndefined(n)||e.getAttribute(n)===r),i}function i(e){return e.getAttribute&&e.getAttribute("class")||""}function a(e){return e.nodeName?e.nodeName.toLowerCase():""}function o(e,t){var n;try{var r=new DOMParser;(0,k.isUndefined)(t)||(r.async=t),n=r.parseFromString(e,"text/xml")}catch(i){n=null}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+e);return n}function u(e){var t='<svg xmlns="'+C.xmlns+'" xmlns:xlink="'+C.xmlns+'" version="'+O+'">'+(e||"")+"</svg>",n=o(t,!1);return n.documentElement}function l(e,t){return(t||document).createElementNS(C.xmlns,e)}function c(e,t,n){if("id"===t)e.id=n;else{var r=t.split(":");r.length>1?e.setAttributeNS(C[r[0]],r[1],n):e.setAttribute(t,n)}}function s(e){var t={tx:0,ty:0};if(e){var n=/[ ,]+/,r=e.match(/translate\((.*)\)/);if(r){var i=r[1].split(n);i[0]&&(t.tx+=parseFloat(i[0])),i[1]&&(t.ty+=parseFloat(i[1]))}}return t}function f(e){var t={sx:1,sy:1};if(e){var n=/[ ,]+/,r=e.match(/scale\((.*)\)/);if(r){var i=r[1].split(n);i[0]&&(t.sx*=parseFloat(i[0])),(i[1]||i[0])&&(t.sy*=parseFloat(i[1]||i[0]))}}return t}function d(e){var t={angle:0};if(e){var n=/[ ,]+/,r=e.match(/rotate\((.*)\)/);if(r){var i=r[1].split(n);i[0]&&(t.angle+=parseFloat(i[0])),i[1]&&i[2]&&(t.cx=parseFloat(i[1]),t.cy=parseFloat(i[2]))}}return t}function v(e){return{translate:s(e),rotate:d(e),scale:f(e)}}function h(e){return["M",e.getAttribute("x1"),e.getAttribute("y1"),"L",e.getAttribute("x2"),e.getAttribute("y2")].join(" ")}function p(e){var t=[];return(0,w.forEach)(e.points,function(e,n){t.push(0===n?"M":"L",e.x,e.y)}),t.push("Z"),t.join(" ")}function g(e){var t=[];return(0,w.forEach)(e.points,function(e,n){t.push(0===n?"M":"L",e.x,e.y)}),t.join(" ")}function y(e){var t,n=parseFloat(e.getAttribute("x"))||0,r=parseFloat(e.getAttribute("y"))||0,i=parseFloat(e.getAttribute("width"))||0,a=parseFloat(e.getAttribute("height"))||0,o=parseFloat(e.getAttribute("rx"))||0,u=parseFloat(e.getAttribute("ry"))||0,l=n+i,c=r+a;return t=o||u?["M",n+o,r,"L",l-o,r,"Q",l,r,l,r+u,"L",l,r+a-u,"Q",l,c,l-o,c,"L",n+o,c,"Q",n,c,n,c-o,"L",n,r+u,"Q",n,r,n+o,r,"Z"]:["M",n,r,"H",l,"V",c,"H",n,"V",r,"Z"],t.join(" ")}function m(e){var t=parseFloat(e.getAttribute("cx"))||0,n=parseFloat(e.getAttribute("cy"))||0,r=parseFloat(e.getAttribute("r")),i=r*P;return["M",t,n-r,"C",t+i,n-r,t+r,n-i,t+r,n,"C",t+r,n+i,t+i,n+r,t,n+r,"C",t-i,n+r,t-r,n+i,t-r,n,"C",t-r,n-i,t-i,n-r,t,n-r,"Z"].join(" ")}function b(e){var t=parseFloat(e.getAttribute("cx"))||0,n=parseFloat(e.getAttribute("cy"))||0,r=parseFloat(e.getAttribute("rx")),i=parseFloat(e.getAttribute("ry"))||r,a=r*P,o=i*P;return["M",t,n-i,"C",t+a,n-i,t+r,n-o,t+r,n,"C",t+r,n+o,t+a,n+i,t,n+i,"C",t-a,n+i,t-r,n+o,t-r,n,"C",t-r,n-o,t-a,n-i,t,n-i,"Z"].join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.polylineToPathData=t.polygonToPathData=t.ellipseToPathData=t.circleToPathData=t.rectToPathData=t.lineToPathData=t.parseTranslate=t.parseTransform=t.parseRotate=t.parseScale=t.getNodeName=t.getClassName=t.setAttribute=t.createSvgElement=t.createSvgDocument=t.isNode=void 0;var k=n(2),w=n(5),C={xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},O="1.1",P=.5522847498307935;t.isNode=r,t.createSvgDocument=u,t.createSvgElement=l,t.setAttribute=c,t.getClassName=i,t.getNodeName=a,t.parseScale=f,t.parseRotate=d,t.parseTransform=v,t.parseTranslate=s,t.lineToPathData=h,t.rectToPathData=y,t.circleToPathData=m,t.ellipseToPathData=b,t.polygonToPathData=p,t.polylineToPathData=g},function(e,t){"use strict";function n(e){return 180*e/u%360}function r(e,t){return e=t?e:e%360,e*u/180}function i(e,t){return t*l(e/t)}function a(e){return e%360+(0>e?360:0)}Object.defineProperty(t,"__esModule",{value:!0});var o=Math,u=o.PI,l=o.round;t.toDeg=n,t.toRad=r,t.snapToGrid=i,t.normalizeAngle=a},function(e,t,n){"use strict";function r(e){e instanceof r&&(e=e.node),this.node=e}function i(e){return new r(e)}function a(e){return e instanceof r?e.node:e}function o(e,t,n){if(!e)return null;if((0,u.isObject)(e))return i(e);if("svg"===e.toLowerCase())return i((0,u.createSvgDocument)());if("<"===e[0]){var a=(0,u.createSvgDocument)(e);return a.childNodes.length>1?(0,u.map)(a.childNodes,function(e){return i(document.importNode(e,!0))}):i(document.importNode(a.firstChild,!0))}return e=(0,u.createSvgElement)(e),t&&(0,u.forIn)(t,function(t,n){(0,u.setAttribute)(e,t,n)}),n&&(n=(0,u.isArray)(n)?n:[n],(0,u.forEach)(n,function(t){e.appendChild(t instanceof r?t.node:t)})),i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.VElement=r;var u=n(1),l=/[\t\r\n\f]/g,c=/\S+/g;r.prototype={constructor:r,attr:function(e,t){var n=this,r=n.node,i=arguments.length;if(!i){var a={};return(0,u.forEach)(r.attributes,function(e){a[e.nodeName]=e.nodeValue}),a}if(1===i){if(!(0,u.isObject)(e))return r.getAttribute(e);(0,u.forIn)(e,function(e,t){(0,u.setAttribute)(r,t,e)})}else(0,u.setAttribute)(r,e,t);return n},removeAttr:function(e){var t=this,n=t.node;return n&&e&&n.removeAttribute(e),t},text:function(){},hasClass:function(e){var t=this,n=t.node,r=" "+e+" ";return 1===n.nodeType?(" "+(0,u.getClassName)(n)+" ").replace(l," ").indexOf(r)>-1:!1},addClass:function(e){var t=this,n=t.node;if((0,u.isFunction)(e))return t.addClass(e.call(n,(0,u.getClassName)(n)));if(e&&(0,u.isString)(e)&&1===n.nodeType){var r=e.match(c)||[],i=(" "+(0,u.getClassName)(n)+" ").replace(l," "),a=(0,u.reduce)(r,function(e,t){return e.indexOf(" "+t+" ")<0&&(e+=t+" "),e},i);a=(0,u.trim)(a),i!==a&&n.setAttribute("class",a)}return t},removeClass:function(e){var t=this,n=t.node;if((0,u.isFunction)(e))return t.removeClass(e.call(n,(0,u.getClassName)(n)));if((!e||(0,u.isString)(e))&&1===n.nodeType){var r=(e||"").match(c)||[],i=(" "+(0,u.getClassName)(n)+" ").replace(l," "),a=(0,u.reduce)(r,function(e,t){return e.indexOf(" "+t+" ")>-1&&(e=e.replace(" "+t+" "," ")),e},i);a=e?(0,u.trim)(a):"",i!==a&&n.setAttribute("class",a)}return t},toggleClass:function(e,t){var n=this,r=n.node;if((0,u.isBoolean)(t)&&(0,u.isString)(e))return t?n.addClass(e):n.removeClass(e);if((0,u.isFunction)(e))return n.toggleClass(e.call(r,(0,u.getClassName)(r),t),t);if(e&&(0,u.isString)(e)){var i=e.match(c)||[];(0,u.forEach)(i,function(e){n.hasClass(e)?n.removeClass(e):n.addClass(e)})}return n},remove:function(){var e=this,t=e.node;return t&&t.parentNode&&t.parentNode.removeChild(t),e},empty:function(){var e=this,t=e.node;if(t)for(;t.lastChild;)t.removeChild(t.lastChild);return e},append:function(e){var t=this;return e&&(0,u.forEach)((0,u.toArray)(e),function(e){t.node.appendChild(a(e))}),t},prepend:function(e){var t=this,n=t.node;return e&&n.insertBefore(a(e),n.firstChild),t},appendTo:function(e){},prependTo:function(e){},before:function(e){},after:function(e){},getSVGElement:function(){var e=this,t=e.node;return t instanceof window.SVGSVGElement?e:i(t.ownerSVGElement)},getDefs:function(){var e=this.svg().node.getElementsByTagName("defs");return e&&e.length?i(e[0]):null},clone:function(){var e=this.node,t=i(e.cloneNode(!0));return e.id&&t.node.removeAttribute("id"),t},find:function(e){return(0,u.map)(this.node.querySelectorAll(e),i)},findOne:function(e){var t=this.node.querySelector(e);return t?i(t):null},findParent:function(e,t){var n=this.node,r=t||n.ownerSVGElement;for(n=n.parentNode;n&&n!==r;){var a=i(n);if(a.hasClass(e))return a;n=n.parentNode}return null},index:function f(){for(var f=0,e=this.node.previousSibling;e;)1===e.nodeType&&f++,e=e.previousSibling;return f},translate:function d(e,t,n){var r=this,i=r.attr("transform")||"",d=(0,u.parseTranslate)(i);if(!arguments.length)return d;i=(0,u.trim)(i.replace(/translate\([^\)]*\)/g,""));var a=n?d.tx+e:e,o=n?d.ty+t:t,l="translate("+a+","+o+")";return r.attr("transform",l+" "+i)},rotate:function v(e,t,n,r){var i=that.attr("transform")||"",v=(0,u.parseRotate)(i);if(!arguments.length)return v;i=(0,u.trim)(i.replace(/rotate\([^\)]*\)/g,"")),e%=360;var a=r?v.angle+e:e,o=(0,u.isUndefined)(t)||(0,u.isUndefined)(n)?"":","+t+","+n,l="rotate("+a+o+")";return this.attr("transform",i+" "+l)},scale:function h(e,t,n){var r=this.attr("transform")||"",h=(0,u.parseScale)(r),i=arguments.length;if(!i)return h;r=(0,u.trim)(r.replace(/scale\([^\)]*\)/g,"")),1===i?t=e:2===i&&(0,u.isBoolean)(t)&&(n=t,t=e),e=n?h.sx*e:e,t=n?h.sy*t:t;var a="scale("+e+","+t+")";return this.attr("transform",r+" "+a)},bbox:function(e,t){var n=this,r=n.node;if(!r.ownerSVGElement)return{x:0,y:0,width:0,height:0};var i;try{i=r.getBBox(),i={x:i.x,y:i.y,width:i.width,height:i.height}}catch(a){i={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(e)return i;var o=r.getTransformToElement(t||r.ownerSVGElement);return V.transformRect(i,o)},toLocalPoint:function(e,t){},translateCenterToPoint:function(){},translateAndAutoOrient:function(){},animateAlongPath:function(){},sample:function p(e){e=e||1;for(var p,t=this.node,n=t.getTotalLength(),r=0,i=[];n>r;)p=t.getPointAtLength(r),i.push({x:p.x,y:p.y,distance:r}),r+=e;return i},toPath:function(){var e=this,t=i((0,u.createSvgElement)("path")),n=e.toPathData();return t.attr(e.attr()),n&&t.attr("d",n),t},toPathData:function(){var e=this,t=e.node,n=t.tagName.toUpperCase();switch(n){case"PATH":return e.attr("d");case"LINE":return(0,u.lineToPathData)(t);case"POLYGON":return(0,u.polygonToPathData)(t);case"POLYLINE":return(0,u.polylineToPathData)(t);case"ELLIPSE":return(0,u.ellipseToPathData)(t);case"CIRCLE":return(0,u.circleToPathData)(t);case"RECT":return(0,u.rectToPathData)(t)}throw new Error(n+" cannot be converted to PATH.")},findIntersection:function(e,t){var n=this,r=n.svg().node;t=t||r;var i=g.rect(this.bbox(!1,t)),a=i.getCenter(),o=i.intersectionWithLineFromCenterToPoint(e);if(o){var u=this.node.localName.toUpperCase();if("RECT"===u){var l=g.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),c=this.node.getTransformToElement(t),s=V.decomposeMatrix(c),f=r.createSVGTransform();f.setRotate(-s.rotation,a.x,a.y);var d=V.transformRect(l,f.matrix.multiply(c));o=g.rect(d).intersectionWithLineFromCenterToPoint(e,s.rotation)}else if("PATH"===u||"POLYGON"===u||"POLYLINE"===u||"CIRCLE"===u||"ELLIPSE"===u){for(var v="PATH"===u?n:n.toPath(),h=v.sample(),p=1/0,y=[],m=0,b=h.length;b>m;m++){var k=h[m],w=V.createSVGPoint(k.x,k.y);w=w.matrixTransform(this.node.getTransformToElement(t)),k=g.point(w);var C=k.distance(a),O=1.1*k.distance(e),P=C+O;p>P?(p=P,y=[{sample:k,refDistance:O}]):p+1>P&&y.push({sample:k,refDistance:O})}y.sort(function(e,t){return e.refDistance-t.refDistance}),o=y[0].sample}return o}}};var s=r.createElement=o;s.isVElement=function(e){return e instanceof r},t["default"]=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){for(var r=!0,i=0,a=e.length;a>i;i+=2)r=(0,o.invoke)(e[i],t,e[i+1]||n)&&r;return r}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=/\s+/,l=function(){function e(){r(this,e)}return a(e,[{key:"on",value:function(e,t,n){var r=this;if(!t)return r;var i=r.__events||(r.__events={});return e=e.split(u),(0,o.forEach)(e,function(e){var r=i[e]||(i[e]=[]);r.push(t,n)}),r}},{key:"once",value:function(e,t,n){var r=this,i=function a(){r.off(e,a),t.apply(n||r,arguments)};return r.on(e,i,n)}},{key:"off",value:function(e,t,n){var r=this,i=r.__events;return i?e||t||n?(e=e?e.split(u):(0,o.keys)(i),(0,o.forEach)(e,function(e){var r=i[e];if(r){if(!t&&!n)return void delete i[e];for(var a=r.length-2;a>=0;a-=2)t&&r[a]!==t||n&&r[a+1]!==n||r.splice(a,2)}}),r):(delete r.__events,r):r}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];var a=this,l=a.__events;if(!l||!e)return null;var c=!0,s=l["*"];return(0,o.forEach)(e.split(u),function(e){var t;"*"!==e&&(t=l[e],t&&i(t,n,a)),s&&i(s,[e].concat(n),a)}),c}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),u=n(11),l=(r(u),function(){function e(t){i(this,e);var n=this;n.attributes=(0,o.merge)({},n.constructor.defaults,t),n.visible=!0}return a(e,[{key:"getPosition",value:function(){}},{key:"getSize",value:function(){}},{key:"isNode",value:function(){return!1}},{key:"isLink",value:function(){return!1}},{key:"getTerminal",value:function(e){return e?this.source:this.target}},{key:"setTerminal",value:function(e,t){return t?this.source=e:this.target=e,e}},{key:"removeFromTerminal",value:function(e){var t=this,n=t.getTerminal(e);return n&&n.removeLink(t,e),t}},{key:"getChildCount",value:function(){var e=this.children;return e?e.length:0}},{key:"getChildIndex",value:function(e){return(0,o.indexOf)(this.children||[],e)}},{key:"getChildAt",value:function(e){var t=this.children;return t?t[e]:null}},{key:"eachChild",value:function(e,t){var n=this,r=n.children;return r&&(0,o.forEach)(r,e,t),n}},{key:"filterChild",value:function(e,t){var n=this.children;return n?(0,o.filter)(n,e,t):[]}},{key:"insertChild",value:function(e,t){var n=this;if(e){(0,o.isNullOrUndefined)(t)&&(t=n.getChildCount(),e.parent===n&&t--),e.removeFromParent(),e.parent=n;var r=n.children;r?r.splice(t,0,e):(r=n.children=[],r.push(e))}return n}},{key:"removeChild",value:function(e){return this.removeChildAt(this.getChildIndex(e))}},{key:"removeChildAt",value:function(e){var t=this,n=null,r=t.children;return r&&e>=0&&(n=t.getChildAt(e),n&&(r.splice(e,1),n.parent=null)),n}},{key:"getLinkCount",value:function(){var e=this.links;return e?e.length:0}},{key:"getLinkIndex",value:function(e){return(0,o.indexOf)(this.links||[],e)}},{key:"getLinkAt",value:function(e){var t=this.links;return t?t[e]:null}},{key:"eachLink",value:function(e,t){var n=this,r=n.links;return r&&(0,o.forEach)(r,e,t),n}},{key:"filterLink",value:function(e,t){var n=this.links;return n?(0,o.filter)(n,e,t):[]}},{key:"insertLink",value:function(e,t){var n=this;if(e){e.removeFromTerminal(t),e.setTerminal(n,t);var r=n.links;(!r||n.getLinkIndex(e)<0||e.getTerminal(!t)!==n)&&(r||(r=n.links=[]),r.push(e))}return e}},{key:"removeLink",value:function(e,t){var n=this,r=n.links;if(e){if(r&&e.getTerminal(!t)!==n){var i=n.getLinkIndex(e);i>=0&&r.splice(i,1)}e.setTerminal(null,t)}return e}},{key:"getParent",value:function(){return this.parent}},{key:"removeFromParent",value:function(){var e=this,t=e.parent;return t&&t.removeChild(e),e}},{key:"valueOf",value:function(){}},{key:"toString",value:function(){}},{key:"clone",value:function(){}},{key:"destroy",value:function(){}},{key:"defaults",get:function(){return this.constructor.defaults}}]),e}());t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(12),c=r(l),s=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),u(t,[{key:"isLink",value:function(){return!0}}]),t}(c["default"]);t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(12),c=r(l),s=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),u(t,[{key:"getPosition",value:function(e){}},{key:"setPosition",value:function(e,t,n){}},{key:"translate",value:function(){}},{key:"resize",value:function(e,t){}},{key:"rotate",value:function(){}},{key:"isNode",value:function(){return!0}},{key:"getBBox",value:function(){return!1}}]),t}(c["default"]);s.defaults={position:{x:0,y:0,relative:!1},size:{width:1,height:1,relative:!1},rotation:{angle:0,relative:!1},x:0,y:0,width:1,height:1,angle:0},t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),u=(r(o),n(10)),l=r(u),c=function(){function e(t,n){i(this,e);var r=this;r.cell=n,r.paper=t,r.ensureElement()}return a(e,[{key:"ensureElement",value:function(){var e=this,t=(0,l["default"])("g");return e.elem=t.node,e.vElem=t,e.paper.drawPane.appendChild(e.elem),e}},{key:"find",value:function(e){}},{key:"onDblClick",value:function(){}},{key:"onClick",value:function(){}},{key:"onPointerDown",value:function(){}},{key:"onPointerMove",value:function(){}},{key:"onPointerUp",value:function(){}},{key:"onMouseOver",value:function(){}},{key:"onMouseOut",value:function(){}},{key:"onContextMenu",value:function(){}}]),e}();t["default"]=c},function(e, t){"use strict"},function(e, t, n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e, t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0; n<t.length; n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t, n, r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(10),c=r(l),s=n(15),f=r(s),d=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),u(t,[{key:"update",value:function(){var e=this;return e}},{key:"render",value:function(){var e=this,t=e.vElem;return t.empty(),e.renderMarkup(),e.scalableNode=t.findOne(".pane-scalable"),e.rotatableNode=t.findOne(".pane-rotatable"),e.update().resize().rotate().translate()}},{key:"renderMarkup",value:function(){var e=this,t=e.cell,n=t.get("markup")||t.markup;if(!n)throw new Error("invalid markup");return e.vElem.append((0,c["default"])(n)),e}},{key:"scale",value:function(){var e=this;return e}},{key:"resize",value:function(){var e=this;return e}},{key:"rotate",value:function(){var e=this,t=e.rotatableNode;if(t){var n=e.cell,r=n.get("angle");if(r){var i=n.get("size")||{width:1,height:1},a=i.width/2,o=i.height/2;t.attr("transform","rotate("+r+","+a+","+o+")")}else t.removeAttr("transform")}return e}},{key:"translate",value:function(){var e=this;return e}},{key:"getBBox",value:function(){}}]),t}(f["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),c=n(11),s=r(c),f=n(12),d=r(f),v=n(19),h=r(v),p=n(20),g=r(p),y=n(21),m=r(y),b=function(e){function t(e){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this)),r=n;return r.nextId=0,r.updateLevel=0,r.endingUpdate=!1,r.changes=new m["default"](r),e?r.setRoot(e):r.clear(),n}return o(t,e),u(t,[{key:"clear",value:function(){return this.setRoot(this.createRoot())}},{key:"getDefaultParent",value:function(){return this.getRoot().getChildAt(0)}},{key:"isAncestor",value:function(e,t){if(!e||!t)return!1;for(;t&&t!==e;)t=t.parent;return t===e}},{key:"contains",value:function(e){return this.isAncestor(this.root,e)}},{key:"getCellById",value:function(e){return this.cells?this.cells[e]:null}},{key:"createCellId",value:function(){var e=this,t=e.nextId;return e.nextId+=1,"cell-"+t}},{key:"getAncestors",value:function(e){var t=this,n=[],r=e?e.parent:null;return r&&(n.push(r),n=n.concat(t.getAncestors(r))),n}},{key:"getDescendants",value:function(e){var t=this,n=[];return e=e||t.getRoot(),e.eachChild(function(e){n.push(e),n=n.concat(t.getDescendants(e))}),n}},{key:"getParents",value:function(e){var t=[];if(e){var n={};each(e,function(e){var r=e.parent;if(r){var i=cellRoute.create(r);n[i]||(n[i]=r,t.push(r))}})}return t}},{key:"isRoot",value:function(e){return e&&this.root===e}},{key:"createRoot",value:function(){var e=new d["default"];return e.insertChild(this.createLayer()),e}},{key:"getRoot",value:function(e){var t=e||this.root;if(e)for(;e;)t=e,e=e.parent;return t}},{key:"setRoot",value:function(e){return this.digest(new h["default"](this,e))}},{key:"rootChanged",value:function(e){var t=this,n=t.root;return t.root=e,t.cells=null,t.nextId=0,t.cellAdded(e),n}},{key:"isLayer",value:function(e){return e&&this.isRoot(e.parent)}},{key:"getLayers",value:function(){return this.getRoot().children||[]}},{key:"createLayer",value:function(){return new d["default"]}},{key:"getParent",value:function(e){return e?e.parent:null}},{key:"addCell",value:function(e,t,n){return this.addCells([e],t,n)}},{key:"addCells",value:function(e,t,n){var r=this;return t=t||r.getDefaultParent(),n=(0,l.isNullOrUndefined)(n)?t.getChildCount():n,r.beginUpdate(),(0,l.forEach)(e,function(e){e&&t&&e!==t?(r.digest(new g["default"](r,t,e,n)),n+=1):n-=1}),r.endUpdate(),r}},{key:"childChanged",value:function(e,t,n){var r=this,i=e.parent;return t?(t!==i||i.getChildIndex(e)!==n)&&t.insertChild(e,n):i&&i.removeChild(e),t&&!r.contains(i)?r.cellAdded(e):t||r.cellRemoved(e),i}},{key:"linkChanged",value:function(e,t,n){var r=e.getNode(n);return t?t.insertLink(e,n):r&&r.removeLink(e,n),r}},{key:"cellAdded",value:function(e){var t=this;if(e){var n=e.id||t.createCellId(e);if(n){var r=t.getCellById(n);if(r!==e){for(;r;)n=t.createCellId(e),r=t.getCellById(n);t.cells||(t.cells={}),e.id=n,t.cells[n]=e}}(0,l.isNumeric)(n)&&(t.nextId=Math.max(t.nextId,n)),e.eachChild(t.cellAdded,t)}}},{key:"updateLinkParents",value:function(e,t){var n=this;t=t||n.getRoot(e),e.eachChild(function(e){n.updateLinkParents(e,t)}),e.eachLink(function(e){n.isAncestor(t,e)&&n.updateLinkParent(e,t)})}},{key:"updateLinkParent",value:function(e,t){for(var n=this,r=null,i=e.getTerminal(!0),a=e.getTerminal(!1);i&&!i.isLink&&i.geometry&&i.geometry.relative;)i=i.parent;for(;a&&!a.isLink&&a.geometry&&a.geometry.relative;)a=a.parent;
if(n.isAncestor(t,i)&&n.isAncestor(t,a)&&(r=i===a?i.parent:n.getNearestCommonAncestor(i,a),r&&(r.parent!==n.root||n.isAncestor(r,e))&&e.parent!==r)){var o=e.geometry;if(o){var u=n.getOrigin(e.parent),l=n.getOrigin(r),c=l.x-u.x,s=l.y-u.y;o=o.clone(),o.translate(-c,-s),n.setGeometry(e,o)}n.add(r,e)}}},{key:"getNearestCommonAncestor",value:function(e,t){if(e&&t){var n=cellRoute.create(e),r=cellRoute.create(t);if(n&&r){var i=e,a=r,o=n;for(n.length>r.length&&(i=t,a=n,o=r);i;){var u=i.parent;if(0===a.indexOf(o+cellRoute.separator)&&u)return i;i=u,o=cellRoute.getParentRoute(o)}}}return null}},{key:"getOrigin",value:function(e){var t=this,n=null;if(e){if(n=t.getOrigin(e.parent),!e.isLink){var r=e.geometry;r&&(n.x+=r.x,n.y+=r.y)}}else n=new Point;return n}},{key:"remove",value:function(e){var t=this;return e&&(e===t.root?t.setRoot(null):e.parent&&t.digest(new g["default"](t,null,e))),e}},{key:"cellRemoved",value:function(e){var t=this;if(e){e.eachChild(function(e){t.cellRemoved(e)});var n=e.id,r=t.cells;r&&n&&delete r[n]}}},{key:"getChildNodes",value:function(e){return this.getChildCells(e,!0,!1)}},{key:"getChildLinks",value:function(e){return this.getChildCells(e,!1,!0)}},{key:"getChildCells",value:function(e,t,n){return e?e.filterChild(function(e){return t&&e.isNode||n&&e.isLink}):[]}},{key:"digest",value:function(e){var t=this;return e.digest(),t.beginUpdate(),t.changes.add(e),t.endUpdate(),t}},{key:"beginUpdate",value:function(){var e=this;e.updateLevel+=1,e.trigger("beginUpdate"),1===e.updateLevel&&e.trigger("startEdit")}},{key:"endUpdate",value:function(){var e=this;if(e.updateLevel-=1,0===e.updateLevel&&e.trigger("endEdit"),!e.endingUpdate){var t=e.changes;e.endingUpdate=0===e.updateLevel,e.trigger("endUpdate",t.changes),e.endingUpdate&&t.hasChange()&&t.notify().clear(),e.endingUpdate=!1}}}]),t}(s["default"]);t["default"]=b},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r){n(this,e);var i=this;i.model=t,i.root=r,i.previous=r}return r(e,[{key:"digest",value:function(){var e=this,t=e.model,n=e.previous;return e.root=n,e.previous=t.rootChanged(n),e}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r,i,a){n(this,e);var o=this;o.model=t,o.child=i,o.parent=r,o.index=a,o.previous=r,o.previousIndex=a}return r(e,[{key:"digest",value:function(){var e=this,t=e.model,n=e.child,r=e.previous,i=e.previousIndex,a=n.parent,o=a?a.getChildIndex(n):0;return r||e.connect(n,!1),a=t.childChanged(n,r,i),r&&e.connect(n,!0),e.parent=r,e.index=i,e.previous=a,e.previousIndex=o,e}},{key:"connect",value:function(e,t){var n=this,r=n.model;if(e.isLink()){var i=e.getTerminal(!0),a=e.getTerminal(!1);i&&r.linkChanged(e,t?i:null,!0),a&&r.linkChanged(e,t?a:null,!1),e.setTerminal(i,!0),e.setTerminal(a,!1)}return e.eachChild(function(e){n.connect(e,t)}),n}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){n(this,e),this.model=t}return r(e,[{key:"hasChange",value:function(){var e=this.changes;return e&&e.length}},{key:"add",value:function(e){var t=this,n=t.changes;return e&&(n||(n=t.changes=[]),n.push(e)),e}},{key:"clear",value:function(){return this.changes=null,this}},{key:"notify",value:function(){var e=this;return e.model.trigger("change",e.changes),e}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),c=n(11),s=r(c),f=n(10),d=r(f),v=n(18),h=r(v),p=n(16),g=r(p),y=n(17),m=r(y),b=n(19),k=r(b),w=n(20),C=r(w),O={x:0,y:0,width:"100%",height:"100%",gridSize:1,viewportClassName:"pane-viewport",linkClassName:"",nodeClassName:"",getCellClassName:function(e){},getView:function(e){}},P=function(e){function t(e,n,r){i(this,t);var o=a(this,Object.getPrototypeOf(t).call(this)),u=o;return u.model=n||new h["default"],u.configure(r),e&&u.init(e).setup().resize().translate(),o}return o(t,e),u(t,[{key:"configure",value:function(e){var t=this;return t.options=(0,l.merge)({},O,e),t.trigger("paper:configure",t.options),t}},{key:"init",value:function(e){var t=this;if(e){var n=(0,d["default"])("svg"),r=(0,d["default"])("g"),i=(0,d["default"])("g");r.append(i),n.append(r),e.appendChild(n.node),t.container=e,t.svg=n.node,t.root=r.node,t.drawPane=i.node,t.trigger("paper:init",e)}return t}},{key:"setup",value:function(){var e=this;return e.model.on("change",e.processChanges,e),e.trigger("paper:setup"),e}},{key:"remove",value:function(){}},{key:"destroy",value:function(){var e=this;return e.trigger("paper:destroy"),e}},{key:"revalidate",value:function(){return this.invalidate().validate()}},{key:"clear",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=this,i=r.model;return e=e||i.getRoot(),r.removeState(e),n&&(t||e!==r.currentRoot)?e.eachChild(function(e){r.clear(e,t,n)}):r.invalidate(e,!0,!0),r}},{key:"invalidate",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=this,i=r.model;e=e||i.getRoot();var a=r.getView(e);return a&&(a.invalid=!0),e.invalidating||(e.invalidating=!0,t&&e.eachChild(function(e){r.invalidate(e,t,n)}),n&&e.eachLink(function(e){r.invalidate(e,t,n)}),e.invalidating=!1),r}},{key:"validate",value:function(e){var t=this;return e=e||t.model.getRoot(),t.validateCell(e).validateView(e),t}},{key:"validateCell",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=this;if(e){t=t&&e.isVisible();var r=n.getView(e,t);r&&!t&&n.removeView(e),e.eachChild(function(e){n.validateCell(e,t)})}return n}},{key:"validateView",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=this;if(e){var r=n.getView(e);r&&r.invalid&&(r.invalid=!1,n.validateView(e.getParent(),t),n.renderView(e)),t&&e.eachChild(function(e){n.validateView(e,t)})}return n}},{key:"resize",value:function(e,t){var n=this,r=n.options;return e=r.width=e||r.width,t=r.height=t||r.height,(0,d["default"])(n.svg).attr({width:e,height:t}),n.trigger("paper:resize",e,t),n}},{key:"translate",value:function(e,t,n){var r=this,i=r.options;return e=i.x=e||i.x,t=i.y=t||i.y,(0,d["default"])(r.root).translate(e,t,n),r.trigger("paper:translate",e,t),r}},{key:"translateTo",value:function(e,t){return this.translate(e,t,!0)}},{key:"scale",value:function(e,t){arguments.length<=2||void 0===arguments[2]?0:arguments[2],arguments.length<=3||void 0===arguments[3]?0:arguments[3]}},{key:"rotate",value:function(e){arguments.length<=1||void 0===arguments[1]?0:arguments[1],arguments.length<=2||void 0===arguments[2]?0:arguments[2]}},{key:"getView",value:function(e,t){var n=this,r=n.views;if(e){var i=r?r[e.id]:null;return!i&&t&&e.visible&&(i=n.createView(e)),i}}},{key:"createView",value:function(e){var t=this,n=t.options,r=n.getView.call(t,e);if(r||(r=e.isLink()?g["default"]:e.isNode()?m["default"]:null),r){var i=new r(t,e),a=t.views;return a||(a=t.views={}),a[e.id]=i,i}}},{key:"removeView",value:function(e){var t=this,n=t.getView(e);return n&&(delete t.views[e.id],n.destroy()),t}},{key:"renderView",value:function(e){var t=this,n=t.getView(e);n&&n.render()}},{key:"processChanges",value:function(e){var t=this;return console.log(e),(0,l.forEach)(e,function(e){t.distributeChange(e)}),t.validate(),t}},{key:"distributeChange",value:function(e){var t=this;return e instanceof k["default"]?t.onRootChanged(e):e instanceof C["default"]&&t.onChildChanged(e),t}},{key:"onRootChanged",value:function(e){}},{key:"onChildChanged",value:function(e){var t=this,n=e.parent,r=e.previous;t.invalidate(e.child,!0,!0),n!==r&&(n&&t.invalidate(n,!1,!1),r&&t.invalidate(r,!1,!1))}},{key:"onPointerDown",value:function(e){}},{key:"onPointerMove",value:function(e){}},{key:"onPointerUp",value:function(e){}}]),t}(s["default"]);t["default"]=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),l=n(14),c=r(l),s=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),t}(c["default"]);s.defaults=(0,u.merge)({},c["default"].defaults,{type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}}),t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),l=n(23),c=r(l),s=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),t}(c["default"]);s.markup='<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',s.defaults=(0,u.merge)({},c["default"].defaults,{type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}}),t["default"]=s}])});
