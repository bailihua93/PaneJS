{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///webpack/bootstrap 434fd35abaf976fffa79?27b1","webpack:///./src/index.js?9552","webpack:///./src/shapes/index.js?3fc9","webpack:///./src/shapes/basic/Rect.js?5bda","webpack:///./src/cells/Node.js?3fd8","webpack:///./src/geometry/Rect.js?079c","webpack:///./src/common/utils.js?25a1","webpack:///./src/utils/lang.js?79c7","webpack:///./src/utils/array.js?a797","webpack:///./src/utils/string.js?32a6","webpack:///./src/utils/object.js?1652","webpack:///./src/utils/number.js?c8d8","webpack:///./src/utils/function.js?94df","webpack:///./src/utils/dom.js?bcd1","webpack:///./src/utils/geom.js?7061","webpack:///./src/utils/event.js?149e","webpack:///./src/common/detector.js?532e","webpack:///./src/utils/pathData.js?d43a","webpack:///./src/utils/transform.js?0e60","webpack:///./src/geometry/Point.js?26b1","webpack:///./src/geometry/Line.js?cec6","webpack:///./src/cells/Cell.js?cd74","webpack:///./src/cells/Terminal.js?9e81","webpack:///./src/shapes/basic/Path.js?0156","webpack:///./src/shapes/basic/Text.js?16f0","webpack:///./src/shapes/basic/Ports.js?677e","webpack:///./src/cells/Portal.js?0ba8","webpack:///./src/views/PortalView.js?1d9a","webpack:///./src/common/vector.js?ed20","webpack:///./src/geometry/Ellipse.js?260f","webpack:///./src/views/NodeView.js?90f4","webpack:///./src/views/VectorView.js?8c94","webpack:///./src/common/filters.js?8ebc","webpack:///./src/views/CellView.js?f451","webpack:///./src/shapes/basic/Image.js?fbec","webpack:///./src/shapes/basic/Circle.js?da9e","webpack:///./src/shapes/basic/Rhombus.js?8415","webpack:///./src/shapes/basic/Ellipse.js?e486","webpack:///./src/shapes/basic/Polygon.js?bf87","webpack:///./src/shapes/basic/Polyline.js?0a6f","webpack:///./src/shapes/basic/LabelLink.js?1e17","webpack:///./src/shapes/basic/ElementLink.js?1293","webpack:///./src/changes/index.js?2efe","webpack:///./src/changes/Change.js?f1e4","webpack:///./src/changes/RootChange.js?3da2","webpack:///./src/changes/ChildChange.js?ed52","webpack:///./src/changes/VisibleChange.js?9da1","webpack:///./src/changes/TerminalChange.js?c70a","webpack:///./src/changes/GeometryChange.js?3106","webpack:///./src/changes/ChangeCollection.js?975b","webpack:///./src/geometry/index.js?29f9","webpack:///./src/geometry/bezier.js?abdd","webpack:///./src/common/Events.js?299e","webpack:///./src/core/Model.js?2a41","webpack:///./src/changes/SizeChange.js?f1bb","webpack:///./src/changes/PositionChange.js?5b22","webpack:///./src/changes/RotationChange.js?0509","webpack:///./src/changes/AttributeChange.js?6558","webpack:///./src/core/Paper.js?2e8f","webpack:///./src/views/LinkView.js?326d","webpack:///./src/cells/Link.js?eaec","webpack:///./src/handlers/Handler.js?557f","webpack:///./src/handlers/Selection.js?b0c3","webpack:///./src/controllers/Vertex.js?f42a","webpack:///./src/controllers/Controller.js?99c0","webpack:///./src/handlers/Connection.js?fea2","webpack:///./src/shapes/connector/sharp.js?2732","webpack:///./src/shapes/connector/smooth.js?4dea","webpack:///./src/shapes/connector/rounded.js?5189","webpack:///./src/shapes/marker/classic.js?ae7c","webpack:///./src/shapes/marker/diamond.js?64ec","webpack:///./src/shapes/marker/block.js?fd5a","webpack:///./src/shapes/marker/cloven.js?e528","webpack:///./src/shapes/marker/oval.js?e1c1","webpack:///./src/style/index.less?1266"],"names":[],"mappings":"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","file":"panejs-0.0.2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"panejs\"] = factory();\n\telse\n\t\troot[\"panejs\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 434fd35abaf976fffa79\n **/","// styles\n// ------\n\nrequire('./style/index.less');\n\n\n// common\n// ------\nimport * as utils           from './common/utils';\nimport vector, { VElement } from './common/vector';\nimport detector             from './common/detector';\nimport Events               from './common/Events';\n\n\n// core\n// ----\nimport Model from './core/Model';\nimport Paper from './core/Paper';\n\n\n// models\n// ------\nimport Cell     from './cells/Cell';\nimport Link     from './cells/Link';\nimport Node     from './cells/Node';\nimport Portal   from './cells/Portal';\nimport Terminal from './cells/Terminal';\n\n\n// views\n// -----\nimport CellView   from './views/CellView';\nimport LinkView   from './views/LinkView';\nimport NodeView   from './views/NodeView';\nimport PortalView from './views/PortalView';\nimport VectorView from './views/VectorView';\n\n\nimport Handler           from './handlers/Handler';\nimport SelectionHandler  from './handlers/Selection';\nimport ConnectionHandler from './handlers/Connection';\n\n\n// connectors\n// ----------\nimport sharpConnector   from './shapes/connector/sharp';\nimport smoothConnector  from './shapes/connector/smooth';\nimport roundedConnector from './shapes/connector/rounded';\n\nPaper\n    .registerConnector('sharp', sharpConnector)\n    .registerConnector('smooth', smoothConnector)\n    .registerConnector('rounded', roundedConnector);\n\n\n// markers\n// -------\nimport classicMarker from './shapes/marker/classic';\nimport diamondMarker from './shapes/marker/diamond';\nimport blockMarker   from './shapes/marker/block';\nimport clovenMarker  from './shapes/marker/cloven';\nimport ovalMarker    from './shapes/marker/oval';\n\nPaper\n    .registerMarker('classic', classicMarker)\n    .registerMarker('diamond', diamondMarker)\n    .registerMarker('cloven', clovenMarker)\n    .registerMarker('block', blockMarker)\n    .registerMarker('oval', ovalMarker);\n\n\n// exports\n// -------\n\nexport {\n    utils,\n    detector,\n    vector,\n    VElement,\n    Events,\n\n    Model,\n    Paper,\n\n    Cell,\n    Link,\n    Node,\n    Portal,\n    Terminal,\n\n    CellView,\n    LinkView,\n    NodeView,\n    PortalView,\n    VectorView,\n\n    Handler,\n    SelectionHandler,\n    ConnectionHandler,\n};\n\nexport * from './shapes/index';\nexport * from './changes/index';\nexport * from './geometry/index';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Rect        from './basic/Rect';\nimport Path        from './basic/Path';\nimport Text        from './basic/Text';\nimport Ports       from './basic/Ports';\nimport Image       from './basic/Image';\nimport Circle      from './basic/Circle';\nimport Rhombus     from './basic/Rhombus';\nimport Ellipse     from './basic/Ellipse';\nimport Polygon     from './basic/Polygon';\nimport Polyline    from './basic/Polyline';\nimport LabelLink   from './basic/LabelLink';\nimport ElementLink from './basic/ElementLink';\n\nlet shapes = {\n    basic: {\n        Text,\n        Rect,\n        Path,\n        Image,\n        Ports,\n        Circle,\n        Rhombus,\n        Ellipse,\n        Polygon,\n        Polyline,\n        LabelLink,\n        ElementLink\n    }\n};\n\n\nexport {\n    shapes\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/index.js\n **/","import Node from '../../cells/Node';\n\nclass Rect extends Node {}\n\nRect.setDefaults({\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><rect/></g><text/></g>',\n    attrs: {\n        '.': {\n            'fill': '#fff',\n            'stroke': 'none'\n        },\n        'rect': {\n            'fill': '#fff',\n            'stroke': '#000',\n            'stroke-width': '1',\n            'width': 80,\n            'height': 30\n        },\n        'text': {\n            'fill': '#000',\n            'font-size': 12,\n            'ref-x': .5,\n            'ref-y': .5,\n            'text-anchor': 'middle',\n            'y-alignment': 'middle',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\n// exports\n// -------\n\nexport default Rect;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Rect.js\n **/","import Rect from '../geometry/Rect';\nimport Cell from '../cells/Cell';\n\n\nclass Node extends Cell {\n\n    // static\n    // ------\n\n    static isNode(node) {\n\n        return node && node instanceof Node;\n    }\n\n\n    // methods\n    // -------\n\n    isNode() {\n\n        return true;\n    }\n\n    getBBox() {\n\n        let pos  = this.getPosition();\n        let size = this.getSize();\n\n        return new Rect(pos.x, pos.y, size.width, size.height);\n    }\n}\n\n\nNode.setDefaults({\n    tagName: 'g',\n    markup: '',\n    classNames: 'pane-cell pane-node', // pane-cell for event handler\n    pane: null,   // specify the drawPane of the view\n    view: null,   // specify the constructor of the view\n    data: null,   // cached data(for business logic)\n    attrs: null,  // styles\n\n    size: {\n        width: 1,\n        height: 1,\n        relative: false\n    },\n    position: {\n        x: 0,\n        y: 0,\n        relative: false\n    },\n    rotation: {\n        angle: 0,\n        inherited: true // inherit the parent's rotation\n    }\n});\n\n\n// exports\n// -------\n\nexport default Node;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Node.js\n **/","import * as utils from '../common/utils';\nimport      Point from './Point';\nimport      Line  from './Line';\n\n\nclass Rect {\n\n    constructor(x = 0, y = 0, width = 0, height = 0) {\n\n        this.x      = x;\n        this.y      = y;\n        this.width  = width;\n        this.height = height;\n    }\n\n\n    // statics\n    // -------\n\n    static equals(rect1, rect2) {\n\n        let result = this.isRect(rect1) && this.isRect(rect2);\n        if (result) {\n\n            rect1.standardizePort();\n            rect2.standardizePort();\n\n            result = rect1.x === rect2.x\n                && rect1.y === rect2.y\n                && rect1.width === rect2.width\n                && rect1.height === rect2.height;\n        }\n\n        return result;\n    }\n\n    static fromRect(rect) {\n\n        return new Rect(rect.x, rect.y, rect.width, rect.height);\n    }\n\n    static fromVerticesAndRotation(v1, v2, rotation = 0) {\n\n        let cx = (v1.x + v2.x) / 2;\n        let cy = (v1.y + v2.y) / 2;\n\n        let distance      = new Point(v1.x, v1.y).distance(new Point(v2.x, v2.y));\n        let verticesAngle = Math.atan(Math.abs((v2.y - v1.y) / (v1.x - v2.x))) * 180 / Math.PI;\n\n        let width  = Math.abs(distance * Math.sin((90 - rotation + verticesAngle) / 180 * Math.PI));\n        let height = Math.abs(distance * Math.cos((90 - rotation + verticesAngle) / 180 * Math.PI));\n\n        let x = cx - width / 2;\n        let y = cy - height / 2;\n\n        let rect = new Rect(x, y, width, height);\n\n        rect.cx       = cx;\n        rect.cy       = cy;\n        rect.rotation = rotation;\n\n        return rect;\n    }\n\n    static isRect(rect) {\n\n        return rect && rect instanceof Rect;\n    }\n\n    // methods\n    // -------\n\n    getOrigin() {\n\n        return new Point(this.x, this.y);\n    }\n\n    getCenter() {\n\n        return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    }\n\n    getCorner() {\n\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n\n    getTopRight() {\n\n        return new Point(this.x + this.width, this.y);\n    }\n\n    getBottomLeft() {\n\n        return new Point(this.x, this.y + this.height);\n    }\n\n    getNearestSideToPoint(point) {\n\n        // get (left|right|top|bottom) side which is nearest to point\n\n        let distToLeft   = point.x - this.x;\n        let distToTop    = point.y - this.y;\n        let distToRight  = (this.x + this.width) - point.x;\n        let distToBottom = (this.y + this.height) - point.y;\n\n        let closest = distToLeft;\n        let side    = 'left';\n\n        if (distToRight < closest) {\n\n            closest = distToRight;\n            side    = 'right';\n        }\n\n        if (distToTop < closest) {\n\n            closest = distToTop;\n            side    = 'top';\n        }\n\n        if (distToBottom < closest) {\n\n            // closest = distToBottom;\n            side = 'bottom';\n        }\n\n        return side;\n    }\n\n    getNearestPointToPoint(point) {\n\n        // get a point on my boundary nearest to `point`\n\n        if (this.containsPoint(point)) {\n\n            let side = this.getNearestSideToPoint(point);\n\n            if (side === 'right') {\n\n                return new Point(this.x + this.width, point.y);\n\n            } else if (side === 'left') {\n\n                return new Point(this.x, point.y);\n\n            } else if (side === 'bottom') {\n\n                return new Point(point.x, this.y + this.height);\n\n            } else if (side === 'top') {\n\n                return new Point(point.x, this.y);\n            }\n        }\n\n        return point.adhereToRect(this);\n    }\n\n    containsPoint(point) {\n        return point\n            && point.x >= this.x\n            && point.x <= this.x + this.width\n            && point.y >= this.y\n            && point.y <= this.y + this.height;\n    }\n\n    containsRect(rect) {\n\n        this.normalize();\n        rect.normalize();\n\n        let x2 = rect.x;\n        let y2 = rect.y;\n        let w2 = rect.width;\n        let h2 = rect.height;\n\n        let x1 = this.x;\n        let y1 = this.y;\n        let w1 = this.width;\n        let h1 = this.height;\n\n        return x2 >= x1\n            && y2 >= y1\n            && (x2 + w2) <= (x1 + w1)\n            && (y2 + h2) <= (y1 + h1);\n    }\n\n    unContainsRect(rect) {\n\n        this.normalize();\n        rect.normalize();\n\n        return !(this.containPoint(rect.getOrigin())\n        || this.containPoint(rect.getCorner())\n        || this.containPoint(rect.getTopRight())\n        || this.containPoint(rect.getBottomLeft()));\n    }\n\n    intersect(rect) {\n\n        let origin1 = this.getOrigin();\n        let corner1 = this.getCorner();\n        let origin2 = rect.getOrigin();\n        let corner2 = rect.getCorner();\n\n        // no intersection found\n        if (origin1.x >= corner2.x ||\n            origin1.y >= corner2.y ||\n            origin2.x >= corner1.x ||\n            origin2.y >= corner1.y) {\n            return null;\n        }\n\n        let x = Math.max(origin1.x, origin2.x);\n        let y = Math.max(origin1.y, origin2.y);\n        let w = Math.min(corner1.x, corner2.x) - x;\n        let h = Math.min(corner1.y, corner2.y) - y;\n\n        return new Rect(x, y, w, h);\n    }\n\n    union(rect) {\n\n        let origin1 = this.getOrigin();\n        let corner1 = this.getCorner();\n        let origin2 = rect.getOrigin();\n        let corner2 = rect.getCorner();\n\n        let originX = Math.min(origin1.x, origin2.x);\n        let originY = Math.min(origin1.y, origin2.y);\n        let cornerX = Math.max(corner1.x, corner2.x);\n        let cornerY = Math.max(corner1.y, corner2.y);\n\n        return new Rect(originX, originY, cornerX - originX, cornerY - originY);\n    }\n\n    intersectionWithLineFromCenterToPoint(point, angle) {\n\n        // Find point on my boundary where line starting from my center ending\n        // in point p intersects me. If angle is specified, intersection with\n        // rotated rectangle is computed.\n\n        let result;\n        let center = this.getCenter();\n\n        if (angle) {\n            point.rotate(center, angle);\n        }\n\n        // clockwise, starting from the top side\n        let sides = [\n            new Line(this.getOrigin(), this.getTopRight()),\n            new Line(this.getTopRight(), this.getCorner()),\n            new Line(this.getCorner(), this.getBottomLeft()),\n            new Line(this.getBottomLeft(), this.getOrigin())\n        ];\n\n        let connector = new Line(center, point);\n\n        for (let i = sides.length - 1; i >= 0; --i) {\n            let intersection = sides[i].intersection(connector);\n            if (intersection) {\n                result = intersection;\n                break;\n            }\n        }\n\n        if (result && angle) {\n            result.rotate(center, -angle);\n        }\n\n        return result;\n    }\n\n    moveAndExpand(rect) {\n\n        this.x += rect.x || 0;\n        this.y += rect.y || 0;\n        this.width += rect.width || 0;\n        this.height += rect.height || 0;\n\n        return this;\n    }\n\n    grow(amount) {\n\n        this.x -= amount;\n        this.y -= amount;\n        this.width += 2 * amount;\n        this.height += 2 * amount;\n\n        return this;\n    }\n\n    round(precision) {\n\n        this.x      = precision ? utils.toFixed(this.x, precision) : Math.round(this.x);\n        this.y      = precision ? utils.toFixed(this.y, precision) : Math.round(this.y);\n        this.width  = precision ? utils.toFixed(this.width, precision) : Math.round(this.width);\n        this.height = precision ? utils.toFixed(this.height, precision) : Math.round(this.height);\n\n        return this;\n    }\n\n    normalize() {\n\n        // Normalize the rectangle.\n        // i.e., make it so that it has a non-negative width and height.\n        // If width < 0 the function swaps the left and right corners,\n        // and it swaps the top and bottom corners if height < 0\n\n        let x = this.x;\n        let y = this.y;\n        let w = this.width;\n        let h = this.height;\n\n        if (w < 0) {\n            x = x + w;\n            w = -w;\n        }\n\n        if (h < 0) {\n            y = y + h;\n            h = -h;\n        }\n\n        this.x      = x;\n        this.y      = y;\n        this.width  = w;\n        this.height = h;\n\n        return this;\n    }\n\n    getBBox(angle) {\n\n        let rad = utils.toRad(angle || 0);\n        let sin = Math.abs(Math.sin(rad));\n        let cos = Math.abs(Math.cos(rad));\n        let w   = this.width * cos + this.height * sin;\n        let h   = this.width * sin + this.height * cos;\n\n        return new Rect(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n    }\n\n    snapToGrid(gx, gy) {\n\n        let that   = this;\n        let origin = that.getOrigin();\n        let corner = that.getCorner();\n\n        origin = origin.snapToGrid(gx, gy);\n        corner = corner.snapToGrid(gx, gy);\n\n        that.x      = origin.x;\n        that.y      = origin.y;\n        that.width  = corner.x - origin.x;\n        that.height = corner.y - origin.y;\n\n        return that;\n    }\n\n\n    // common\n    // ------\n\n    equals(rect) {\n\n        return Rect.equals(this, rect);\n    }\n\n    valueOf() {\n\n        return [this.x, this.y, this.width, this.height];\n    }\n\n    toString() {\n\n        return this.valueOf().join(', ');\n    }\n\n    clone() {\n\n        return Rect.fromRect(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Rect;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Rect.js\n **/","export * from '../utils/lang';\nexport * from '../utils/array';\nexport * from '../utils/string';\nexport * from '../utils/number';\nexport * from '../utils/object';\nexport * from '../utils/function';\nexport * from '../utils/dom';\nexport * from '../utils/geom';\nexport * from '../utils/event';\nexport * from '../utils/pathData';\nexport * from '../utils/transform';\n\nexport default {};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/utils.js\n **/","let objProto = Object.prototype;\nlet toString = objProto.toString;\n\n\nfunction isNull(obj) {\n\n    return obj === null;\n}\n\nfunction isUndefined(obj) {\n\n    return typeof obj === 'undefined';\n}\n\nfunction isNil(obj) {\n\n    return isUndefined(obj) || isNull(obj);\n}\n\nfunction isString(obj) {\n\n    return typeof obj === 'string';\n}\n\nfunction isBoolean(obj) {\n\n    return typeof obj === 'boolean';\n}\n\nfunction isType(obj, type) {\n\n    return toString.call(obj) === '[object ' + type + ']';\n}\n\nfunction isObject(obj) {\n\n    if (!obj) {\n        return false;\n    }\n\n    let type = typeof obj;\n\n    return type === 'function' || type === 'object';\n}\n\nfunction isWindow(obj) {\n\n    return obj && obj === obj.window;\n}\n\nfunction isFunction(obj) {\n\n    return isType(obj, 'Function');\n}\n\nfunction isArray(obj) {\n\n    return Array.isArray(obj);\n}\n\nfunction isArrayLike(obj) {\n\n    if (isArray(obj)) {\n        return true;\n    }\n\n    if (isFunction(obj) || isWindow(obj)) {\n        return false;\n    }\n\n    let length = !!obj && 'length' in obj && obj.length;\n\n    return length === 0 ||\n        typeof length === 'number' && length > 0 && (length - 1) in obj;\n}\n\nfunction isNumeric(obj) {\n\n    return !isArray(obj) && (obj - parseFloat(obj) + 1) >= 0;\n}\n\n\n// exports\n// -------\n\nexport {\n    isNil,\n    isNull,\n    isType,\n    isArray,\n    isWindow,\n    isObject,\n    isString,\n    isBoolean,\n    isNumeric,\n    isFunction,\n    isArrayLike,\n    isUndefined,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/lang.js\n **/","import { isArray, isArrayLike } from './lang';\n\nconst proto = Array.prototype;\n\nconst toArray = obj => isArray(obj)\n    ? obj : isArrayLike(obj)\n    ? proto.slice.call(obj)\n    : [obj];\n\nconst slice       = (arr, start, end) => arr ? proto.slice.call(arr, start, end) : [];\nconst indexOf     = (arr, item) => arr ? proto.indexOf.call(arr, item) : -1;\nconst lastIndexOf = (arr, item) => arr ? proto.lastIndexOf.call(arr, item) : -1;\nconst contains    = (arr, item) => arr && indexOf(arr, item) >= 0;\n\nconst forEach     = (arr, iterator, context) => { arr && proto.forEach.call(arr, iterator, context); };\nconst map         = (arr, iterator, context) => arr ? proto.map.call(arr, iterator, context) : [];\nconst some        = (arr, iterator, context) => arr ? proto.some.call(arr, iterator, context) : false;\nconst every       = (arr, iterator, context) => arr ? proto.every.call(arr, iterator, context) : false;\nconst filter      = (arr, iterator, context) => arr ? proto.filter.call(arr, iterator, context) : [];\nconst reduce      = (arr, iterator, initialValue) => arr ? proto.reduce.call(arr, iterator, initialValue) : initialValue;\nconst reduceRight = (arr, iterator, initialValue) => arr ? proto.reduceRight.call(arr, iterator, initialValue) : initialValue;\n\n\n// exports\n// -------\n\nexport {\n    toArray,\n    slice,\n    indexOf,\n    lastIndexOf,\n    contains,\n\n    forEach,\n    map,\n    some,\n    every,\n    filter,\n    reduce,\n    reduceRight,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/array.js\n **/","import { isNil     } from './lang';\nimport { getByPath } from './object';\n\nlet proto = String.prototype;\n\nfunction toString(str) {\n\n    return '' + str;\n}\n\nfunction toUpper(str) {\n\n    return toString(str).toUpperCase();\n}\n\nfunction toLower(str) {\n\n    return toString(str).toLowerCase();\n}\n\nfunction ucFirst(str) {\n\n    return str.charAt(0).toUpperCase() + str.substring(1);\n}\n\nfunction lcFirst(str) {\n\n    return str.charAt(0).toLowerCase() + str.substring(1);\n}\n\nfunction split(str, divider = /\\s+/) {\n\n    return toString(str).split(divider);\n}\n\nfunction trim(str) {\n\n    return str ? proto.trim.call('' + str) : '';\n}\n\nfunction uuid() {\n\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        let r = Math.random() * 16 | 0;\n        let v = c === 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\nfunction hashCode(str) {\n\n    // Return a simple hash code from a string.\n    // See http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/.\n\n    let hash   = 0;\n    let length = str.length;\n\n    if (length === 0) {\n        return hash;\n    }\n\n    for (let i = 0; i < length; i++) {\n        let c = str.charCodeAt(i);\n        hash  = ((hash << 5) - hash) + c;\n        hash  = hash & hash; // Convert to 32bit integer\n    }\n\n    return hash;\n}\n\nfunction format(tpl, data) {\n\n    if (tpl && data) {\n        return ('' + tpl).replace(/\\$\\{(\\w+)\\}/g, function (input, key) {\n            let val = getByPath(data, key);\n            return val !== undefined ? val : input;\n        });\n    }\n\n    return tpl;\n}\n\nfunction sanitizeText(text) {\n\n    // Replace all spaces with the Unicode No-break space.\n    // ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n    // IE would otherwise collapse all spaces into one. This is useful\n    // e.g. in tests when you want to compare the actual DOM text content\n    // without having to add the unicode character in the place of all spaces.\n\n    return (text || '').replace(/ /g, '\\u00A0');\n}\n\nfunction startWith(str, prefix) {\n\n    return ('' + str).indexOf(prefix) === 0;\n}\n\nfunction endWith(str, suffix) {\n\n    str = '' + str;\n\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n}\n\nfunction padStr(str, max, pad, isStart) {\n\n    if (isNil(str) || isNil(max)) {\n        return str;\n    }\n\n    let result    = String(str);\n    let targetLen = typeof max === 'number'\n        ? max\n        : parseInt(max, 10);\n\n    if (isNaN(targetLen) || !isFinite(targetLen)) {\n        return result;\n    }\n\n\n    let length = result.length;\n    if (length >= targetLen) {\n        return result;\n    }\n\n\n    let fill = isNil(pad) ? '' : String(pad);\n    if (fill === '') {\n        fill = ' ';\n    }\n\n    let fillLen = targetLen - length;\n\n    while (fill.length < fillLen) {\n        fill += fill;\n    }\n\n    let truncated = fill.length > fillLen ? fill.substr(0, fillLen) : fill;\n\n    return isStart\n        ? truncated + result\n        : result + truncated;\n}\n\nfunction padStart(str, max, pad) {\n\n    return padStr(str, max, pad, true);\n}\n\nfunction padEnd(str, max, pad) {\n\n    return padStr(str, max, pad, false);\n}\n\n\n// exports\n// -------\n\nexport {\n    toLower,\n    toUpper,\n    ucFirst,\n    lcFirst,\n    trim,\n    split,\n    uuid,\n    format,\n    hashCode,\n    toString,\n    sanitizeText,\n    startWith,\n    endWith,\n    padStart,\n    padEnd\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/string.js\n **/","import { forEach }                     from './array';\nimport { isArray, isObject, isWindow } from './lang';\n\n\nfunction hasOwn(obj, key) {\n\n    return obj !== null && Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction keys(obj) {\n\n    return obj ? Object.keys(obj) : [];\n}\n\nfunction forIn(obj, iterator, context) {\n\n    forEach(keys(obj), function (key) {\n        iterator.call(context, obj[key], key);\n    });\n}\n\nfunction extend(target) {\n\n    if (!target) {\n        target = {};\n    }\n\n    for (let i = 1, l = arguments.length; i < l; i++) {\n        let source = arguments[i];\n\n        if (source) {\n\n            /* eslint guard-for-in: 0 */\n            for (let key in source) {\n                target[key] = source[key];\n            }\n        }\n    }\n\n    return target;\n}\n\nfunction merge(target) {\n\n    if (!target) {\n        target = {};\n    }\n\n    for (let i = 1, l = arguments.length; i < l; i++) {\n\n        let source = arguments[i];\n        if (source) {\n\n            /* eslint guard-for-in: 0 */\n            for (let name in source) {\n\n                let src         = target[name];\n                let copy        = source[name];\n                let copyIsArray = isArray(copy);\n\n                if (copyIsArray || isPlainObject(copy)) {\n\n                    let clone;\n                    if (copyIsArray) {\n                        clone = src && isArray(src) ? src : [];\n                    } else {\n                        clone = src && isPlainObject(src) ? src : {};\n                    }\n\n                    target[name] = merge(clone, copy);\n\n                } else {\n                    target[name] = copy;\n                }\n            }\n        }\n    }\n\n    return target;\n}\n\nfunction getByPath(obj, path, delimiter) {\n\n    delimiter = delimiter || '.';\n\n    let paths = path.split(delimiter);\n\n    while (paths.length) {\n\n        let key = paths.shift();\n\n        if (Object(obj) === obj && key in obj) {\n            obj = obj[key];\n        } else {\n            return undefined;\n        }\n    }\n\n    return obj;\n}\n\nfunction destroy(obj) {\n\n    if (obj) {\n        for (let prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                delete obj[prop];\n            }\n        }\n        if (obj) {\n\n            /* eslint no-proto: 0 */\n            obj.prototype = obj.__proto__ = null;\n        }\n        obj.destroyed = true;\n    }\n}\n\nfunction isPlainObject(obj) {\n\n    // Not plain objects:\n    //  - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n    //  - DOM nodes\n    //  - window\n    if (!isObject(obj) || obj.nodeType || isWindow(obj)) {\n        return false;\n    }\n\n    if (obj.constructor && !hasOwn(obj.constructor.prototype, 'isPrototypeOf')) {\n        return false;\n    }\n\n    // If the function hasn't returned already, we're confident that\n    // |obj| is a plain object, created by {} or constructed with new Object\n    return true;\n}\n\nfunction isEmptyObject(obj) {\n\n    /* eslint guard-for-in: 0 */\n    /* eslint no-unused-vars: 0 */\n    for (let key in obj) {\n        return false;\n    }\n\n    return true;\n}\n\n\n// exports\n// -------\n\nexport {\n    hasOwn,\n    keys,\n    forIn,\n    merge,\n    extend,\n    destroy,\n    getByPath,\n    isPlainObject,\n    isEmptyObject\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/object.js\n **/","import { isString, isNil } from './lang';\n\nfunction isFinite(value) {\n\n    return window.isFinite(value) && !window.isNaN(parseFloat(value));\n}\n\nfunction isPercentage(str) {\n\n    return isString(str) && str.slice(-1) === '%';\n}\n\nfunction toInt(value) {\n\n    return parseInt(value, 10);\n}\n\nfunction toFloat(value, percentage) {\n\n    let v = parseFloat(value);\n    return percentage ? v / 100 : v;\n}\n\nfunction toPercentage(value, precision = 2) {\n\n    return toFixed(value * 100, precision) + '%';\n}\n\nfunction toFixed(value, precision = 2) {\n\n    let power = Math.pow(10, precision);\n\n    return toFloat((Math.round(value * power) / power).toFixed(precision));\n}\n\nfunction fixNumber(num, percentage, defaultValue) {\n\n    let ret = toFloat(num, percentage);\n\n    return isNaN(ret) ? defaultValue : ret;\n}\n\nfunction fixIndex(index, max) {\n\n    if (isNil(index)) {\n        return max;\n    }\n\n    while (index < 0) {\n        index += max;\n    }\n\n    return Math.min(index, max);\n}\n\nfunction clamp(value, min, max) {\n\n    return min < max\n        ? (value < min ? min : value > max ? max : value)\n        : (value < max ? max : value > min ? min : value);\n}\n\nfunction isWithin(value, min, max) {\n\n    return min < max\n        ? (value >= min && value <= max)\n        : (value >= max && value <= min);\n}\n\n\n// exports\n// -------\n\nexport {\n    toInt,\n    toFloat,\n    toFixed,\n    toPercentage,\n\n    isFinite,\n    isPercentage,\n    isWithin,\n\n    fixIndex,\n    fixNumber,\n\n    clamp\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/number.js\n **/","import { isFunction } from './lang';\nimport { slice      } from './array';\n\n\nfunction invoke(fn, args, context) {\n\n    let ret;\n\n    if (isFunction(fn)) {\n\n        let len = args.length;\n        let a1  = args[0];\n        let a2  = args[1];\n        let a3  = args[2];\n\n        if (len === 0) {\n            ret = fn.call(context);\n        } else if (len === 1) {\n            ret = fn.call(context, a1);\n        } else if (len === 2) {\n            ret = fn.call(context, a1, a2);\n        } else if (len === 3) {\n            ret = fn.call(context, a1, a2, a3);\n        } else {\n            ret = fn.apply(context, args);\n        }\n    }\n\n    return ret;\n}\n\nfunction bind(fn /* [, context, arg1[,arg2[,argN]]] */) {\n\n    if (isFunction(fn)) {\n\n        let args = slice(arguments, 1);\n\n        return invoke(Function.prototype.bind, args, fn);\n    }\n\n    return fn;\n}\n\n\n// exports\n// -------\n\nexport {\n    bind,\n    invoke\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/function.js\n **/","import {\n    isNil,\n    isObject,\n    isString,\n    isWindow,\n    isBoolean,\n    isFunction,\n    isUndefined\n} from './lang';\n\nimport { forEach, reduce } from './array';\nimport { trim, split     } from './string';\nimport { forIn           } from './object';\n\n\n// classNames\n// ----------\n\nconst rclass       = /[\\t\\r\\n\\f]/g;\nconst rnotwhite    = (/\\S+/g);\nconst transformKey = (function () {\n\n    if (isUndefined(document)) {\n        return '';\n    }\n\n    const element    = createElement('div');\n    const transforms = ['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n\n    for (let i = 0; i < transforms.length; ++i) {\n\n        const key = transforms[i];\n\n        if (element.style[key] !== undefined) {\n            return key;\n        }\n    }\n})();\n\nfunction getClassName(elem) {\n\n    return elem.getAttribute && elem.getAttribute('class') || '';\n}\n\nfunction hasClass(node, selector) {\n\n    if (isNil(node) || isNil(selector)) {\n        return false;\n    }\n\n    let classNames = fillSpaces(getClassName(node));\n    let className  = fillSpaces(selector);\n\n    return node.nodeType === 1\n        ? classNames.replace(rclass, ' ').indexOf(className) > -1\n        : false;\n}\n\nfunction addClass(node, selector) {\n\n    if (isNil(node) || isNil(selector)) {\n        return;\n    }\n\n    if (isFunction(selector)) {\n        addClass(node, selector.call(node, getClassName(node)));\n        return;\n    }\n\n    if (isString(selector) && node.nodeType === 1) {\n\n        let classes  = selector.match(rnotwhite) || [];\n        let oldValue = fillSpaces(getClassName(node)).replace(rclass, ' ');\n        let newValue = reduce(classes, function (ret, cls) {\n\n            if (ret.indexOf(fillSpaces(cls)) < 0) {\n                ret += cls + ' ';\n            }\n\n            return ret;\n\n        }, oldValue);\n\n        newValue = trim(newValue);\n\n        if (oldValue !== newValue) {\n            node.setAttribute('class', newValue);\n        }\n    }\n}\n\nfunction removeClass(node, selector) {\n\n    if (isNil(node)) {\n        return;\n    }\n\n    if (isFunction(selector)) {\n        removeClass(node, selector.call(node, getClassName(node)));\n        return;\n    }\n\n    if ((!selector || isString(selector)) && node.nodeType === 1) {\n\n        let classes  = (selector || '').match(rnotwhite) || [];\n        let oldValue = fillSpaces(getClassName(node)).replace(rclass, ' ');\n        let newValue = reduce(classes, function (ret, cls) {\n\n            let className = fillSpaces(cls);\n\n            if (ret.indexOf(className) > -1) {\n                ret = ret.replace(className, ' ');\n            }\n\n            return ret;\n\n        }, oldValue);\n\n        newValue = selector ? trim(newValue) : '';\n\n        if (oldValue !== newValue) {\n            node.setAttribute('class', newValue);\n        }\n    }\n}\n\nfunction toggleClass(node, selector, stateVal) {\n\n    if (isNil(node) || isNil(selector)) {\n        return;\n    }\n\n    if (isBoolean(stateVal) && isString(selector)) {\n        stateVal\n            ? addClass(node, selector)\n            : removeClass(node, selector);\n\n        return;\n    }\n\n    if (isFunction(selector)) {\n        toggleClass(node, selector.call(node, getClassName(node), stateVal), stateVal);\n\n        return;\n    }\n\n    if (isString(selector)) {\n        forEach(selector.match(rnotwhite) || [], function (cls) {\n\n            hasClass(node, cls)\n                ? removeClass(node, cls)\n                : addClass(node, cls);\n\n        });\n    }\n}\n\nfunction fillSpaces(str) {\n    return ' ' + str + ' ';\n}\n\n\n// style\n// -----\n\nfunction styleStrToObject(styleStr) {\n\n    return reduce(split(styleStr, ';'), function (result, style) {\n\n        if (style) {\n            let pairs = split(style, '=');\n\n            result[trim(pairs[0])] = trim(pairs[1]);\n        }\n\n        return result;\n    }, {});\n\n}\n\nfunction setStyle(elem, name, value) {\n\n    if (elem) {\n\n        let pairs = {};\n\n        if (isObject(name)) {\n\n            pairs = name;\n\n        } else if (isString(name) && isUndefined(value)) {\n\n            pairs = styleStrToObject(name);\n\n        } else {\n\n            pairs[name] = value;\n        }\n\n        forIn(pairs, function (v, k) {\n            elem.style[k === 'transform' ? transformKey : k] = v;\n        });\n    }\n}\n\nfunction getComputedStyle(elem, name) {\n\n    // IE9+\n\n    let computed = elem.ownerDocument.defaultView.opener\n        ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n        : window.getComputedStyle(elem, null);\n\n    if (computed && name) {\n        return computed.getPropertyValue(name) || computed[name];\n    }\n\n    return computed;\n}\n\nfunction normalizeSides(box) {\n\n    if (Object(box) !== box) {\n\n        box = isNil(box) ? 0 : box;\n\n        return {\n            top: box,\n            right: box,\n            bottom: box,\n            left: box\n        };\n    }\n\n    return {\n        top: isNil(box.top) ? 0 : box.top,\n        right: isNil(box.right) ? 0 : box.right,\n        bottom: isNil(box.bottom) ? 0 : box.bottom,\n        left: isNil(box.left) ? 0 : box.left,\n    };\n}\n\n\n// elem\n// ----\n\nconst docElem         = document.documentElement;\nconst containsElement = docElem.compareDocumentPosition || docElem.contains ?\n    function (context, elem) {\n\n        let aDown = context.nodeType === 9 ? context.documentElement : context;\n        let bUp   = elem && elem.parentNode;\n\n        return context === bUp || !!(bUp && bUp.nodeType === 1 && (\n                aDown.contains\n                    ? aDown.contains(bUp)\n                    : context.compareDocumentPosition && context.compareDocumentPosition(bUp) & 16\n            ));\n    } :\n    function (context, elem) {\n\n        if (elem) {\n\n            /* eslint no-cond-assign: 0 */\n            while ((elem = elem.parentNode)) {\n                if (elem === context) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\nfunction createElement(tagName, doc) {\n\n    return (doc || document).createElement(tagName);\n}\n\nfunction removeElement(elem) {\n\n    if (elem && elem.parentNode) {\n        elem.parentNode.removeChild(elem);\n    }\n}\n\nfunction emptyElement(elem) {\n\n    if (elem) {\n        while (elem.firstChild) {\n            elem.removeChild(elem.firstChild);\n        }\n    }\n}\n\nfunction getNodeName(elem) {\n\n    return elem.nodeName ? elem.nodeName.toLowerCase() : '';\n}\n\nfunction isNode(elem, nodeName, attrName, attrValue) {\n\n    let ret = elem && !isNaN(elem.nodeType);\n\n    if (ret) {\n        ret = isNil(nodeName) || getNodeName(elem) === nodeName.toLowerCase();\n    }\n\n    if (ret) {\n        ret = isNil(attrName) || elem.getAttribute(attrName) === attrValue;\n    }\n\n    return ret;\n}\n\nfunction getWindow(elem) {\n\n    return isWindow(elem)\n        ? elem : elem.nodeType === 9\n        ? elem.defaultView || elem.parentWindow\n        : false;\n}\n\nfunction getOffset(elem) {\n\n    let box = {\n        top: 0,\n        left: 0\n    };\n\n    let doc = elem && elem.ownerDocument;\n\n    if (!doc) {\n        return box;\n    }\n\n    let docElement = doc.documentElement;\n\n    // Make sure it's not a disconnected DOM node\n    if (!containsElement(docElement, elem)) {\n        return box;\n    }\n\n    // If we don't have gBCR, just use 0,0 rather than error\n    // BlackBerry 5, iOS 3 (original iPhone)\n    if (elem.getBoundingClientRect) {\n        box = elem.getBoundingClientRect();\n    }\n\n    let win = getWindow(doc);\n\n    return {\n        top: box.top + (win.pageYOffset || docElement.scrollTop) - (docElement.clientTop || 0),\n        left: box.left + (win.pageXOffset || docElement.scrollLeft) - (docElement.clientLeft || 0)\n    };\n}\n\nfunction showHide(elem, show) {\n\n    if (elem && elem.style) {\n\n        let display = elem.style.display;\n\n        if (show) {\n            if (display === 'none') {\n\n                if (!isUndefined(elem.__display)) {\n                    display = elem.__display;\n                    delete elem.__display;\n                } else {\n                    display = '';\n                }\n\n                elem.style.display = display || '';\n            }\n        } else {\n            if (display !== 'none') {\n\n                if (display) {\n                    elem.__display = display;\n                }\n\n                elem.style.display = 'none';\n            }\n        }\n    }\n}\n\nfunction isHidden(elem) {\n\n    return elem && (elem.style.display === 'none' || !containsElement(elem.ownerDocument, elem));\n}\n\n// xml namespaces.\nconst ns = {\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xmlns: 'http://www.w3.org/2000/svg',\n    xlink: 'http://www.w3.org/1999/xlink'\n};\n// svg version.\nconst svgVersion = '1.1';\n\nfunction parseXML(str, async) {\n\n    let xml;\n\n    try {\n\n        let parser = new DOMParser();\n\n        if (!isUndefined(async)) {\n            parser.async = async;\n        }\n\n        xml = parser.parseFromString(str, 'text/xml');\n\n    } catch (error) {\n        xml = null;\n    }\n\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error('Invalid XML: ' + str);\n    }\n\n    return xml;\n}\n\nfunction createSvgDocument(content) {\n\n    // Create an SVG document element.\n    // If `content` is passed, it will be used as the SVG content of\n    // the `<svg>` root element.\n\n    let svg = '<svg xmlns=\"' + ns.xmlns + '\" xmlns:xlink=\"' + ns.xlink + '\" version=\"' + svgVersion + '\">' + (content || '') + '</svg>';\n    let xml = parseXML(svg, false);\n    return xml.documentElement;\n}\n\nfunction createSvgElement(tagName, doc) {\n\n    return (doc || document).createElementNS(ns.xmlns, tagName);\n}\n\n\n// attr\n// ----\n\nfunction setAttribute(elem, name, value) {\n\n    if (isNil(value)) {\n        return removeAttribute(elem, name);\n    }\n\n    if (name === 'id') {\n        elem.id = value;\n    } else {\n\n        let qualified = qualifyAttributeName(name);\n\n        qualified.ns\n            // attribute names can be namespaced. E.g. `image` elements\n            // have a `xlink:href` attribute to set the source of the image.\n            ? elem.setAttributeNS(qualified.ns, name, value)\n            : elem.setAttribute(name, value);\n    }\n}\n\nfunction removeAttribute(elem, name) {\n\n    let qualified = qualifyAttributeName(name);\n\n    if (qualified.ns) {\n        if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n            elem.removeAttributeNS(qualified.ns, qualified.local);\n        }\n    } else if (elem.hasAttribute(name)) {\n        elem.removeAttribute(name);\n    }\n}\n\nfunction qualifyAttributeName(name) {\n\n    if (name.indexOf(':') !== -1) {\n        let combined = name.split(':');\n        return {\n            ns: ns[combined[0]],\n            local: combined[1]\n        };\n    }\n\n    return {\n        ns: null,\n        local: name\n    };\n}\n\n\nfunction setScale(elem, sx, sy) {\n\n    if (elem) {\n        elem.style[transformKey] = 'scale(' + sx + ',' + sy + ')';\n    }\n}\n\nfunction setRotation(elem, angle, ox, oy) {\n\n    if (elem) {\n        elem.style[transformKey] = 'rotate(' + angle + ',' + ox + ',' + oy + ')';\n    }\n}\n\nfunction setTranslate(elem, tx, ty) {\n\n    if (elem) {\n\n        let translate = 'translateX(' + tx + 'px) translateY(' + ty + 'px)';\n\n        if (transformKey !== 'msTransform') {\n            // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n            // but IE9 doesn't support 3d transforms and will choke.\n            translate += ' translateZ(0)';\n        }\n\n        elem.style[transformKey] = translate;\n    }\n}\n\nfunction getTransformToElement(source, target) {\n\n    if (source.getTransformToElement) {\n        return source.getTransformToElement(target);\n    }\n\n    // chrome 48 removed svg getTransformToElement api\n\n    let matrix;\n    try {\n        matrix = target.getScreenCTM().inverse();\n    } catch (e) {\n        throw new Error('Can not inverse source element\\'s ctm.');\n    }\n\n    return matrix.multiply(source.getScreenCTM());\n}\n\nfunction getBounds(elem) {\n\n    let doc;\n\n    if (elem === document) {\n        doc  = document;\n        elem = document.documentElement;\n    } else {\n        doc = elem.ownerDocument;\n    }\n\n    const docEle = doc.documentElement;\n    const result = {};\n\n    // The original object returned by getBoundingClientRect is immutable,\n    // so we clone it.\n    // We can't use extend because the properties are not considered part\n    // of the object by hasOwnProperty in IE9.\n    // `getBoundingClientRect` returns transformed rect.\n    const rect = elem.getBoundingClientRect();\n\n    /* eslint-disable guard-for-in */\n    for (const k in rect) {\n        result[k] = rect[k];\n    }\n    /* eslint-enable guard-for-in */\n\n\n    if (isUndefined(result.width)) {\n        result.width = document.body.scrollWidth - result.left - result.right;\n    }\n    if (isUndefined(result.height)) {\n        result.height = document.body.scrollHeight - result.top - result.bottom;\n    }\n\n    result.top    = result.top - docEle.clientTop;\n    result.left   = result.left - docEle.clientLeft;\n    result.right  = doc.body.clientWidth - result.width - result.left;\n    result.bottom = doc.body.clientHeight - result.height - result.top;\n\n    return result;\n}\n\nfunction getScrollParent(elem) {\n\n    // In firefox if the el is inside an iframe with display: none;\n    // window.getComputedStyle() will return null;\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n\n    let computed = getComputedStyle(elem) || {};\n    let position = computed.position;\n\n    if (position === 'fixed') {\n        return elem;\n    }\n\n    let parent = elem;\n\n    while (parent = parent.parentNode) {\n        let style;\n\n        /* eslint-disable no-empty */\n        try {\n            style = getComputedStyle(parent);\n        } catch (err) { }\n        /* eslint-enable no-empty */\n\n\n        if (typeof style === 'undefined' || style === null) {\n            return parent;\n        }\n\n        let overflow  = style.overflow;\n        let overflowX = style.overflowX;\n        let overflowY = style.overflowY;\n\n        if (/(auto|scroll)/.test(overflow + overflowY + overflowX)) {\n            if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n                return parent;\n            }\n        }\n    }\n\n    return document.body;\n}\n\nfunction getScrollBarWidth() {\n\n    const inner = createElement('p');\n    const outer = createElement('div');\n\n    setStyle(inner, {\n        width: '100%',\n        height: '200px'\n    });\n\n    setStyle(outer, {\n        overflow: 'hidden',\n        visibility: 'hidden',\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        width: '200px',\n        height: '100px'\n    });\n\n    outer.appendChild(inner);\n    document.body.appendChild(outer);\n\n    let w1 = inner.offsetWidth;\n\n    outer.style.overflow = 'scroll';\n\n    let w2 = inner.offsetWidth;\n    if (w1 === w2) {\n        w2 = outer.clientWidth;\n    }\n\n    document.body.removeChild(outer);\n\n    return w1 - w2;\n}\n\n// exports\n// -------\n\nexport {\n    isNode,\n    showHide,\n    isHidden,\n    getWindow,\n    getOffset,\n    getNodeName,\n\n    createElement,\n    createSvgDocument,\n    createSvgElement,\n    emptyElement,\n    removeElement,\n    containsElement,\n\n    hasClass,\n    addClass,\n    removeClass,\n    toggleClass,\n    getClassName,\n\n    setAttribute,\n    removeAttribute,\n    qualifyAttributeName,\n\n    setScale,\n    setRotation,\n    setTranslate,\n\n    setStyle,\n    getBounds,\n    styleStrToObject,\n    normalizeSides,\n    getScrollParent,\n    getScrollBarWidth,\n    getComputedStyle,\n    getTransformToElement\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/dom.js\n **/","function toDeg(rad) {\n\n    return (180 * rad / Math.PI) % 360;\n}\n\nfunction toRad(deg, over360) {\n\n    deg = over360 ? deg : (deg % 360);\n\n    return deg * Math.PI / 180;\n}\n\nfunction snapToGrid(val, gridSize = 1, method = 'round') {\n\n    return Math[method](val / gridSize) * gridSize;\n}\n\nfunction normalizeAngle(angle) {\n\n    return (angle % 360) + (angle < 0 ? 360 : 0);\n}\n\n\n// exports\n// -------\n\nexport {\n    toDeg,\n    toRad,\n    snapToGrid,\n    normalizeAngle,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/geom.js\n **/","import { isFunction      } from '../utils/lang';\nimport { some            } from '../utils/array';\nimport { containsElement } from '../utils/dom';\nimport detector            from '../common/detector';\n\n\nconst WIN      = window;\nconst DOC      = window.document;\nconst IS_TOUCH = detector.IS_TOUCH;\n\nconst hooks = {\n    mouseenter: {\n        type: 'mouseover',\n        wrap: mouseEnterLeaveWrap\n    },\n    mouseleave: {\n        type: 'mouseout',\n        wrap: mouseEnterLeaveWrap\n    }\n};\n\nfunction mouseEnterLeaveWrap(elem, handler) {\n    return function (e) {\n        if (!isHover(e.delegateTarget || elem, e)) {\n            handler.call(this, e);\n        }\n    };\n}\n\nfunction isHover(elem, e) {\n\n    const target = e.type === 'mouseover'\n        ? e.relatedTarget || e.fromElement\n        : e.relatedTarget || e.toElement;\n\n    return containsElement(elem, target) || elem === target;\n}\n\nlet isMatchSelector = function () {\n\n    let testDiv         = DOC.createElement('div');\n    // match selector\n    let matchesSelector = testDiv.matches ||\n        testDiv.webkitMatchesSelector ||\n        testDiv.mozMatchesSelector ||\n        testDiv.msMatchesSelector ||\n        testDiv.oMatchesSelector;\n\n    let hasMatchesSelector = matchesSelector && matchesSelector.call(testDiv, 'div');\n\n    return function (elem, selector) {\n\n        if (hasMatchesSelector) {\n            return matchesSelector.call(elem, selector);\n        }\n\n        let parent = elem.parentNode;\n\n        // if the element is an orphan, and the browser doesn't support matching\n        // orphans, append it to a documentFragment\n        if (!parent && !hasMatchesSelector) {\n            parent = DOC.createDocumentFragment();\n            parent.appendChild(elem);\n        }\n\n        // from the parent element's context, get all nodes that match the selector\n        let nodes = parent.querySelectorAll(selector);\n\n        return some(nodes, function (node) {\n            return node === elem;\n        });\n    };\n}();\n\nfunction fixEvent(event) {\n\n    // add W3C standard event methods\n    event.preventDefault  = fixEvent.preventDefault;\n    event.stopPropagation = fixEvent.stopPropagation;\n\n    return event;\n}\n\nfixEvent.preventDefault = function () {\n\n    this.returnValue = false;\n};\n\nfixEvent.stopPropagation = function () {\n\n    this.cancelBubble = true;\n};\n\nfunction handleEvent(event) {\n\n    let result  = true;\n    let element = this;\n\n    // grab the event object (IE uses a global event object)\n    event = event || fixEvent((DOC.parentWindow || WIN).event);\n\n    // get a reference to the hash table of event handlers\n    let handlers = element.events[event.type];\n\n    // execute each event handler\n    for (let key in handlers) {\n\n        if (handlers.hasOwnProperty(key)) {\n\n            element.$$handleEvent = handlers[key];\n\n            if (element.$$handleEvent(event) === false) {\n                result = false;\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction addEvent(elem, type, handler) {\n\n    if (elem.addEventListener) {\n        elem.addEventListener(type, handler, false);\n    } else {\n\n        // assign each event handler a unique ID\n        if (!handler.$$guid) {\n            handler.$$guid = ++addEvent.guid;\n        }\n\n        // create a hash table of event types for the element\n        if (!elem.events) {\n            elem.events = {};\n        }\n\n        let fixedName = 'on' + type;\n\n        // create a hash table of event handlers for each element/event pair\n        let handlers = elem.events[type];\n        if (!handlers) {\n            handlers = elem.events[type] = {};\n            // store the existing event handler (if there is one)\n            if (elem[fixedName]) {\n                handlers[0] = elem[fixedName];\n            }\n        }\n        // store the event handler in the hash table\n        handlers[handler.$$guid] = handler;\n        // assign a global event handler to do all the work\n        elem[fixedName]          = handleEvent;\n    }\n}\n\naddEvent.guid = 0;\n\nfunction getDelegateTarget(elem, target, selector) {\n\n    while (target && target !== elem) {\n\n        if (isMatchSelector(target, selector)) {\n            return target;\n        }\n\n        target = target.parentElement;\n    }\n\n    return null;\n}\n\nfunction removeEventListener(elem, type, handler) {\n\n    let wrapper = handler._delegateWrapper;\n    let hook    = hooks[type];\n\n    type = hook ? hook.type : type;\n\n    if (elem.removeEventListener) {\n        elem.removeEventListener(type, handler, false);\n        wrapper && elem.removeEventListener(type, wrapper, false);\n    } else {\n        // delete the event handler from the hash table\n        if (elem.events && elem.events[type]) {\n            delete elem.events[type][handler.$$guid];\n\n            if (wrapper) {\n                delete elem.events[type][wrapper.$$guid];\n            }\n        }\n    }\n}\n\nfunction addEventListener(elem, type, selector, handler, once) {\n\n    let hook = hooks[type];\n\n    type = hook ? hook.type : type;\n\n    if (isFunction(selector)) {\n        return hook\n            ? addEvent(elem, type, hook.wrap(elem, selector))\n            : addEvent(elem, type, selector);\n    }\n\n    function wrapper(e) {\n\n        // if this event has a delegateTarget, then we add it to the event\n        // object (so that handlers may have a reference to the delegator\n        // element) and fire the callback\n        let delegateTarget = getDelegateTarget(elem, e.target, selector);\n        if (delegateTarget) {\n\n            e.delegateTarget = delegateTarget;\n\n            if (hook) {\n                handler = hook.wrap(elem, handler);\n            }\n\n            if (once === true) {\n                removeEventListener(elem, type, wrapper);\n            }\n\n            handler.call(elem, e);\n        }\n    }\n\n    handler._delegateWrapper = wrapper;\n    addEvent(elem, type, wrapper);\n\n    return handler;\n}\n\nfunction normalizeEvent(evt) {\n\n    let touchEvt = IS_TOUCH\n        && evt.originalEvent\n        && evt.originalEvent.changedTouches\n        && evt.originalEvent.changedTouches[0];\n\n    if (touchEvt) {\n        for (let property in evt) {\n            // copy all the properties from the input event that are not\n            // defined on the touch event (functions included).\n            if (touchEvt[property] === undefined) {\n                touchEvt[property] = evt[property];\n            }\n        }\n        return touchEvt;\n    }\n\n    return evt;\n}\n\nfunction isLeftMouseButton(evt) {\n\n    if (detector.IS_IE) {\n        return evt.button === 1;\n    }\n\n    return evt.button === 0;\n}\n\nfunction hasModifierKey(evt) {\n\n    return hasCtrlKey(evt) || hasMetaKey(evt) || hasShiftKey(evt);\n}\n\nfunction hasAltKey(evt) {\n\n    return evt.altKey;\n}\n\nfunction hasCtrlKey(evt) {\n\n    return evt.ctrlKey;\n}\n\nfunction hasShiftKey(evt) {\n\n    return evt.shiftKey;\n}\n\nfunction hasMetaKey(evt) {\n\n    return evt.metaKey;\n}\n\n\n// exports\n// -------\n\nexport {\n    normalizeEvent,\n    hasAltKey,\n    hasCtrlKey,\n    hasMetaKey,\n    hasShiftKey,\n    hasModifierKey,\n    isLeftMouseButton,\n    addEventListener,\n    removeEventListener\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/event.js\n **/","const ua = navigator.userAgent;\nconst av = navigator.appVersion;\n\n\n// exports\n// -------\n\nexport default {\n\n    // IE\n    IS_IE: ua.indexOf('MSIE') >= 0,\n\n    IS_IE11: !!ua.match(/Trident\\/7\\./),\n\n    // Netscape\n    IS_NS: ua.indexOf('Mozilla/') >= 0 && ua.indexOf('MSIE') < 0,\n\n    // Firefox\n    IS_FF: ua.indexOf('Firefox/') >= 0,\n\n    // Chrome\n    IS_GC: ua.indexOf('Chrome/') >= 0,\n\n    // Safari\n    IS_SF: ua.indexOf('AppleWebKit/') >= 0 && ua.indexOf('Chrome/') < 0,\n\n    // Opera\n    IS_OP: ua.indexOf('Opera/') >= 0,\n\n    // True if -o-transform is available as a CSS style. This is the case\n    // for Opera browsers that use Presto/2.5 and later.\n    IS_OT: ua.indexOf('Presto/2.4.') < 0\n    && ua.indexOf('Presto/2.3.') < 0\n    && ua.indexOf('Presto/2.2.') < 0\n    && ua.indexOf('Presto/2.1.') < 0\n    && ua.indexOf('Presto/2.0.') < 0\n    && ua.indexOf('Presto/1.') < 0,\n\n    // True if -moz-transform is available as a CSS style. This is the case\n    // for all Firefox-based browsers newer than or equal 3, such as Camino,\n    // Iceweasel, Seamonkey and Iceape.\n    IS_MT: (ua.indexOf('Firefox/') >= 0 && ua.indexOf('Firefox/1.') < 0 && ua.indexOf('Firefox/2.') < 0)\n    || (ua.indexOf('Iceweasel/') >= 0 && ua.indexOf('Iceweasel/1.') < 0 && ua.indexOf('Iceweasel/2.') < 0)\n    || (ua.indexOf('SeaMonkey/') >= 0 && ua.indexOf('SeaMonkey/1.') < 0)\n    || (ua.indexOf('Iceape/') >= 0 && ua.indexOf('Iceape/1.') < 0),\n\n    IS_IOS: !!ua.match(/(iPad|iPhone|iPod)/g),\n\n    IS_WIN: av.indexOf('Win') > 0,\n\n    IS_MAC: av.indexOf('Mac') > 0,\n\n    IS_TOUCH: 'ontouchstart' in document.documentElement,\n\n    IS_POINTER: window.navigator.msPointerEnabled || false,\n\n    SUPPORT_FOREIGN_OBJECT: (function () {\n\n        if (document.createElementNS) {\n\n            let toString = Object.prototype.toString;\n            let foreign = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\n\n            return /SVGForeignObject/.test(toString.call(foreign));\n        }\n\n        return false;\n    })()\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/detector.js\n **/","import { forEach } from './array';\n\nfunction lineToPathData(line) {\n    return [\n        'M', line.getAttribute('x1'), line.getAttribute('y1'),\n        'L', line.getAttribute('x2'), line.getAttribute('y2')\n    ].join(' ');\n}\n\nfunction polygonToPathData(polygon) {\n\n    let d = [];\n\n    forEach(polygon.points, function (p, i) {\n        d.push(i === 0 ? 'M' : 'L', p.x, p.y);\n    });\n\n    d.push('Z');\n\n    return d.join(' ');\n}\n\nfunction polylineToPathData(polyline) {\n\n    let d = [];\n\n    forEach(polyline.points, function (p, i) {\n        d.push(i === 0 ? 'M' : 'L', p.x, p.y);\n    });\n\n    return d.join(' ');\n}\n\nfunction rectToPathData(rect) {\n\n    let x = parseFloat(rect.getAttribute('x')) || 0;\n    let y = parseFloat(rect.getAttribute('y')) || 0;\n    let w = parseFloat(rect.getAttribute('width')) || 0;\n    let h = parseFloat(rect.getAttribute('height')) || 0;\n    let rx = parseFloat(rect.getAttribute('rx')) || 0;\n    let ry = parseFloat(rect.getAttribute('ry')) || 0;\n    let r = x + w;\n    let b = y + h;\n\n    let d;\n\n    if (!rx && !ry) {\n\n        d = [\n            'M', x, y,\n            'H', r,\n            'V', b,\n            'H', x,\n            'V', y,\n            'Z'\n        ];\n\n    } else {\n\n        d = [\n            'M', x + rx, y,\n            'L', r - rx, y,\n            'Q', r, y, r, y + ry,\n            'L', r, y + h - ry,\n            'Q', r, b, r - rx, b,\n            'L', x + rx, b,\n            'Q', x, b, x, b - rx,\n            'L', x, y + ry,\n            'Q', x, y, x + rx, y,\n            'Z'\n        ];\n    }\n    return d.join(' ');\n}\n\nlet KAPPA = 0.5522847498307935;\n\nfunction circleToPathData(circle) {\n\n    let cx = parseFloat(circle.getAttribute('cx')) || 0;\n    let cy = parseFloat(circle.getAttribute('cy')) || 0;\n    let r = parseFloat(circle.getAttribute('r'));\n    let cd = r * KAPPA; // Control distance.\n\n    return [\n        'M', cx, cy - r,    // Move to the first point.\n        'C', cx + cd, cy - r, cx + r, cy - cd, cx + r, cy, // I. Quadrant.\n        'C', cx + r, cy + cd, cx + cd, cy + r, cx, cy + r, // II. Quadrant.\n        'C', cx - cd, cy + r, cx - r, cy + cd, cx - r, cy, // III. Quadrant.\n        'C', cx - r, cy - cd, cx - cd, cy - r, cx, cy - r, // IV. Quadrant.\n        'Z'\n    ].join(' ');\n}\n\nfunction ellipseToPathData(ellipse) {\n\n    let cx = parseFloat(ellipse.getAttribute('cx')) || 0;\n    let cy = parseFloat(ellipse.getAttribute('cy')) || 0;\n    let rx = parseFloat(ellipse.getAttribute('rx'));\n    let ry = parseFloat(ellipse.getAttribute('ry')) || rx;\n    let cdx = rx * KAPPA; // Control distance x.\n    let cdy = ry * KAPPA; // Control distance y.\n\n    return [\n        'M', cx, cy - ry,    // Move to the first point.\n        'C', cx + cdx, cy - ry, cx + rx, cy - cdy, cx + rx, cy, // I. Quadrant.\n        'C', cx + rx, cy + cdy, cx + cdx, cy + ry, cx, cy + ry, // II. Quadrant.\n        'C', cx - cdx, cy + ry, cx - rx, cy + cdy, cx - rx, cy, // III. Quadrant.\n        'C', cx - rx, cy - cdy, cx - cdx, cy - ry, cx, cy - ry, // IV. Quadrant.\n        'Z'\n    ].join(' ');\n}\n\n\n// exports\n// -------\n\nexport {\n    lineToPathData,\n    rectToPathData,\n    circleToPathData,\n    ellipseToPathData,\n    polygonToPathData,\n    polylineToPathData,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/pathData.js\n **/","import { trim    } from './string';\nimport { toFloat } from './number';\n\n\nfunction parseTranslate(transform) {\n\n    let translate = { tx: 0, ty: 0 };\n\n    if (transform) {\n\n        let separator = /[ ,]+/;\n\n        let match = transform.match(/translate\\((.*)\\)/);\n        if (match) {\n            let arr = match[1].split(separator);\n\n            if (arr[0]) {\n                translate.tx += toFloat(arr[0]);\n            }\n\n            if (arr[1]) {\n                translate.ty += toFloat(arr[1]);\n            }\n        }\n    }\n\n    return translate;\n}\n\nfunction parseScale(transform) {\n\n    let scale = { sx: 1, sy: 1 };\n\n    if (transform) {\n\n        let separator = /[ ,]+/;\n\n        let match = transform.match(/scale\\((.*)\\)/);\n        if (match) {\n            let arr = match[1].split(separator);\n\n            if (arr[0]) {\n                scale.sx *= toFloat(arr[0]);\n            }\n\n            if (arr[1] || arr[0]) {\n                scale.sy *= toFloat(arr[1] || arr[0]);\n            }\n        }\n    }\n\n    return scale;\n}\n\nfunction parseRotate(transform) {\n\n    let rotate = { angle: 0 };\n\n    if (transform) {\n\n        let separator = /[ ,]+/;\n\n        let match = transform.match(/rotate\\((.*)\\)/);\n        if (match) {\n            let arr = match[1].split(separator);\n\n            if (arr[0]) {\n                rotate.angle += toFloat(arr[0]);\n            }\n\n            if (arr[1] && arr[2]) {\n                rotate.cx = toFloat(arr[1]);\n                rotate.cy = toFloat(arr[2]);\n            }\n        }\n    }\n\n    return rotate;\n}\n\nfunction parseTransform(transform) {\n\n    return {\n        translate: parseTranslate(transform),\n        rotate: parseRotate(transform),\n        scale: parseScale(transform)\n    };\n}\n\nfunction clearTranslate(transform) {\n\n    return transform && trim(transform.replace(/translate\\([^)]*\\)/g, '')) || '';\n}\n\nfunction clearScale(transform) {\n\n    return transform && trim(transform.replace(/scale\\([^)]*\\)/g, '')) || '';\n}\n\nfunction clearRotate(transform) {\n\n    return transform && trim(transform.replace(/rotate\\([^)]*\\)/g, '')) || '';\n}\n\n\n// exports\n// -------\n\nexport {\n    parseScale,\n    parseRotate,\n    parseTransform,\n    parseTranslate,\n    clearScale,\n    clearRotate,\n    clearTranslate\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/transform.js\n **/","import * as utils from '../common/utils';\n\nclass Point {\n\n    constructor(x = 0, y = 0) {\n        this.x = x;\n        this.y = y;\n    }\n\n\n    // statics\n    // -------\n\n    static equals(p1, p2) {\n\n        return this.isPoint(p1)\n            && this.isPoint(p2)\n            && p1.x === p2.x\n            && p1.y === p2.y;\n    }\n\n    static isPoint(p) {\n        return p && p instanceof Point;\n    }\n\n    static isPointLike(p) {\n\n        if (this.isPoint(p)) {\n            return true;\n        } else if (p) {\n            return utils.hasOwn(p, 'x') && utils.hasOwn(p, 'y');\n        }\n\n        return false;\n    }\n\n    static fromPoint(p) {\n\n        return new Point(p.x, p.y);\n    }\n\n    static fromPolar(r, angle, origin) {\n\n        origin = origin || new Point(0, 0);\n\n        let x = Math.abs(r * Math.cos(angle));\n        let y = Math.abs(r * Math.sin(angle));\n\n        let deg = utils.normalizeAngle(utils.toDeg(angle));\n\n        if (deg < 90) {\n            y = -y;\n        } else if (deg < 180) {\n            x = -x;\n            y = -y;\n        } else if (deg < 270) {\n            x = -x;\n        }\n\n        return new Point(origin.x + x, origin.y + y);\n    }\n\n    static fromString(str) {\n\n        let arr = str.split(str.indexOf('@') === -1 ? ' ' : '@');\n\n        return new Point(utils.toFloat(arr[0]), utils.toFloat(arr[1]));\n    }\n\n    static random(x1, x2, y1, y2) {\n\n        // Create a point with random coordinates that fall\n        // into the range `[x1, x2]` and `[y1, y2]`.\n\n        let x = Math.floor(Math.random() * (x2 - x1 + 1) + x1);\n        let y = Math.floor(Math.random() * (y2 - y1 + 1) + y1);\n\n        return new Point(x, y);\n    }\n\n\n    // methods\n    // -------\n\n    update(x = 0, y = 0) {\n\n        this.x = x;\n        this.y = y;\n\n        return this;\n    }\n\n    translate(dx = 0, dy = 0) {\n\n        this.x += dx;\n        this.y += dy;\n\n        return this;\n    }\n\n    rotate(origin, angle) {\n\n        // Rotate point by angle around origin `origin`.\n\n        angle = (angle + 360) % 360;\n\n        this.toPolar(origin);\n        this.y += utils.toRad(angle);\n\n        let p = Point.fromPolar(this.x, this.y, origin);\n\n        this.x = p.x;\n        this.y = p.y;\n\n        return this;\n    }\n\n    scale(sx, sy, origin) {\n\n        origin = origin || new Point(0, 0);\n\n        this.x = origin.x + sx * (this.x - origin.x);\n        this.y = origin.y + sy * (this.y - origin.y);\n\n        return this;\n    }\n\n    move(ref, distance) {\n\n        // Move point on the line from `ref` to me by `distance`.\n\n        let rad = utils.toRad(ref.theta(this));\n\n        return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n    }\n\n    reflect(ref) {\n\n        // Returns a point that is the reflection of me with\n        // the center of inversion in ref point.\n\n        return ref.move(this, this.distance(ref));\n    }\n\n    diff(point) {\n\n        return new Point(this.x - point.x, this.y - point.y);\n    }\n\n    round(precision) {\n\n        this.x = precision ? utils.toFixed(this.x, precision) : Math.round(this.x);\n        this.y = precision ? utils.toFixed(this.y, precision) : Math.round(this.y);\n\n        return this;\n    }\n\n    smooth() {\n\n        return this.round(2);\n    }\n\n    theta(point) {\n\n        // Compute the angle between me and `point` and the x axis.\n        // (cartesian-to-polar coordinates conversion)\n        // Return theta angle in degrees.\n\n        point = point || new Point();\n\n        // invert the y-axis.\n        let y = -(point.y - this.y);\n        let x = point.x - this.x;\n\n        let PRECISION = 10;\n        // Note that `atan2` is not defined for `x`, `y` both equal zero.\n        let rad = utils.toFixed(x, PRECISION) === 0 && utils.toFixed(y, PRECISION) === 0\n            ? 0\n            : Math.atan2(y, x);\n\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * Math.PI + rad;\n        }\n\n        return utils.toDeg(rad);\n    }\n\n    distance(point) {\n\n        // Returns distance between me and point `point`.\n\n        point = point || new Point();\n\n        let dx = point.x - this.x;\n        let dy = point.y - this.y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    manhattanDistance(point) {\n\n        // Returns a manhattan (taxi-cab) distance between me and point `p`.\n\n        point = point || new Point();\n\n        return Math.abs(point.x - this.x) + Math.abs(point.y - this.y);\n    }\n\n    toPolar(origin) {\n\n        // Converts rectangular to polar coordinates.\n        // An origin can be specified, otherwise it's `0 0`.\n\n        origin = origin || new Point(0, 0);\n\n        let dx = this.x - origin.x;\n        let dy = this.y - origin.y;\n\n        this.y = utils.toRad(origin.theta(Point.fromPoint(this)));\n        this.x = Math.sqrt(dx * dx + dy * dy);\n\n        return this;\n    }\n\n    normalize(len = 1) {\n\n        // Scale the line segment between (0,0)\n        // and me to have a length of len.\n\n        let x = this.x;\n        let y = this.y;\n\n        if (x === 0 && y === 0) {\n            return this;\n        }\n\n        let scale;\n\n        if (x === 0) {\n            scale = len / y;\n        } else if (y === 0) {\n            scale = len / x;\n        } else {\n            scale = len / this.distance(new Point());\n        }\n\n        this.x = scale * x;\n        this.y = scale * y;\n\n        return this;\n    }\n\n    changeInAngle(dx, dy, ref) {\n\n        // Returns change in angle from my previous position (-dx, -dy) to\n        // my new position relative to ref point.\n\n        // Revert the translation and measure the change in angle around x-axis.\n        return Point.fromPoint(this).translate(-dx, -dy).theta(ref) - this.theta(ref);\n    }\n\n    snapToGrid(gx, gy) {\n\n        this.x = utils.snapToGrid(this.x, gx);\n        this.y = utils.snapToGrid(this.y, gy || gx);\n\n        return this;\n    }\n\n    adhereToRect(rect) {\n\n        // If point lies outside rectangle `rect`, return the nearest point on\n        // the boundary of rect `rect`, otherwise return point itself.\n\n        if (rect.containsPoint(this)) {\n            return this;\n        }\n\n        this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n        this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n\n        return this;\n    }\n\n    magnitude() {\n\n        return Math.sqrt((this.x * this.x) + (this.y * this.y)) || 0.01;\n    }\n\n    // common\n    // ------\n\n    valueOf() {\n        return [this.x, this.y];\n    }\n\n    toString() {\n        return this.valueOf().join(', ');\n    }\n\n    equals(p) {\n        return Point.equals(this, p);\n    }\n\n    clone() {\n        return Point.fromPoint(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Point;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Point.js\n **/","import * as utils from '../common/utils';\nimport      Point from './Point';\n\n\nclass Line {\n\n    constructor(start, end) {\n\n        if (!start) {\n            throw new Error('The start point of line must be specified');\n        }\n\n        if (!end) {\n            throw new Error('The end point of line must be specified');\n        }\n\n        this.start = start;\n        this.end   = end;\n    }\n\n\n    // statics\n    // -------\n\n    static equals(line1, line2) {\n\n        return this.isLine(line1)\n            && this.isLine(line2)\n            && ((line1.start && line1.start.equals(line2.start)) || (!line1.start && !line2.start))\n            && ((line1.end && line1.end.equals(line2.end)) || (!line1.end && !line2.end));\n    }\n\n    static fromLine(line) {\n\n        return new Line(line.start.clone(), line.end.clone());\n    }\n\n    static isLine(line) {\n\n        return line && line instanceof Line;\n    }\n\n\n    // methods\n    // -------\n\n    getLength() {\n\n        return Math.sqrt(this.getSquaredLength());\n    }\n\n    getSquaredLength() {\n\n        // Return the line's length without sqrt.\n        // Note that for applications where the exact length\n        // is not necessary (e.g. compare only)\n\n        let dx = this.end.x - this.start.x;\n        let dy = this.end.y - this.end.x;\n\n        return dx * dx + dy * dy;\n    }\n\n    getMidpoint() {\n\n        let x = (this.start.x + this.end.x) / 2;\n        let y = (this.start.y + this.end.y) / 2;\n\n        return new Point(x, y);\n    }\n\n    getPointAt(percent) {\n\n        // get point at `percent` (0~1).\n\n        let x = (1 - percent) * this.start.x + percent * this.end.x;\n        let y = (1 - percent) * this.start.y + percent * this.end.y;\n\n        return new Point(x, y);\n    }\n\n    intersection(line) {\n\n        let start1 = this.start;\n        let end1   = this.end;\n\n        let start2 = line.start;\n        let end2   = line.end;\n\n        let point1 = new Point(end1.x - start1.x, end1.y - start1.y);\n        let point2 = new Point(end2.x - start2.x, end2.y - start2.y);\n\n        let det     = point1.x * point2.y - point1.y * point2.x;\n        let deltaPt = new Point(start2.x - start1.x, start2.y - start1.y);\n        let alpha   = deltaPt.x * point2.y - deltaPt.y * point2.x;\n        let beta    = deltaPt.x * point1.y - deltaPt.y * point1.x;\n\n        // no intersection found\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            return null;\n        }\n\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n        } else {\n            if (alpha < det || beta < det) {\n                return null;\n            }\n        }\n\n        return new Point(start1.x + (alpha * point1.x / det), start1.y + (alpha * point1.y / det));\n    }\n\n    getDirection() {\n\n        // get cardinal direction of the line.\n        // One of the following bearings : NE, E, SE, S, SW, W, NW, N.\n\n        let start = this.start;\n        let end   = this.end;\n\n        let lat1 = utils.toRad(start.y);\n        let lat2 = utils.toRad(end.y);\n        let lon1 = start.x;\n        let lon2 = end.x;\n        let dLon = utils.toRad(lon2 - lon1);\n\n        let y = Math.sin(dLon) * Math.cos(lat2);\n        let x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n\n        let bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n        let brng     = utils.toDeg(Math.atan2(y, x));\n        let index    = brng - 22.5;\n\n        if (index < 0) {\n            index += 360;\n        }\n\n        index = utils.toInt(index / 45);\n\n        return bearings[index];\n    }\n\n    getOffset(point) {\n\n        // get the offset of the `point` from the line.\n        // + if the `point` is on the right side of the line,\n        // - if on the left and `0` if on the line.\n\n        let start = this.start;\n        let end   = this.end;\n\n        // Find the sign of the determinant of vectors (start,end), where p is the query point.\n        return ((end.x - start.x) * (point.y - start.y) - (end.y - start.y) * (point.x - start.x)) / 2;\n    }\n\n\n    // common\n    // ------\n\n    valueOf() {\n\n        return [this.satrt.valueOf(), this.end.valueOf()];\n    }\n\n    toString() {\n\n        return this.start.toString() + ' ' + this.end.toString();\n    }\n\n    equals(line) {\n\n        return Line.equals(this, line);\n    }\n\n    clone() {\n\n        return Line.fromLine(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Line;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Line.js\n **/","import * as utils from '../common/utils';\nimport Terminal   from '../cells/Terminal';\n\n\n// private\n// -------\n\nfunction insertChild(child, index) {\n\n    let childCount = this.getChildCount();\n\n    index = utils.fixIndex(index, childCount);\n\n    if (child.parent === this && index === childCount) {\n        index--;\n    }\n\n    // update parent\n    child.removeFromParent({ silent: true });\n    child.parent = this;\n\n    if (this.children && this.children.length) {\n        this.children.splice(index, 0, child);\n    } else {\n        // speed up\n        this.children = [];\n        this.children.push(child);\n    }\n\n    return this;\n}\n\nfunction getModel(primary, backup) {\n\n    let model = primary && primary.getModel();\n\n    if (!model && backup && backup.getModel) {\n        model = backup.getModel();\n    }\n\n    return model;\n}\n\nfunction scheduleSetParent(scheduled) {\n\n    this.setParent.scheduled = scheduled;\n\n    return this;\n}\n\nfunction isSetParentScheduled() {\n\n    return this.setParent.scheduled === true;\n}\n\nfunction scheduleSetTerminal(scheduled) {\n\n    this.setTerminal.scheduled = scheduled;\n\n    return this;\n}\n\nfunction isSetTerminalScheduled() {\n\n    return this.setTerminal.scheduled === true;\n}\n\n\nclass Cell {\n\n    constructor(options) {\n\n        const metadata = utils.merge({}, this.constructor.defaults, options);\n\n        this.data     = metadata.data;\n        this.attrs    = metadata.attrs || {};\n        this.visible  = metadata.visible !== false;\n        this.metadata = metadata;\n    }\n\n\n    // static\n    // ------\n\n    static setDefaults(options) {\n\n        // update default options\n        this.defaults = utils.merge({}, this.defaults, options);\n    }\n\n\n    // link\n    // ----\n\n    isLink() {\n\n        return false;\n    }\n\n    getTerminal(isSource = true) {\n\n        return isSource ? this.source : this.target;\n    }\n\n    setTerminal(terminal, isSource = true, options = {}) {\n\n        scheduleSetTerminal.call(this, false);\n\n        if (!options.silent) {\n\n            let model = getModel(this, terminal);\n            if (model) {\n                // fully replace the previous terminal\n                model.setTerminal(this, terminal, isSource);\n                scheduleSetTerminal.call(this, true);\n            }\n        }\n\n        if (!isSetTerminalScheduled.call(this)) {\n\n            terminal = terminal ? new Terminal(terminal) : null;\n\n            if (isSource) {\n                this.source = terminal;\n\n                if (terminal) {\n                    this.sourceNode  = terminal.node;\n                    this.sourcePort  = terminal.port;\n                    this.sourcePoint = terminal.point;\n                } else {\n                    this.sourceNode  = null;\n                    this.sourcePort  = null;\n                    this.sourcePoint = null;\n                }\n\n            } else {\n                this.target = terminal;\n\n                if (terminal) {\n                    this.targetNode  = terminal.node;\n                    this.targetPort  = terminal.port;\n                    this.targetPoint = terminal.point;\n                } else {\n                    this.targetNode  = null;\n                    this.targetPort  = null;\n                    this.targetPoint = null;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    getTerminalNode(isSource = true) {\n\n        let node = isSource\n            ? this.sourceNode\n            : this.targetNode;\n\n        if (!node) {\n\n            let terminal = this.getTerminal(isSource);\n\n            node = terminal && terminal.node || null;\n        }\n\n        return node;\n    }\n\n    setTerminalNode(node, isSource = true, options = {}) {\n\n        scheduleSetTerminal.call(this, false);\n\n        if (!options.silent) {\n            let model = getModel(this, node);\n            if (model) {\n                model.setTerminalNode(this, node, isSource);\n                scheduleSetTerminal.call(this, true);\n            }\n        }\n\n        if (!isSetTerminalScheduled.call(this)) {\n\n            if (isSource) {\n                this.sourceNode = node;\n            } else {\n                this.targetNode = node;\n            }\n\n            let terminal = this.getTerminal(isSource);\n            if (terminal) {\n                terminal.node = node;\n            }\n        }\n\n        return this;\n    }\n\n    getTerminalPort(isSource = true) {\n\n        let port = isSource\n            ? this.sourcePort\n            : this.targetPort;\n\n        if (!port) {\n\n            let terminal = this.getTerminal(isSource);\n\n            port = terminal && terminal.port || null;\n        }\n\n        return port;\n    }\n\n    setTerminalPort(port, isSource = true, options = {}) {\n\n        // partial replace the terminal port\n\n        scheduleSetTerminal.call(this, false);\n\n        if (!options.silent) {\n            let model = getModel(this);\n            if (model) {\n                model.setTerminalPort(this, port, isSource);\n                scheduleSetTerminal.call(this, true);\n            }\n        }\n\n        if (!isSetTerminalScheduled.call(this)) {\n\n            if (isSource) {\n                this.sourcePort = port;\n            } else {\n                this.targetPort = port;\n            }\n\n            let terminal = this.getTerminal(isSource);\n            if (terminal) {\n                terminal.port = port;\n            }\n        }\n\n        return this;\n    }\n\n    getTerminalPoint(isSource = true) {\n\n        let point = isSource\n            ? this.sourcePoint\n            : this.targetPoint;\n\n        if (!point) {\n\n            let terminal = this.getTerminal(isSource);\n\n            point = terminal && terminal.point || null;\n        }\n\n        return point;\n    }\n\n    setTerminalPoint(point, isSource = true, options = {}) {\n\n        scheduleSetTerminal.call(this, false);\n\n        if (!options.silent) {\n            let model = getModel(this);\n            if (model) {\n                model.setTerminalPoint(this, point, isSource);\n                scheduleSetTerminal.call(this, true);\n            }\n        }\n\n        if (!isSetTerminalScheduled.call(this)) {\n\n            if (isSource) {\n                this.sourcePoint = point;\n            } else {\n                this.targetPoint = point;\n            }\n\n            let terminal = this.getTerminal(isSource);\n            if (terminal) {\n                terminal.point = point;\n            }\n        }\n\n        return this;\n    }\n\n    removeFromTerminal(isSource = true, options = {}) {\n\n        // remove link from terminal\n        let terminal = this.getTerminal(isSource);\n        if (terminal) {\n\n            scheduleSetTerminal.call(this, false);\n\n            if (!options.silent) {\n                let model = getModel(this, terminal);\n                if (model) {\n                    model.removeFromTerminal(this, isSource);\n                    scheduleSetTerminal.call(this, true);\n                }\n            }\n\n            if (!isSetTerminalScheduled.call(this)) {\n                terminal.removeLink(this, isSource, { silent: true });\n            }\n        }\n\n        return this;\n    }\n\n\n    // node\n    // ----\n\n    isNode() {\n\n        return false;\n    }\n\n    getLinkCount() {\n\n        return this.links ? this.links.length : 0;\n    }\n\n    indexOfLink(link) {\n\n        return utils.indexOf(this.links, link);\n    }\n\n    getLinkAt(index) {\n\n        return this.links ? this.links[index] : null;\n    }\n\n    eachLink(iterator, context) {\n\n        return utils.forEach(this.links, iterator, context);\n    }\n\n    filterLink(iterator, context) {\n\n        return utils.filter(this.links, iterator, context);\n    }\n\n    addLink(link, outgoing = true, options = {}) {\n\n        if (!link) {\n            return this;\n        }\n\n        scheduleSetTerminal.call(link, false);\n\n        if (!options.silent) {\n            let model = getModel(link, this);\n            if (model) {\n                // fully replace the previous terminal\n                model.setTerminal(link, this, outgoing);\n                scheduleSetTerminal.call(link, true);\n            }\n        }\n\n        if (!isSetTerminalScheduled.call(link)) {\n\n            link.removeFromTerminal(outgoing, { silent: true });\n\n            // when source and target are the same node, these's\n            // no need to relate link with node once more.\n            if (!this.links || this.indexOfLink(link) < 0\n                || link.getTerminalNode(!outgoing) !== this) {\n\n                if (!this.links) {\n                    this.links = [];\n                }\n\n                // links are unordered, push it to the array directly.\n                this.links.push(link);\n            }\n\n            link.setTerminal(this, outgoing, { silent: true });\n        }\n\n        return this;\n    }\n\n    removeLink(link, outgoing = true, options = {}) {\n\n        if (!link) {\n            return this;\n        }\n\n        scheduleSetTerminal.call(link, false);\n\n        if (!options.silent) {\n            let model = getModel(link, this);\n            if (model) {\n                // fully remove the previous terminal\n                model.setTerminal(link, null, outgoing);\n                scheduleSetTerminal.call(link, true);\n            }\n        }\n\n        if (!isSetTerminalScheduled.call(link)) {\n\n            // when the source and target are the same, do not remove it\n            if (this.links && link.getTerminalNode(!outgoing) !== this) {\n\n                let index = this.indexOfLink(link);\n                if (index >= 0) {\n                    this.links.splice(index, 1);\n                }\n            }\n\n            link.setTerminal(null, outgoing, { silent: true });\n        }\n\n        return this;\n    }\n\n\n    // children\n    // --------\n\n    getChildCount() {\n\n        return this.children ? this.children.length : 0;\n    }\n\n    indexOfChild(child) {\n\n        return utils.indexOf(this.children, child);\n    }\n\n    getChildAt(index) {\n\n        return this.children ? this.children[index] : null;\n    }\n\n    eachChild(iterator, context) {\n\n        return utils.forEach(this.children, iterator, context);\n    }\n\n    filterChild(iterator, context) {\n\n        return utils.filter(this.children, iterator, context);\n    }\n\n    insertChild(child, index, options = {}) {\n\n        if (!child) {\n            return this;\n        }\n\n        if (utils.isObject(index)) {\n            options = index;\n        }\n\n        scheduleSetParent.call(child, false);\n\n        if (!options.silent) {\n            child.setParent(this, index);\n        }\n\n        if (!isSetParentScheduled.call(child)) {\n            // if unscheduled, insert it directly\n            insertChild.call(this, child, index);\n        }\n\n        return this;\n    }\n\n    removeChild(child, options = {}) {\n\n        return this.removeChildAt(this.indexOfChild(child), options);\n    }\n\n    removeChildAt(index, options = {}) {\n\n        let child = this.getChildAt(index);\n        if (child) {\n\n            scheduleSetParent.call(child, false);\n\n            if (!options.silent) {\n                child.setParent(null);\n            }\n\n            if (!isSetParentScheduled.call(child)) {\n                this.children.splice(index, 1);\n                child.parent = null;\n            }\n        }\n\n        // return the removed child\n        return child;\n    }\n\n\n    // parent\n    // ------\n\n    getParent() {\n\n        return this.parent;\n    }\n\n    setParent(parent, index, options = {}) {\n\n        scheduleSetParent.call(this, false);\n\n        // try to schedule a change\n        if (!options.silent) {\n\n            // this cell maybe not in a model, try get parent's model\n            let model = getModel(this, parent);\n            // schedule a change\n            if (model) {\n                model.setParent(this, parent, index);\n                scheduleSetParent.call(this, true);\n            }\n        }\n\n        if (!isSetParentScheduled.call(this)) {\n            if (parent) {\n                insertChild.call(parent, this, index);\n            } else {\n                this.removeFromParent({ silent: true });\n            }\n        }\n\n        return this;\n    }\n\n    removeFromParent(options = {}) {\n\n        if (this.parent) {\n\n            let scheduled = false;\n\n            // try to schedule a change\n            if (!options.silent) {\n                let model = getModel(this, this.parent);\n                if (model) {\n                    model.removeCell(this);\n                    scheduled = true;\n                }\n            }\n\n            if (!scheduled) {\n                this.parent.removeChild(this, { silent: true });\n            }\n        }\n\n        return this;\n    }\n\n    isOrphan() {\n\n        return utils.isNil(this.parent);\n    }\n\n    isAncestor(descendant) {\n\n        if (!descendant) {\n            return false;\n        }\n\n        while (descendant && descendant !== this) {\n            descendant = descendant.parent;\n        }\n\n        return descendant === this;\n    }\n\n    contains(descendant) {\n\n        return this.isAncestor(this, descendant);\n    }\n\n    getAncestors() {\n\n        let result = [];\n        let parent = this.parent;\n\n        while (parent) {\n            result.push(parent);\n            parent = parent.parent;\n        }\n\n        return result;\n    }\n\n    getDescendants() {\n\n        let result = [];\n\n        this.eachChild(child => {\n            result.push(child);\n            result = result.concat(this.getDescendants(child));\n        }, this);\n\n        return result;\n    }\n\n\n    // geometry\n    // --------\n\n    getSize(raw) {\n\n        return raw ? this.metadata.size : this.size;\n    }\n\n    setSize(size, options = {}) {\n\n        let scheduled = false;\n\n        size = {\n            width: size.width,\n            height: size.height,\n            relative: size.relative === true\n        };\n\n        if (!options.silent) {\n            let model = this.getModel();\n            if (model) {\n                model.setSize(this, size);\n                scheduled = true;\n            }\n        }\n\n        if (!scheduled && this.metadata) {\n            this.metadata.size = size;\n        }\n\n        return this;\n\n    }\n\n    resize(width, height, options = {}) {\n\n        return this.setSize({ width, height }, options);\n    }\n\n    getPosition(raw) {\n\n        return raw ? this.metadata.position : this.position;\n    }\n\n    setPosition(position, options = {}) {\n\n        let scheduled = false;\n\n        position = {\n            x: position.x,\n            y: position.y,\n            relative: position.relative === true\n        };\n\n        if (!options.silent) {\n            let model = this.getModel();\n            if (model) {\n                model.setPosition(this, position);\n                scheduled = true;\n            }\n        }\n\n        if (!scheduled && this.metadata) {\n            this.metadata.position = position;\n        }\n\n        return this;\n    }\n\n    translate(x, y, options = {}) {\n\n        return this.setPosition({ x, y }, options);\n    }\n\n    getRotation(raw) {\n\n        return raw ? this.metadata.rotation : this.rotation;\n    }\n\n    setRotation(rotation, options = {}) {\n\n        let scheduled = false;\n\n        rotation = {\n            angle: rotation.angle,\n            relative: rotation.relative === true\n        };\n\n        if (!options.silent) {\n            let model = this.getModel();\n            if (model) {\n                model.setRotation(this, rotation);\n                scheduled = true;\n            }\n        }\n\n        if (!scheduled && this.metadata) {\n            this.metadata.rotation = rotation;\n        }\n\n        return this;\n    }\n\n    rotate(angle, options = {}) {\n\n        return this.setRotation({ angle }, options);\n    }\n\n    getGeometry(raw) {\n\n        return {\n            size: this.getSize(raw),\n            position: this.getPosition(raw),\n            rotation: this.getRotation(raw)\n        };\n    }\n\n    setGeometry(geom, options = {}) {\n\n        let scheduled = false;\n\n        if (!options.silent) {\n\n            let model = this.getModel();\n            if (model) {\n                model.setGeometry(this, geom);\n                scheduled = true;\n            }\n        }\n\n        if (!scheduled) {\n\n            utils.forEach(['size', 'position', 'rotation'], key => {\n\n                let val = geom[key];\n                if (val) {\n                    this['set' + utils.ucFirst(key)](val, { silent: true });\n                }\n\n            }, this);\n        }\n\n        return this;\n    }\n\n\n    // visible\n    // -------\n\n    isVisible() {\n\n        return this.visible !== false;\n    }\n\n    setVisible(visible, options = {}) {\n\n        let scheduled = false;\n\n        if (!options.silent) {\n\n            let model = getModel(this);\n            if (model) {\n                model.setVisible(this, visible);\n                scheduled = true;\n            }\n        }\n\n        if (!scheduled) {\n\n            this.visible = visible ? true : false;\n\n            this.metadata.visible = this.visible;\n        }\n\n        return this;\n    }\n\n    show(options = {}) {\n\n        this.setVisible(true, options);\n\n        return this;\n    }\n\n    hide(options = {}) {\n\n        this.setVisible(false, options);\n\n        return this;\n    }\n\n    toggle(options = {}) {\n\n        this.isVisible()\n            ? this.hide(options)\n            : this.show(options);\n\n        return this;\n    }\n\n\n    // attribute\n    // ---------\n\n    getAttribute() {\n\n        return this.metadata.attrs;\n    }\n\n    setAttribute(attrs, options = {}) {\n\n        let scheduled = false;\n\n        if (!options.silent) {\n\n            let model = this.getModel();\n            if (model) {\n                model.setAttribute(this, attrs);\n                scheduled = true;\n            }\n        }\n\n        if (!scheduled && this.metadata) {\n            this.metadata.attrs = utils.merge({}, this.getAttribute(), attrs);\n        }\n\n        return this;\n    }\n\n\n    // access\n    // ------\n\n    getId() {\n\n        return this.id;\n    }\n\n    setId(id) {\n\n        this.id = id;\n    }\n\n    getModel() {\n\n        return this.model;\n    }\n\n    setModel(model) {\n\n        this.model = model || null;\n\n        return this;\n    }\n\n    addTo(parent, index, model = this.getModel()) {\n\n        if (model) {\n            model.addCell(this, parent, index);\n        }\n\n        return this;\n    }\n\n    getView(paper) {\n\n        return paper.getView(this);\n    }\n\n    getClassName() {\n\n        let classNames = this.metadata.classNames;\n\n        return utils.isArray(classNames)\n            ? classNames.join(' ')\n            : classNames || '';\n    }\n\n    getTagName() {\n\n        return this.metadata.tagName || 'g';\n    }\n\n    getMarkup() {\n\n        return this.metadata.markup;\n    }\n\n\n    // lang\n    // ----\n\n    valueOf() {\n\n        return this.data;\n    }\n\n    toString() {\n\n        return this.getId() || Object.toString.call(this);\n    }\n\n    cloneData() {\n\n        let data = this.data;\n        if (data) {\n\n            if (data.clone && utils.isFunction(data.clone)) {\n                return data.clone();\n            }\n\n            if (utils.isNode(data)) {\n                return data.cloneNode(true);\n            }\n\n            if (utils.isObject(data)) {\n                return utils.merge({}, data);\n            }\n        }\n\n        return data;\n    }\n\n    clone(options, withData) {\n\n        let metadata = utils.merge({}, this.metadata, options);\n\n        metadata.data    = withData === true ? this.cloneData() : this.data;\n        metadata.visible = this.visible;\n\n        return new this.constructor(metadata);\n    }\n\n    destroy() {\n\n        this.eachChild(child => {\n            child.destroy();\n        });\n\n        this.eachLink(link => {\n            link.destroy();\n        });\n\n        this.removeFromTerminal(true)\n            .removeFromTerminal(false)\n            .removeFromParent();\n\n        utils.destroy(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Cell;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Cell.js\n **/","import * as utils from '../common/utils';\nimport Point from '../geometry/Point';\n\n\nfunction scheduleSetTerminal(scheduled) {\n\n    this.setTerminal.scheduled = scheduled;\n\n    return this;\n}\n\nfunction isSetTerminalScheduled() {\n\n    return this.setTerminal.scheduled === true;\n}\n\n\nclass Terminal {\n\n    constructor(terminal) {\n\n        if (terminal instanceof Terminal) {\n            return terminal;\n        }\n\n        if (terminal) {\n\n            if (terminal.isNode && terminal.isNode()) {\n\n                this.node = terminal;\n\n            } else if (Point.isPointLike(terminal)) {\n\n                this.point = Point.fromPoint(terminal);\n\n            } else if (utils.isObject(terminal)) {\n                this.node  = terminal.node;\n                this.port  = terminal.port;\n                this.point = Point.isPointLike(terminal.point)\n                    ? Point.fromPoint(terminal.point)\n                    : null;\n            }\n        }\n    }\n\n    addLink(link, isSource = true, options = {}) {\n\n        if (link) {\n\n            scheduleSetTerminal.call(link, false);\n\n            if (!options.silent) {\n                let model = link.getModel() || this.getModel();\n                if (model) {\n                    model.setTerminal(link, this, isSource);\n                    scheduleSetTerminal.call(link, true);\n                }\n            }\n\n            if (!isSetTerminalScheduled.call(link)) {\n\n                if (this.node) {\n                    this.node.addLink(link, isSource, { silent: true });\n                }\n\n                link.setTerminal(this, isSource, { silent: true });\n            }\n        }\n\n        return this;\n    }\n\n    removeLink(link, isSource = true, options = {}) {\n\n        if (link) {\n\n            scheduleSetTerminal.call(link, false);\n\n            if (!options.silent) {\n                let model = link.getModel() || this.getModel();\n                if (model) {\n                    model.setTerminal(link, null, isSource);\n                    scheduleSetTerminal.call(link, true);\n                }\n            }\n\n            if (!isSetTerminalScheduled.call(link)) {\n\n                if (this.node) {\n                    this.node.removeLink(link, isSource, { silent: true });\n                }\n\n                link.setTerminal(null, isSource, { silent: true });\n            }\n        }\n\n        return this;\n    }\n\n    duplicate(terminal) {\n\n        let cloned = new Terminal(terminal);\n\n        // copy the missing properties\n        utils.forEach(['node', 'port', 'point'], function (key) {\n            if (this[key] && !cloned[key]) {\n                cloned[key] = this[key];\n            }\n        }, this);\n\n        return cloned;\n    }\n\n    getModel() {\n\n        return this.node && this.node.getModel();\n    }\n}\n\n\n// exports\n// -------\n\nexport default Terminal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Terminal.js\n **/","import * as utils from '../../common/utils';\nimport Node       from '../../cells/Node';\n\n\nclass Path extends Node {\n\n    constructor(options) {\n\n        super(options);\n\n        this.parsePathData();\n    }\n\n    parsePathData() {\n\n        // parse path data\n\n        let pathData = this.getPathData() || '';\n        let operators = pathData.match(/([A-Za-z])/g);\n\n        pathData = pathData\n            .replace(/^[A-Za-z]/, '')\n            .replace(/[A-Za-z]$/, '');\n\n        let groups = utils.split(pathData, /[A-Za-z]/);\n\n        groups = utils.map(groups, function (group) {\n\n            group = utils.trim(group);\n\n            let xys = utils.split(group, /[\\s,]+/);\n            let points = [];\n\n            for (let i = 0, l = xys.length; i < l; i += 2) {\n                points.push({\n                    x: utils.toFloat(xys[i]),\n                    y: utils.toFloat(xys[i + 1])\n                });\n            }\n\n            return points;\n        });\n\n        let points = utils.reduce(groups, function (previous, group) {\n            return previous.concat(group);\n        }, []);\n\n        let minX = points[0].x;\n        let minY = points[0].y;\n        utils.forEach(points, function (point) {\n            minX = Math.min(point.x, minX);\n            minY = Math.min(point.y, minY);\n        });\n\n        let formatted = [];\n        utils.forEach(groups, function (group, index) {\n\n            if (operators[index]) {\n                formatted.push(operators[index]);\n            }\n\n            utils.forEach(group, function (point) {\n\n                let x = utils.toFixed(point.x - minX, 2);\n                let y = utils.toFixed(point.y - minY, 2);\n\n                formatted.push(x, y);\n            });\n        });\n\n        if (operators[groups.length]) {\n            formatted.push(operators[groups.length]);\n        }\n\n        let d = formatted.join(' ');\n        let attrs = this.metadata.attrs;\n\n        if (attrs.path) {\n            attrs.path.d = d;\n        } else {\n            attrs.path = {\n                d\n            };\n        }\n    }\n\n    getPathData() {\n\n        let metadata = this.metadata;\n        let attrs = metadata.attrs;\n        let pathAttr = attrs && attrs.path;\n        let pathData = pathAttr && pathAttr.d;\n\n        if (!pathData) {\n\n            let regPath = /<path(?:.+)d=([\"|'])(.*?)\\1/;\n            let markup = metadata.markup || '';\n            let match = markup.match(regPath);\n\n            if (match) {\n                pathData = match[2];\n            }\n        }\n\n        return pathData;\n    }\n}\n\nPath.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><path/></g><text/></g>',\n\n    size: {\n        width: 60,\n        height: 60\n    },\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'path': {\n            'fill': '#ffffff',\n            'stroke': '#000000'\n        },\n        'text': {\n            'font-size': 14,\n            'text': '',\n            'text-anchor': 'middle',\n            'ref': 'path',\n            'ref-x': .5,\n            'ref-dy': 10,\n            'fill': '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default Path;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Path.js\n **/","import Node from '../../cells/Node';\n\nclass Text extends Node {}\n\nText.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><text/></g></g>',\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'text': {\n            'font-size': 18,\n            'fill': '#000000'\n        }\n    }\n});\n\n\nexport default Text;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Text.js\n **/","import * as utils from '../../common/utils';\nimport     Portal from '../../cells/Portal';\n\n\nclass Ports extends Portal {\n\n    constructor(options) {\n\n        super(options);\n\n        this.updatePortsAttrs();\n    }\n\n    updatePortsAttrs() {\n\n        let attrs = {};\n\n        utils.forEach(this.inPorts, function (port, index) {\n            utils.merge(attrs, this.getPortAttrs(port, index, true));\n        }, this);\n\n        utils.forEach(this.outPorts, function (port, index) {\n            utils.merge(attrs, this.getPortAttrs(port, index, false));\n        }, this);\n\n        utils.merge(this.attrs, attrs);\n\n        return this;\n    }\n\n    // get the attrs for every port, so we can customize\n    // the port's position, color, etc\n    getPortAttrs(port, index, isInPort) {\n\n        let attrs = {};\n        let ports = isInPort ? this.inPorts : this.outPorts;\n\n        let rootSelector  = this.getPortSelector(port, isInPort);\n        let labelSelector = rootSelector + '>.port-label';\n\n        attrs[labelSelector] = { text: port.id };\n        attrs[rootSelector]  = {\n            'ref': '.node-body',\n            'ref-y': (index + 0.5) * (1 / ports.length)\n        };\n\n        if (!isInPort) {\n            attrs[rootSelector]['ref-dx'] = 0;\n        }\n\n        return attrs;\n    }\n\n    getPortSelector(port, isInPort) {\n\n        return this.getPortsWrapSelector(isInPort) + '>.pane-port[data-id=\"' + port.id + '\"]';\n    }\n\n    getPortsWrapSelector(isInPort) {\n\n        return '.pane-ports.' + (isInPort ? 'in' : 'out');\n    }\n}\n\n\nPorts.setDefaults({\n    size: {\n        width: 80,\n        height: 100\n    },\n\n    markup: '' +\n    '<g class=\"pane-rotatable\">' +\n    '  <g class=\"pane-scalable\">' +\n    '    <rect class=\"node-body\"/>' +\n    '  </g>' +\n    '  <text class=\"node-label\"/>' +\n    '  <g class=\"pane-ports in\" />' +\n    '  <g class=\"pane-ports out\" />' +\n    '</g>',\n\n    portMarkup: '' +\n    '<g class=\"pane-port\" data-id=\"${id}\">' +\n    '  <circle class=\"port-body\"/>' +\n    '  <text class=\"port-label\"/>' +\n    '</g>',\n\n    attrs: {\n        '.node-label': {\n            'text': 'port',\n            'ref-x': 0.5,\n            'ref-y': 0.5,\n            'y-alignment': 'middle',\n            'text-anchor': 'middle'\n        },\n        '.in .port-label': {\n            x: -15,\n            dy: 4\n        },\n        '.out .port-label': {\n            x: 15,\n            dy: 4\n        }\n    }\n});\n\n\n// exports\n// -------\n\nexport default Ports;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Ports.js\n **/","import * as utils from '../common/utils';\nimport Node       from '../cells/Node';\nimport PortalView from '../views/PortalView';\n\nclass Portal extends Node {\n\n    constructor(options) {\n\n        super(options);\n\n        this.portById = {};\n\n        this.inPorts  = utils.map(this.metadata.inPorts, function (port) {\n\n            let ret = this.standardizePort(port);\n\n            this.portById[ret.id] = ret;\n\n            return ret;\n\n        }, this);\n        this.outPorts = utils.map(this.metadata.outPorts, function (port) {\n\n            let ret = this.standardizePort(port);\n\n            this.portById[ret.id] = ret;\n\n            return ret;\n\n        }, this);\n    }\n\n    eachInPort(iterator, context) {\n\n        utils.forEach(this.inPorts, iterator, context);\n    }\n\n    eachOutPort(iterator, context) {\n\n        utils.forEach(this.outPorts, iterator, context);\n    }\n\n    getInPorts() {\n\n        return this.inPorts;\n    }\n\n    getOutPorts() {\n\n        return this.outPorts;\n    }\n\n    getPortById(id) {\n\n        return this.portById[id] || null;\n    }\n\n    isInPort(port) {\n\n        return utils.some(this.inPorts, function (item) {\n            return item.id === port.id;\n        });\n    }\n\n    isOutPort(port) {\n\n        return utils.some(this.outPorts, function (item) {\n            return item.id === port.id;\n        });\n    }\n\n    standardizePort(port) {\n\n        if (!utils.isObject(port)) {\n            port = { id: port };\n        }\n\n        if (!port.id) {\n            port.id = utils.uuid();\n        }\n\n        return port;\n    }\n\n    getPortMarkup() {\n\n        return this.metadata.portMarkup;\n    }\n}\n\n\nPortal.setDefaults({\n    portMarkup: '',\n    view: PortalView,\n\n    inPorts: [],\n    outPorts: []\n});\n\n\n// exports\n// -------\n\nexport default Portal;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Portal.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport    Ellipse from '../geometry/Ellipse';\nimport   NodeView from '../views/NodeView';\n\n\nclass PortalView extends NodeView {\n\n    renderMarkup() {\n\n        super.renderMarkup();\n        this.renderPorts();\n\n        return this;\n    }\n\n    renderPorts() {\n\n        let vel  = this.vel;\n        let cell = this.getCell();\n\n        let inPorts    = cell.getInPorts();\n        let outPorts   = cell.getOutPorts();\n        let portMarkup = cell.getPortMarkup();\n\n        let inPortWrap  = vel.findOne(cell.getPortsWrapSelector(true));\n        let outPortWrap = vel.findOne(cell.getPortsWrapSelector(false));\n\n        if (inPortWrap) {\n\n            inPortWrap.empty();\n\n            utils.forEach(inPorts, function (port) {\n                let html = this.compileMarkup(portMarkup, port);\n                inPortWrap.append(vector(html));\n            }, this);\n        }\n\n        if (outPortWrap) {\n\n            outPortWrap.empty();\n\n            utils.forEach(outPorts, function (port) {\n                let html = this.compileMarkup(portMarkup, port);\n                outPortWrap.append(vector(html));\n            }, this);\n        }\n\n\n        return this;\n    }\n\n    getConnectionPointOnPort() {\n\n        return null;\n    }\n\n    getPortBodyBBox(port) {\n\n        let node   = this.getCell();\n        let portId = utils.isObject(port) ? port.id : port;\n\n        port = node.getPortById(portId);\n\n        let selector = node.getPortSelector(port, node.isInPort(port));\n        if (selector) {\n            let vel  = this.findOne(selector);\n            let body = vel && vel.findOne('.port-body');\n            if (body) {\n                return body.getBBox();\n            }\n        }\n    }\n\n    getPortBodyGeom(port) {\n\n        let node   = this.getCell();\n        let portId = utils.isObject(port) ? port.id : port;\n\n        port = node.getPortById(portId);\n\n        let selector = node.getPortSelector(port, node.isInPort(port));\n        if (selector) {\n            let vel  = this.findOne(selector);\n            let body = vel && vel.findOne('.port-body');\n            let elem = body && body.node;\n\n            if (elem) {\n\n                let bbox   = body.getBBox(false, this.getPane());\n                let center = bbox.getCenter();\n\n                let result;\n\n                if (utils.isNode(elem, 'circle')) {\n                    let r = utils.getComputedStyle(elem, 'r');\n\n                    r = utils.toFloat(r);\n\n                    if (r) {\n                        result = new Ellipse(center.x, center.y, r, r);\n                    }\n                } else if (utils.isNode(elem, 'ellipse')) {\n                    let rx = utils.getComputedStyle(elem, 'rx');\n                    let ry = utils.getComputedStyle(elem, 'ry');\n\n                    rx = utils.toFloat(rx);\n                    ry = utils.toFloat(ry);\n\n                    if (rx && ry) {\n                        result = new Ellipse(center.x, center.y, rx, ry);\n                    }\n                } else {\n                    result = bbox;\n                }\n\n                return result;\n            }\n        }\n\n    }\n\n    findPortByElem(elem) {\n\n        let that  = this;\n        let vel   = that.vel;\n        let cell  = that.cell;\n        let vPort = vector(elem);\n\n        let className = 'pane-port';\n\n        if (!vPort.hasClass(className)) {\n            vPort = vPort.findParent(className, vel.node);\n        }\n\n        if (vPort) {\n\n            let vWrap = vPort.parent();\n            if (vWrap) {\n\n                let index = vPort.index();\n                let type  = vWrap.hasClass('in')\n                    ? 'in' : vWrap.hasClass('out')\n                    ? 'out' : '';\n                let ports = type === 'in'\n                    ? cell.inPorts : type === 'out'\n                    ? cell.outPorts\n                    : [];\n\n                let selector = cell.getPortSelector(type, index);\n                let result   = null;\n\n                utils.some(ports, function (port) {\n                    if (port.selector === selector) {\n                        result = port;\n                        return true;\n                    }\n                });\n\n                return result;\n            }\n        }\n\n        return null;\n    }\n}\n\n\n// exports\n// -------\n\nexport default PortalView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/PortalView.js\n **/","import * as utils from '../common/utils';\nimport       Rect from '../geometry/Rect';\nimport      Point from '../geometry/Point';\n\n\nlet pathCount = 0;\n\nfunction createPathId() {\n\n    let id;\n\n    do {\n        pathCount += 1;\n        id = 'pane-path-' + pathCount;\n    } while (document.getElementById(id));\n\n    return id;\n}\n\nfunction deltaTransformPoint(matrix, point) {\n\n    return {\n        x: point.x * matrix.a + point.y * matrix.c,\n        y: point.x * matrix.b + point.y * matrix.d\n    };\n}\n\nfunction decomposeMatrix(matrix) {\n\n    // @see https://gist.github.com/2052247\n\n    // calculate delta transform point\n    let px = deltaTransformPoint(matrix, {\n        x: 0,\n        y: 1\n    });\n    let py = deltaTransformPoint(matrix, {\n        x: 1,\n        y: 0\n    });\n\n    // calculate skew\n    let skewX = ((180 / Math.PI) * Math.atan2(px.y, px.x) - 90);\n    let skewY = ((180 / Math.PI) * Math.atan2(py.y, py.x));\n\n    return {\n        skewX,\n        skewY,\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        rotation: skewX // rotation is the same as skew x\n    };\n}\n\nexport class VElement {\n\n    constructor(elem) {\n\n        if (!(this instanceof VElement)) {\n            return new VElement(elem);\n        }\n\n        if (elem instanceof VElement) {\n            elem = elem.node;\n        }\n\n        if (!elem) {\n            throw new Error('Unknown elem for VElement');\n        }\n\n        this.node = elem;\n    }\n\n    attr(name, value) {\n\n        if (utils.isUndefined(name)) {\n            // return all attributes.\n            return utils.reduce(this.node.attributes, function (result, attr) {\n                result[attr.nodeName] = attr.nodeValue;\n                return result;\n            }, {});\n        }\n\n        if (utils.isString(name) && utils.isUndefined(value)) {\n            return this.node.getAttribute(name);\n        }\n\n        if (utils.isObject(name)) {\n            this.setAttrs(name);\n        } else {\n            this.setAttr(name, value);\n        }\n\n        return this;\n    }\n\n    setAttr(name, value) {\n\n        if (utils.isNil(value)) {\n            this.removeAttr(name);\n        } else {\n            utils.setAttribute(this.node, name, value);\n        }\n\n        return this;\n    }\n\n    setAttrs(attrs) {\n\n        utils.forIn(attrs, function (value, name) {\n            this.setAttr(name, value);\n        }, this);\n\n        return this;\n    }\n\n    removeAttr(name) {\n\n        utils.removeAttribute(this.node, name);\n\n        return this;\n    }\n\n    show() {\n\n        utils.showHide(this.node, true);\n\n        return this;\n    }\n\n    hide() {\n\n        utils.showHide(this.node, false);\n\n        return this;\n    }\n\n    toggle(state) {\n\n        if (utils.isBoolean(state)) {\n            return state ? this.show() : this.hide();\n        }\n\n        if (utils.isHidden(this.node)) {\n            this.show();\n        } else {\n            this.hide();\n        }\n\n        return this;\n    }\n\n    getClassName() {\n\n        return utils.getClassName(this.node);\n    }\n\n    hasClass(selector) {\n\n        return utils.hasClass(this.node, selector);\n    }\n\n    addClass(selector) {\n\n        utils.addClass(this.node, selector);\n\n        return this;\n    }\n\n    removeClass(selector) {\n\n        utils.removeClass(this.node, selector);\n\n        return this;\n    }\n\n    toggleClass(selector, stateVal) {\n\n        utils.toggleClass(this.node, selector, stateVal);\n\n        return this;\n    }\n\n    css(name, value) {\n\n        if (!name) {\n            return this.node.style;\n        }\n\n        utils.setStyle(this.node, name, value);\n\n        return this;\n    }\n\n    text(content, options) {\n\n        // replace all spaces with the Unicode No-break space\n        // (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n        // IE would otherwise collapse all spaces into one.\n        content = utils.sanitizeText(content);\n        options = options || {};\n\n        // `alignment-baseline` does not work in Firefox.\n        // Setting `dominant-baseline` on the `<text>` element doesn't work in IE9.\n        // In order to have the 0,0 coordinate of the `<text>` element (or the first `<tspan>`)\n        // in the top left corner we translate the `<text>` element by `0.8em`.\n        // See `http://www.w3.org/Graphics/SVG/WG/wiki/How_to_determine_dominant_baseline`.\n        // See also `http://apike.ca/prog_svg_text_style.html`.\n        let y = this.attr('y');\n        if (!y) {\n            this.attr('y', '0.8em');\n        }\n\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers we rather\n        // hide the text element when it's empty.\n        this.attr('display', content ? null : 'none');\n\n        // Preserve spaces. In other words, we do not want consecutive spaces to get collapsed to one.\n        this.attr('xml:space', 'preserve');\n\n        // Easy way to erase all `<tspan>` children;\n        this.node.textContent = '';\n\n\n        let textNode        = this.node;\n        let textPathOptions = options.textPath;\n        if (textPathOptions) {\n\n            // Wrap the text in the SVG <textPath> element that points to a path\n            // defined by `options.textPath` inside the internal `<defs>` element.\n            let defs = this.find('defs');\n            if (!defs.length) {\n                defs = createVElement('defs');\n                this.append(defs);\n            }\n\n            // If `opt.textPath` is a plain string, consider it to be directly\n            // the SVG path data for the text to go along (this is a shortcut).\n            // Otherwise if it is an object and contains the `d` property,\n            // then this is our path.\n            let isTextPathObject = Object(textPathOptions) === textPathOptions;\n            // d attr\n            let d = isTextPathObject ? textPathOptions.d : textPathOptions;\n\n            let vPath;\n\n            if (d) {\n\n                vPath = createVElement('path', {\n                    d,\n                    id: createPathId()\n                });\n\n                defs.append(vPath);\n            }\n\n            let vTextPath = createVElement('textPath');\n\n            // Set attributes on the `<textPath>`. The most important one\n            // is the `xlink:href` that points to our newly created `<path/>` element in `<defs/>`.\n            // Note that we also allow the following construct:\n            // `t.text('my text', {textPath: {'xlink:href': '#my-other-path'}})`.\n            // In other words, one can completely skip the auto-creation of the path\n            // and use any other arbitrary path that is in the document.\n            if (!textPathOptions['xlink:href'] && vPath) {\n                vTextPath.attr('xlink:href', '#' + vPath.node.id);\n            }\n\n            if (isTextPathObject) {\n                vTextPath.attr(textPathOptions);\n            }\n\n            this.append(vTextPath);\n\n            // Now all the `<tspan>`s will be inside the `<textPath>`.\n            textNode = vTextPath.node;\n        }\n\n\n        let offset      = 0;\n        let lines       = content.split('\\n');\n        let lineHeight  = options.lineHeight;\n        let annotations = options.annotations;\n\n        let includeAnnotationIndices = options.includeAnnotationIndices;\n\n        if (annotations) {\n            annotations = utils.isArray(annotations) ? annotations : [annotations];\n        }\n\n        lineHeight = lineHeight === 'auto' ? '1.5em' : lineHeight || '1em';\n\n\n        utils.forEach(lines, function (line, i) {\n\n            let vLine = createVElement('tspan', {\n                dy: i ? lineHeight : '0',\n                x: this.attr('x') || 0\n            });\n\n            vLine.addClass('pane-text-line');\n\n            if (line) {\n\n                if (annotations) {\n                    // Get the line height based on the biggest font size\n                    // in the annotations for this line.\n                    let maxFontSize = 0;\n\n                    // Find the *compacted* annotations for this line.\n                    let lineAnnotations = vector.annotateString(line, annotations, {\n                        offset: -offset,\n                        includeAnnotationIndices\n                    });\n\n                    utils.forEach(lineAnnotations, function (annotation) {\n\n                        let tspan;\n\n                        if (utils.isObject(annotation)) {\n\n                            let fontSize = utils.toInt(annotation.attrs['font-size']);\n                            if (fontSize && fontSize > maxFontSize) {\n                                maxFontSize = fontSize;\n                            }\n\n                            tspan = createVElement('tspan', annotation.attrs);\n                            if (includeAnnotationIndices) {\n                                // If `includeAnnotationIndices` is `true`,\n                                // set the list of indices of all the applied annotations\n                                // in the `annotations` attribute. This list is a comma\n                                // separated list of indices.\n                                tspan.attr('annotations', annotation.annotations);\n                            }\n\n                            if (annotation.attrs.class) {\n                                tspan.addClass(annotation.attrs.class);\n                            }\n\n                            tspan.node.textContent = annotation.t;\n\n                        } else {\n                            tspan = document.createTextNode(annotation || ' ');\n                        }\n\n                        vLine.append(tspan);\n                    });\n\n                    if (options.lineHeight === 'auto' && maxFontSize && i !== 0) {\n                        vLine.attr('dy', (maxFontSize * 1.2) + 'px');\n                    }\n\n                } else {\n                    vLine.node.textContent = line;\n                }\n\n            } else {\n\n                // Make sure the textContent is never empty.\n                // If it is, add a dummy character and make it invisible,\n                // making the following lines correctly relatively positioned.\n                // `dy=1em` won't work with empty lines otherwise.\n                vLine.addClass('pane-text-empty');\n                vLine.node.style.opacity = 0;\n                vLine.node.textContent   = '-';\n            }\n\n            textNode.appendChild(vLine.node);\n\n            offset += line.length + 1;      // + 1 = newline character.\n\n        }, this);\n\n        return this;\n    }\n\n    html(content) {\n\n        this.node.innerHTML = content;\n\n        return this;\n    }\n\n    remove() {\n\n        utils.removeElement(this.node);\n\n        return this;\n    }\n\n    empty() {\n\n        utils.emptyElement(this.node);\n\n        return this;\n    }\n\n    append(elem) {\n        eachElem(elem, function (item) {\n            this.node.appendChild(normalize(item));\n        }, this);\n\n        return this;\n    }\n\n    prepend(elem) {\n        eachElem(elem, function (item) {\n            this.node.insertBefore(normalize(item), this.node.firstChild);\n        }, this);\n\n        return this;\n    }\n\n    before(elem) {\n        eachElem(elem, function (item) {\n            if (this.node.parentNode) {\n                this.node.parentNode.insertBefore(normalize(item), this.node);\n            }\n        }, this);\n\n        return this;\n    }\n\n    after(elem) {\n        eachElem(elem, function (item) {\n            if (this.node.parentNode) {\n                this.node.parentNode.insertBefore(normalize(item), this.node.nextSibling);\n            }\n        }, this);\n\n        return this;\n    }\n\n    appendTo(elem) {\n\n        getLastVElement(elem).append(this);\n\n        return this;\n    }\n\n    prependTo(elem) {\n\n        getLastVElement(elem).prepend(this);\n\n        return this;\n    }\n\n    insertBefore(elem) {\n\n        getLastVElement(elem).before(this);\n\n        return this;\n    }\n\n    insertAfter(elem) {\n\n        getLastVElement(elem).after(this);\n\n        return this;\n    }\n\n    getSVG() {\n\n        return this.node instanceof window.SVGSVGElement\n            ? this\n            : vectorize(this.node.ownerSVGElement);\n    }\n\n    getDefs() {\n\n        let svg  = this.getSVG();\n        let defs = svg.node.getElementsByTagName('defs');\n\n        if (defs && defs.length) {\n            defs = vectorize(defs[0]);\n        } else {\n            defs = createVElement('defs');\n            svg.append(defs);\n        }\n\n        return defs;\n    }\n\n    clone() {\n\n        let cloned = vectorize(this.node.cloneNode(true));\n\n        if (this.node.id) {\n            cloned.node.removeAttribute('id');\n        }\n\n        return cloned;\n    }\n\n    find(selector) {\n\n        return utils.map(this.node.querySelectorAll(selector), vectorize);\n    }\n\n    findOne(selector) {\n\n        let found = this.node.querySelector(selector);\n        return found ? vectorize(found) : null;\n    }\n\n    findParent(className, terminator) {\n\n        let stop = terminator || this.node.ownerSVGElement;\n        let node = this.node.parentNode;\n\n        while (node && node !== stop) {\n            let vel = vectorize(node);\n            if (vel.hasClass(className)) {\n                return vel;\n            }\n\n            node = node.parentNode;\n        }\n\n        return null;\n    }\n\n    parent() {\n\n        let parentNode = this.node && this.node.parentNode;\n        if (parentNode) {\n            return vectorize(parentNode);\n        }\n\n        return null;\n    }\n\n    index() {\n\n        let idx  = 0;\n        let node = this.node.previousSibling;\n\n        while (node) {\n            // nodeType 1 for ELEMENT_NODE\n            if (node.nodeType === 1) {\n                idx++;\n            }\n            node = node.previousSibling;\n        }\n\n        return idx;\n    }\n\n    translate(tx, ty, relative) {\n\n        let raw = this.attr('transform') || '';\n        let ts  = utils.parseTranslate(raw);\n\n        if (utils.isUndefined(tx)) {\n            return ts;\n        }\n\n        tx = relative ? ts.tx + tx : tx;\n        ty = relative ? ts.ty + ty : ty;\n\n        let mutant = utils.clearTranslate(raw);\n        let final  = 'translate(' + tx + ',' + ty + ')';\n\n        // Note that `translate()` is always the first transformation.\n        // This is usually the desired case.\n        if (mutant) {\n            final = final + ' ' + mutant;\n        }\n\n        this.attr('transform', final);\n\n        return this;\n    }\n\n    rotate(angle, cx, cy, relative) {\n\n        let raw = this.attr('transform') || '';\n        let rt  = utils.parseRotate(raw);\n\n        if (utils.isUndefined(angle)) {\n            return rt;\n        }\n\n        angle %= 360;\n\n        let newAngle  = relative ? rt.angle + angle : angle;\n        let newOrigin = utils.isUndefined(cx) || utils.isUndefined(cy) ? '' : ',' + cx + ',' + cy;\n\n        let mutant = utils.clearRotate(raw);\n        let final  = 'rotate(' + newAngle + newOrigin + ')';\n\n        if (mutant) {\n            final = mutant + ' ' + final;\n        }\n\n        return this.attr('transform', final);\n    }\n\n    scale(sx, sy, relative) {\n\n        let raw = this.attr('transform') || '';\n        let sc  = utils.parseScale(raw);\n\n        if (utils.isUndefined(sx)) {\n            return sc;\n        }\n\n        if (utils.isUndefined(sy)) {\n            sy = sx;\n        }\n\n\n        sx = relative ? sc.sx * sx : sx;\n        sy = relative ? sc.sy * sy : sy;\n\n        let mutant = utils.clearScale(raw);\n        let final  = 'scale(' + sx + ',' + sy + ')';\n\n        if (mutant) {\n            final = mutant + ' ' + final;\n        }\n\n        return this.attr('transform', final);\n    }\n\n    getBBox(withoutTransformations, target) {\n\n        // Get SVGRect that contains coordinates and dimension of the real\n        // bounding box, i.e. after transformations are applied.\n        // If `target` is specified, bounding box will be computed\n        // relatively to `target` element.\n\n        // If the element is not in the live DOM, it does not have a bounding\n        // box defined and so fall back to 'zero' dimension element.\n        if (!this.node.ownerSVGElement) {\n            return new Rect(0, 0, 0, 0);\n        }\n\n        let box;\n        try {\n            box = this.node.getBBox();\n            // We are creating a new object as the standard says that\n            // you can't modify the attributes of a bbox.\n            box = {\n                x: box.x,\n                y: box.y,\n                width: box.width,\n                height: box.height\n            };\n        } catch (e) {\n            // fallback for IE\n            box = {\n                x: this.node.clientLeft,\n                y: this.node.clientTop,\n                width: this.node.clientWidth,\n                height: this.node.clientHeight\n            };\n        }\n\n        if (!withoutTransformations) {\n\n            let matrix = this.getTransformToElement(target || this.node.ownerSVGElement);\n\n            box = vector.transformRect(box, matrix);\n        }\n\n        return Rect.fromRect(box);\n    }\n\n    toLocalPoint(x, y) {\n\n        // Convert global point into the coordinate space of this element.\n        let svg   = this.getSVG().node;\n        let point = svg.createSVGPoint();\n\n        point.x = x;\n        point.y = y;\n\n        try {\n            // ref: https://msdn.microsoft.com/zh-cn/library/hh535760(v=vs.85).aspx\n            let globalPoint         = point.matrixTransform(svg.getScreenCTM().inverse());\n            let globalToLocalMatrix = this.getTransformToElement(svg).inverse();\n            return globalPoint.matrixTransform(globalToLocalMatrix);\n\n        } catch (e) {\n            // IE9 throws an exception in odd cases.\n            // (`Unexpected call to method or property access`)\n            // We have to make do with the original coordianates.\n            return point;\n        }\n    }\n\n    getTransformToElement(toElem) {\n\n        return utils.getTransformToElement(this.node, toElem);\n    }\n\n    translateCenterToPoint(point) {\n\n        let bbox   = this.getBBox();\n        let center = bbox.getCenter();\n\n        this.translate(point.x - center.x, point.y - center.y);\n\n        return this;\n    }\n\n    translateAndAutoOrient(position, reference, target) {\n\n        // Efficiently auto-orient an element.\n        // This basically implements the orient=auto attribute of markers.\n        // The easiest way of understanding on what this does is to imagine\n        // the element is an arrowhead. Calling this method on the arrowhead\n        // makes it point to the `position` point while being auto-oriented\n        // (properly rotated) towards the `reference` point. `target` is the\n        // element relative to which the transformations are applied. Usually\n        // a viewport.\n\n\n        // Clean-up previously set transformations except the scale. If we\n        // didn't clean up the previous transformations then they'd add up\n        // with the old ones. Scale is an exception as it doesn't add up,\n        // consider: `this.scale(2).scale(2).scale(2)`. The result is that the\n        // element is scaled by the factor 2, not 8.\n\n        let scale = this.scale();\n        this.attr('transform', '');\n        this.scale(scale.sx, scale.sy);\n\n        let svg  = this.getSVG().node;\n        let bbox = this.getBBox(false, target);\n\n        // 1. Translate to origin.\n        let translateToOrigin = svg.createSVGTransform();\n        translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n\n\n        // 2. Rotate around origin.\n        let rotateAroundOrigin = svg.createSVGTransform();\n\n        let angle = Point\n            .fromPoint(position)\n            .changeInAngle(position.x - reference.x, position.y - reference.y, reference);\n        rotateAroundOrigin.setRotate(angle, 0, 0);\n\n\n        // 3. Translate to the `position` + the offset (half my width) towards the `reference` point.\n        let translateFinal = svg.createSVGTransform();\n        let finalPosition  = Point.fromPoint(position).move(reference, bbox.width / 2);\n        translateFinal.setTranslate(position.x + (position.x - finalPosition.x), position.y + (position.y - finalPosition.y));\n\n\n        // 4. Apply transformations.\n        let matrix    = this.getTransformToElement(target);\n        let transform = svg.createSVGTransform();\n        transform.setMatrix(\n            translateFinal.matrix.multiply(\n                rotateAroundOrigin.matrix.multiply(\n                    translateToOrigin.matrix.multiply(matrix)))\n        );\n\n\n        // Instead of directly setting the `matrix()` transform on the element,\n        // first, decompose the matrix into separate transforms. This allows us\n        // to use normal vector's methods as they don't work on matrices.\n        // An example of this is to retrieve a scale of an element.\n\n        let decomposition = decomposeMatrix(transform.matrix);\n\n        this.translate(utils.toFixed(decomposition.translateX, 2), utils.toFixed(decomposition.translateY, 2));\n        this.rotate(utils.toFixed(decomposition.rotation, 2));\n        // Note that scale has been already applied\n        // this.scale(decomposition.scaleX, decomposition.scaleY);\n\n        return this;\n    }\n\n    animateAlongPath() { }\n\n    sample(interval) {\n\n        // Interpolate path by discrete points.\n        // The precision of the sampling is controlled by `interval`.\n        // In other words, `sample()` will generate a point on the path\n        // starting at the beginning of the path going to the end every\n        // `interval` pixels.\n        // The sampler can be very useful. E.g. finding intersection between\n        // two paths (finding the two closest points from two samples).\n\n\n        // `path.getTotalLength()`\n        // Returns the computed value for the total length of the path using\n        // the browser's distance-along-a-path algorithm, as a distance in the\n        // current user coordinate system.\n\n        // `path.getPointAtLength(distance)`\n        // Returns the (x,y) coordinate in user space which is distance units\n        // along the path, utilizing the browser's distance-along-a-path algorithm.\n\n        interval = interval || 1;\n\n        let length   = this.node.getTotalLength();\n        let distance = 0;\n        let samples  = [];\n\n        while (distance < length) {\n\n            let sample = this.node.getPointAtLength(distance);\n\n            samples.push({\n                distance,\n                x: sample.x,\n                y: sample.y\n            });\n\n            distance += interval;\n        }\n\n        return samples;\n    }\n\n    toPath() {\n\n        let path = vectorize(utils.createSvgElement('path'));\n        let d    = this.toPathData();\n\n        path.attr(this.attr());\n\n        d && path.attr('d', d);\n\n        return path;\n    }\n\n    toPathData() {\n\n        let tagName = this.node.tagName.toLowerCase();\n        if (tagName === 'path') {\n            return this.attr('d');\n        }\n\n        let method = utils[tagName + 'ToPathData'];\n        if (utils.isFunction(method)) {\n            return method(this.node);\n        }\n\n        throw new Error(tagName + ' cannot be converted to PATH.');\n    }\n\n    findIntersection(ref, target) {\n\n        // Find the intersection of a line starting in the center of the `node`\n        // ending in the point `ref`. `target` is an SVG element to which\n        // node's transformations are relative to. Note that `ref` point must\n        // be in  the coordinate system of the `target` for this function to\n        // work  properly. Returns a point in the `target` coordinate system\n        // (the same system as `ref` is in) if an intersection is found.\n        // Returns `undefined` otherwise.\n\n        let that = this;\n        let svg  = that.getSVG().node;\n\n        target = target || svg;\n\n        let bbox   = Rect.fromRect(that.getBBox(false, target));\n        let center = bbox.getCenter();\n        let spot   = bbox.intersectionWithLineFromCenterToPoint(ref);\n\n        if (!spot) {\n            return undefined;\n        }\n\n        let tagName = that.node.localName.toUpperCase();\n\n        // Little speed up optimalization for `<rect>` element. We do not do conversion\n        // to path element and sampling but directly calculate the intersection through\n        // a transformed geometrical rectangle.\n        if (tagName === 'RECT') {\n\n            let gRect = new Rect(\n                parseFloat(this.attr('x') || 0),\n                parseFloat(this.attr('y') || 0),\n                parseFloat(this.attr('width')),\n                parseFloat(this.attr('height'))\n            );\n            // Get the rect transformation matrix with regards to the SVG document.\n            let rectMatrix = that.getTransformToElement(target);\n            // Decompose the matrix to find the rotation angle.\n            let rectMatrixComponents = vector.decomposeMatrix(rectMatrix);\n            // Now we want to rotate the rectangle back so that we\n            // can use `intersectionWithLineFromCenterToPoint()` passing the angle as the second argument.\n            let resetRotation = svg.createSVGTransform();\n            resetRotation.setRotate(-rectMatrixComponents.rotation, center.x, center.y);\n            let rect = vector.transformRect(gRect, resetRotation.matrix.multiply(rectMatrix));\n\n            spot = Rect.fromRect(rect).intersectionWithLineFromCenterToPoint(ref, rectMatrixComponents.rotation);\n\n        } else if (tagName === 'PATH'\n            || tagName === 'POLYGON'\n            || tagName === 'POLYLINE'\n            || tagName === 'CIRCLE'\n            || tagName === 'ELLIPSE') {\n\n            let pathNode       = (tagName === 'PATH') ? that : that.toPath();\n            let samples        = pathNode.sample();\n            let minDistance    = Infinity;\n            let closestSamples = [];\n\n            for (let i = 0, len = samples.length; i < len; i++) {\n\n                let sample = samples[i];\n                // Convert the sample point in the local coordinate system to the global coordinate system.\n                let gp             = vector.createSVGPoint(sample.x, sample.y);\n                gp                 = gp.matrixTransform(that.getTransformToElement(target));\n                sample             = Point.fromPoint(gp);\n                let centerDistance = sample.distance(center);\n                // Penalize a higher distance to the reference point by 10%.\n                // This gives better results. This is due to\n                // inaccuracies introduced by rounding errors and getPointAtLength() returns.\n                let refDistance = sample.distance(ref) * 1.1;\n                let distance    = centerDistance + refDistance;\n                if (distance < minDistance) {\n                    minDistance    = distance;\n                    closestSamples = [{\n                        sample,\n                        refDistance\n                    }];\n                } else if (distance < minDistance + 1) {\n                    closestSamples.push({\n                        sample,\n                        refDistance\n                    });\n                }\n            }\n\n            closestSamples.sort(function (a, b) {\n                return a.refDistance - b.refDistance;\n            });\n            spot = closestSamples[0].sample;\n        }\n\n        return spot;\n    }\n}\n\nfunction getLastVElement(elem) {\n\n    let vel = vector.isVElement(elem) ? elem : createVElement(elem);\n\n    return utils.isArray(vel) ? vel[vel.length - 1] : vel;\n}\n\nfunction eachElem(elem, iterator, context) {\n\n    if (elem) {\n\n        let vel = utils.map(utils.isArray(elem) ? elem : [elem], function (item) {\n            return vector.isVElement(item) ? item : createVElement(elem);\n        });\n\n        utils.forEach(vel, iterator, context);\n    }\n}\n\nfunction vectorize(node) {\n    return new VElement(node);\n}\n\nfunction normalize(elem) {\n    return elem instanceof VElement ? elem.node : elem;\n}\n\nfunction createVElement(elem, attrs, children) {\n\n    if (!elem) {\n        return null;\n    }\n\n    if (elem instanceof VElement) {\n        elem = elem.node;\n    }\n\n    if (utils.isString(elem)) {\n\n        if (elem.toLowerCase() === 'svg') {\n            // create a new SVG canvas\n            elem = utils.createSvgDocument();\n\n        } else if (elem[0] === '<') {\n\n            // Create element from an SVG string.\n            let svgDoc = utils.createSvgDocument(elem);\n            if (svgDoc.childNodes.length > 1) {\n                return utils.map(svgDoc.childNodes, function (childNode) {\n                    return vectorize(document.importNode(childNode, true));\n                });\n            }\n\n            elem = document.importNode(svgDoc.firstChild, true);\n        } else {\n            // create svg node by tagName.\n            elem = utils.createSvgElement(elem);\n        }\n    }\n\n    let vel = vectorize(elem);\n\n    // set attributes.\n    attrs && vel.setAttrs(attrs);\n\n    // append children.\n    children && vel.append(children);\n\n    return vel;\n}\n\n\n// vector\n// ------\n\nlet vector = VElement.create = createVElement;\nlet svgDocument = createVElement('svg').node;\n\n\nutils.extend(vector, {\n\n    isVElement(obj) {\n\n        return obj instanceof VElement;\n    },\n\n    createSVGPoint(x, y) {\n\n        let point = svgDocument.createSVGPoint();\n\n        point.x = x;\n        point.y = y;\n\n        return point;\n    },\n\n    createSVGMatrix(matrix) {\n\n        let svgMatrix = svgDocument.createSVGMatrix();\n\n        /* eslint guard-for-in: 0 */\n        for (let key in matrix) {\n            svgMatrix[key] = matrix[key];\n        }\n\n        return svgMatrix;\n    },\n\n    createSVGTransform(matrix) {\n\n        if (!utils.isUndefined(matrix)) {\n\n            if (!(matrix instanceof SVGMatrix)) {\n                matrix = vector.createSVGMatrix(matrix);\n            }\n            return svgDocument.createSVGTransformFromMatrix(matrix);\n        }\n\n        return svgDocument.createSVGTransform();\n    },\n\n    transformRect(rect, matrix) {\n\n        let point = svgDocument.createSVGPoint();\n\n        point.x = rect.x;\n        point.y = rect.y;\n\n        let corner1 = point.matrixTransform(matrix);\n\n\n        point.x = rect.x + rect.width;\n        point.y = rect.y;\n\n        let corner2 = point.matrixTransform(matrix);\n\n\n        point.x = rect.x + rect.width;\n        point.y = rect.y + rect.height;\n\n        let corner3 = point.matrixTransform(matrix);\n\n\n        point.x = rect.x;\n        point.y = rect.y + rect.height;\n\n        let corner4 = point.matrixTransform(matrix);\n\n\n        let minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n        let maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n        let minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n        let maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY\n        };\n    },\n\n    annotations(t, annotations, options) {\n\n        annotations = annotations || [];\n        annotations = utils.isArray(annotations) ? annotations : [annotations];\n        options     = options || {};\n\n        let compacted = [];\n        let ret       = [];\n        let offset    = options.offset || 0;\n        let batch;\n        let item;\n        let prev;\n\n        for (let i = 0, l = t.length; i < l; i++) {\n\n            item = ret[i] = t[i];\n\n            for (let j = 0, k = annotations.length; j < k; j++) {\n\n                let annotation = annotations[j];\n                let start      = annotation.start + offset;\n                let end        = annotation.end + offset;\n\n                if (i >= start && i < end) {\n                    // Annotation applies.\n                    if (utils.isObject(item)) {\n                        // There is more than one annotation to be applied => Merge attributes.\n                        item.attrs = utils.merge({}, item.attrs, annotation.attrs);\n                    } else {\n                        item = ret[i] = {\n                            t: t[i],\n                            attrs: annotation.attrs\n                        };\n                    }\n                    if (options.includeAnnotationIndices) {\n\n                        if (!item.annotations) {\n                            item.annotations = [];\n                        }\n\n                        item.annotations.push(j);\n                    }\n                }\n            }\n\n            prev = ret[i - 1];\n\n            if (!prev) {\n\n                batch = item;\n\n            } else if (utils.isObject(item) && utils.isObject(prev)) {\n                // Both previous item and the current one are annotations. If the attributes\n                // didn't change, merge the text.\n                if (JSON.stringify(item.attrs) === JSON.stringify(prev.attrs)) {\n                    batch.t += item.t;\n                } else {\n                    compacted.push(batch);\n                    batch = item;\n                }\n\n            } else if (utils.isObject(item)) {\n                // Previous item was a string, current item is an annotation.\n                compacted.push(batch);\n                batch = item;\n\n            } else if (utils.isObject(prev)) {\n                // Previous item was an annotation, current item is a string.\n                compacted.push(batch);\n                batch = item;\n\n            } else {\n                // Both previous and current item are strings.\n                batch = (batch || '') + item;\n            }\n        }\n\n        if (batch) {\n            compacted.push(batch);\n        }\n\n        return compacted;\n    }\n});\n\n\n// exports\n// -------\n\nexport default vector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/vector.js\n **/","import  Rect from './Rect';\nimport Point from './Point';\n\nclass Ellipse {\n\n    constructor(x = 0, y = 0, a = 0, b = 0) {\n\n        this.x = x;\n        this.y = y;\n        this.a = a;\n        this.b = b;\n    }\n\n\n    // statics\n    // -------\n\n    static equals(e1, e2) {\n\n        return this.isEllipse(e1)\n            && this.isEllipse(e2)\n            && e1.x === e2.x\n            && e1.y === e2.y\n            && e1.a === e2.a\n            && e1.b === e2.b;\n    }\n\n    static fromEllipse(e) {\n\n        return new Ellipse(e.x, e.y, e.a, e.b);\n    }\n\n    static isEllipse(e) {\n\n        return e && e instanceof Ellipse;\n    }\n\n\n    // methods\n    // -------\n\n    getCenter() {\n\n        return new Point(this.x, this.y);\n    }\n\n    getBBox() {\n\n        return new Rect(this.x - this.a, this.y - this.b, 2 * this.a, 2 * this.b);\n    }\n\n    grow(amount) {\n\n        this.a += amount;\n        this.b += amount;\n\n        return this;\n    }\n\n    intersectionWithLineFromCenterToPoint(point, angle) {\n\n        // Find point on me where line from my center to `point` intersects with\n        // my boundary.\n        // If angle is specified, intersection with rotated ellipse is computed.\n\n        let result;\n        let center = this.getCenter();\n\n        if (angle) {\n            point.rotate(center, angle);\n        }\n\n        let dx = point.x - this.x;\n        let dy = point.y - this.y;\n        if (dx === 0) {\n\n            result = this.getBBox().getNearestPointToPoint(point);\n\n            if (angle) {\n                return result.rotate(center, -angle);\n            }\n\n            return result;\n        }\n\n        let m  = dy / dx;\n        let mm = m * m;\n        let aa = this.a * this.a;\n        let bb = this.b * this.b;\n        let x  = Math.sqrt(1 / ((1 / aa) + (mm / bb)));\n\n        x = dx < 0 ? -x : x;\n\n        let y = m * x;\n\n        result = new Point(this.x + x, this.y + y);\n\n        if (angle) {\n            return result.rotate(center, -angle);\n        }\n\n        return result;\n    }\n\n\n    // common\n    // ------\n\n    equals(ellipse) {\n\n        return Ellipse.equals(this, ellipse);\n    }\n\n    valueOf() {\n\n        return [this.x, this.y, this.a, this.b];\n    }\n\n    toString() {\n\n        return this.valueOf().join(', ');\n    }\n\n    clone() {\n\n        return Ellipse.fromEllipse(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Ellipse;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/Ellipse.js\n **/","import * as utils from '../common/utils';\nimport VectorView from '../views/VectorView';\n\n\nclass NodeView extends VectorView {\n\n    static get specialAttributes() {\n\n        return [\n            'text',\n            'html',\n            'style',\n            'ref',\n            'ref-x',\n            'ref-y',\n            'ref-dx',\n            'ref-dy',\n            'ref-width',\n            'ref-height',\n            'x-alignment',\n            'y-alignment',\n            // 'port'\n        ];\n    }\n\n    render() {\n\n        this.vel.empty();\n        this.renderMarkup();\n\n        this.scalableNode  = this.findOne('.pane-scalable');\n        this.rotatableNode = this.findOne('.pane-rotatable');\n\n        return this\n            .update()\n            .resize()\n            .rotate()\n            .translate();\n    }\n\n    update(specifiedAttrs) {\n\n        // process the `attrs` object and set attributes\n        // on sub elements based on the selectors.\n\n        let allAttrs  = this.cell.attrs;\n        let rotatable = this.rotatableNode;\n        let rotation;\n\n        if (rotatable) {\n            rotation = rotatable.attr('transform');\n            rotatable.attr('transform', '');\n        }\n\n        let nodesMap  = {};\n        let relatives = [];\n\n        utils.forIn(specifiedAttrs || allAttrs, function (attrs, selector) {\n\n            let vels = this.find(selector);\n            if (!vels.length) {\n                return;\n            }\n\n            nodesMap[selector] = vels;\n\n            let specials = NodeView.specialAttributes.slice();\n\n            // filter\n            if (utils.isObject(attrs.filter)) {\n                specials.push('filter');\n                this.applyFilter(vels, attrs.filter);\n            }\n\n            // gradient\n            if (utils.isObject(attrs.fill)) {\n                specials.push('fill');\n                this.applyGradient(vels, 'fill', attrs.fill);\n            }\n\n            // gradient\n            if (utils.isObject(attrs.stroke)) {\n                specials.push('stroke');\n                this.applyGradient(vels, 'stroke', attrs.stroke);\n            }\n\n            // text\n            if (!utils.isNil(attrs.text)) {\n                specials.push('lineHeight', 'textPath', 'annotations');\n                utils.forEach(vels, function (vel) {\n                    vel.text(attrs.text, {\n                        textPath: attrs.textPath,\n                        lineHeight: attrs.lineHeight,\n                        annotations: attrs.annotations\n                    });\n                });\n            }\n\n\n            let normal = {};\n\n            utils.forIn(attrs, function (value, key) {\n                if (!utils.contains(specials, key)) {\n                    normal[key] = value;\n                }\n            });\n\n            if (!utils.isEmptyObject(normal)) {\n                // set regular attributes\n                utils.forEach(vels, function (vel) {\n                    vel.attr(normal);\n                });\n            }\n\n            // `port` attribute contains the `id` of the port\n            // that the underlying magnet represents.\n            // if (attrs.port) {\n            //    forEach(vels, function (vel) {\n            //        vel.attr('port', isUndefined(attrs.port.id) ? attrs.port : attrs.port.id);\n            //    });\n            // }\n\n            // TODO: vel.css()\n\n            // if (attrs.style) {\n            //    forEach(vels, function (vel) {\n            //        vel.css(attrs.style);\n            //    });\n            // }\n\n            // html\n            if (!utils.isNil(attrs.html)) {\n                utils.forEach(vels, function (vel) {\n                    vel.node.innerHTML = attrs.html;\n                });\n            }\n\n\n            // Special `ref-x` and `ref-y` attributes make it possible to\n            // set both absolute or relative positioning of sub elements.\n            let isRelative = utils.some([\n                'ref-x',\n                'ref-y',\n                'ref-dx',\n                'ref-dy',\n                'x-alignment',\n                'y-alignment',\n                'ref-width',\n                'ref-height'\n            ], function (key) {\n                return !utils.isNil(attrs[key]);\n            });\n\n            if (isRelative) {\n                relatives.push(selector);\n            }\n        }, this);\n\n\n        // Note that we're using the bounding box without transformation\n        // because we are already inside a transformed coordinate system.\n        let size = this.cell.size;\n        let bbox = {\n            x: 0,\n            y: 0,\n            width: size.width,\n            height: size.height\n        };\n\n        utils.forEach(relatives, function (selector) {\n\n            let attrs     = allAttrs[selector];\n            let specified = specifiedAttrs && specifiedAttrs[selector];\n            if (specified) {\n                attrs = utils.merge({}, attrs, specified);\n            }\n\n            utils.forEach(nodesMap[selector], function (vel) {\n                this.positionRelative(vel, bbox, attrs, nodesMap);\n            }, this);\n\n        }, this);\n\n        if (rotatable) {\n            rotatable.attr('transform', rotation || '');\n        }\n\n        return this;\n    }\n\n    positionRelative(vel, bbox, attrs, nodeMapping) {\n\n        let ref = attrs.ref;\n\n        // `ref` is the selector of the reference element.\n        // If no `ref` specified, reference element is the root element.\n        if (ref) {\n\n            let refVel = nodeMapping && nodeMapping[ref];\n            if (refVel) {\n                refVel = refVel[0];\n            } else {\n                refVel = ref === '.' ? this.vel : this.vel.findOne(ref);\n            }\n\n            if (!refVel) {\n                throw new Error('NodeView: reference does not exists.');\n            }\n\n            // Get the bounding box of the reference element\n            // relative to the root `<g>` element.\n            bbox = refVel.getBBox(false, this.elem);\n        }\n\n        let refDx = utils.toFloat(attrs['ref-dx']);\n        let refDy = utils.toFloat(attrs['ref-dy']);\n\n        let yAlign = attrs['y-alignment'];\n        let xAlign = attrs['x-alignment'];\n\n        // 'ref-y', 'ref-x', 'ref-width', 'ref-height' can be\n        // defined by value or by percentage e.g 4, 0.5, '200%'.\n\n        let refX        = attrs['ref-x'];\n        let xPercentage = utils.isPercentage(refX);\n        refX            = utils.toFloat(refX, xPercentage);\n\n        let refY        = attrs['ref-y'];\n        let yPercentage = utils.isPercentage(refY);\n        refY            = utils.toFloat(refY, yPercentage);\n\n        let refWidth    = attrs['ref-width'];\n        let wPercentage = utils.isPercentage(refWidth);\n        refWidth        = utils.toFloat(refWidth, wPercentage);\n\n        let refHeight   = attrs['ref-height'];\n        let hPercentage = utils.isPercentage(refHeight);\n        refHeight       = utils.toFloat(refHeight, hPercentage);\n\n        // `ref-width` and `ref-height` defines the width and height\n        // of the sub element relatively to the reference element size.\n        if (utils.isFinite(refWidth)) {\n            if (wPercentage || refWidth >= 0 && refWidth <= 1) {\n                vel.attr('width', utils.toFixed(refWidth * bbox.width, 2));\n            } else {\n                vel.attr('width', Math.max(utils.toFixed(refWidth + bbox.width, 2), 0));\n            }\n        }\n\n        if (utils.isFinite(refHeight)) {\n            if (hPercentage || refHeight >= 0 && refHeight <= 1) {\n                vel.attr('height', utils.toFixed(refHeight * bbox.height, 2));\n            } else {\n                vel.attr('height', Math.max(utils.toFixed(refHeight + bbox.height, 2), 0));\n            }\n        }\n\n\n        // Check if the node is a descendant of the scalable group.\n        let scalableNode = vel.findParent('pane-scalable', this.elem);\n\n        // Remove the previous translate() from the transform attribute\n        // and translate the element relative to the bounding box following\n        // the `ref-x` and `ref-y` attributes.\n        let transformAttr = vel.attr('transform');\n        if (transformAttr) {\n            vel.attr('transform', utils.clearTranslate(transformAttr));\n        }\n\n        // The final translation of the sub element.\n        let tx = 0;\n        let ty = 0;\n        let scale;\n\n        // `ref-dx` and `ref-dy` define the offset of the sub element relative\n        // to the right and/or bottom coordinate of the reference element.\n        if (utils.isFinite(refDx)) {\n            if (scalableNode) {\n                scale = scalableNode.scale();\n                tx    = bbox.x + bbox.width + refDx / scale.sx;\n            } else {\n                tx = bbox.x + bbox.width + refDx;\n            }\n        }\n\n        if (utils.isFinite(refDy)) {\n            if (scalableNode) {\n                scale = scale || scalableNode.scale();\n                ty    = bbox.y + bbox.height + refDy / scale.sy;\n            } else {\n                ty = bbox.y + bbox.height + refDy;\n            }\n        }\n\n        if (utils.isFinite(refX)) {\n            if (xPercentage || refX > 0 && refX < 1) {\n                tx = bbox.x + bbox.width * refX;\n            } else if (scalableNode) {\n                scale = scale || scalableNode.scale();\n                tx    = bbox.x + refX / scale.sx;\n            } else {\n                tx = bbox.x + refX;\n            }\n        }\n\n        if (utils.isFinite(refY)) {\n            if (xPercentage || refY > 0 && refY < 1) {\n                ty = bbox.y + bbox.height * refY;\n            } else if (scalableNode) {\n                scale = scale || scalableNode.scale();\n                ty    = bbox.y + refY / scale.sy;\n            } else {\n                ty = bbox.y + refY;\n            }\n        }\n\n        if (!utils.isNil(yAlign) || !utils.isNil(xAlign)) {\n\n            let velBBox = vel.getBBox(false, this.getPane());\n\n            if (yAlign === 'middle') {\n                ty -= velBBox.height / 2;\n            } else if (utils.isFinite(yAlign)) {\n                ty += (yAlign > -1 && yAlign < 1) ? velBBox.height * yAlign : yAlign;\n            }\n\n            if (xAlign === 'middle') {\n                tx -= velBBox.width / 2;\n            } else if (utils.isFinite(xAlign)) {\n                tx += (xAlign > -1 && xAlign < 1) ? velBBox.width * xAlign : xAlign;\n            }\n        }\n\n        vel.translate(utils.toFixed(tx, 2), utils.toFixed(ty, 2));\n\n        return this;\n    }\n\n    scale(sx, sy) {\n        // Scale the whole `<g>` group.\n\n        this.vel.scale(sx, sy);\n\n        return this;\n    }\n\n    resize() {\n\n        if (!this.scalableNode) {\n            return this;\n        }\n\n        // get bbox without transform\n        let nativeBBox = this.scalableNode.getBBox(true);\n\n        // Make sure `scalableBBox.width` and `scalableBBox.height` are not\n        // zero which can happen if the element does not have any content.\n        // By making the width(height) 1, we prevent HTML errors of the type\n        // `scale(Infinity, Infinity)`.\n        let size = this.cell.getSize();\n\n        let sx = size.width / (nativeBBox.width || 1);\n        let sy = size.height / (nativeBBox.height || 1);\n\n        sx = utils.toFixed(sx, 2);\n        sy = utils.toFixed(sy, 2);\n\n        this.scalableNode.attr('transform', 'scale(' + sx + ',' + sy + ')');\n\n        // Update must always be called on non-rotated element. Otherwise,\n        // relative positioning would work with wrong (rotated) bounding boxes.\n        this.update();\n\n        return this;\n    }\n\n    rotate() {\n\n        if (this.rotatableNode) {\n\n            let size = this.cell.getSize();\n            let ox   = size.width / 2;\n            let oy   = size.height / 2;\n\n            this.rotatableNode.attr('transform', 'rotate(' + this.cell.getRotation() + ',' + ox + ',' + oy + ')');\n        }\n\n        return this;\n    }\n\n    translate() {\n\n        let position = this.cell.getPosition();\n        this.vel.attr('transform', 'translate(' + position.x + ',' + position.y + ')');\n\n        return this;\n    }\n\n    getBBox() {\n\n        return this.vel.getBBox();\n    }\n\n    getStrokeWidth() {\n\n        let vTarget = this.findOne('rect')\n            || this.findOne('path')\n            || this.findOne('circle')\n            || this.findOne('ellipse')\n            || this.findOne('polyline')\n            || this.findOne('polygon');\n\n        if (vTarget && vTarget.node) {\n\n            let strokeWidth = utils.getComputedStyle(vTarget.node, 'stroke-width');\n\n            return strokeWidth && utils.toFloat(strokeWidth) || 0;\n        }\n\n        return 0;\n    }\n\n    getStrokedBBox() {\n\n        let sw   = this.getStrokeWidth() - 1;\n        let bbox = this.getCell().getBBox();\n\n        return sw ? bbox.grow(sw / 2) : bbox;\n    }\n\n    getConnectionPointOnBorder() {\n\n        return null;\n    }\n}\n\n\n// exports\n// -------\n\nexport default NodeView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/NodeView.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport    filters from '../common/filters';\nimport   CellView from '../views/CellView';\n\n\nclass VectorView extends CellView {\n\n    ensureElement() {\n\n        this.vel  = vector(this.cell.getTagName(), {\n            'class': this.cell.getClassName()\n        });\n        this.elem = this.vel.node;\n        // attach cell's id to elem\n        this.elem.cellId = this.cell.id;\n\n        let pane = this.getPane();\n        if (pane) {\n            pane.appendChild(this.elem);\n        }\n\n        return this;\n    }\n\n    renderMarkup() {\n\n        // `markup` is rendered by default. Set the `markup` on model\n        // if the default markup is not desirable.\n\n        let markup = this.compileMarkup(this.cell.getMarkup(), this.cell.data);\n        if (markup) {\n            this.vel.append(vector(markup));\n        } else {\n            throw new Error('`markup` is missing while the default `render()` implementation is used.');\n        }\n\n        return this;\n    }\n\n    find(selector) {\n\n        return selector === '.' ? [this.vel] : this.vel.find(selector);\n    }\n\n    findOne(selector) {\n\n        return selector === '.' ? this.vel : this.vel.findOne(selector);\n    }\n\n    applyAttr(selector, attrs) {\n\n        if (attrs) {\n            utils.forEach(this.find(selector), function (vel) {\n                vel.attr(attrs);\n            });\n        }\n\n        return this;\n    }\n\n    applyFilter(selector, filter) {\n\n        // `selector` is a CSS selector or `'.'`.\n        // `filter` must be in the special filter format:\n        //   {\n        //      name: <name of the filter>,\n        //      args: { <arguments>, ... }\n        //   }\n        //\n        // example:\n        //   {\n        //      name: 'blur',\n        //      args: {\n        //        radius: 5\n        //      }\n        //   }\n\n        if (!filter) {\n            return this;\n        }\n\n        let name   = filter.name || '';\n        let args   = filter.args || {};\n        let attrs  = filter.attrs;\n        let render = filters[name];\n\n        if (!name || !render) {\n            throw new Error('Invalided filter: \"' + name + '\"');\n        }\n\n        let vels = utils.isString(selector) ? this.find(selector) : selector;\n        if (!vels.length) {\n            return this;\n        }\n\n\n        let svg  = this.paper.svg;\n        let hash = utils.hashCode(JSON.stringify(filter));\n        let id   = name + '-' + this.paper.id + '-' + hash;\n\n        // define filter\n        if (!svg.getElementById(id)) {\n\n            let vFilter = vector(render(args));\n            // Set the filter area to be 3x the bounding box of the cell\n            // and center the filter around the cell.\n            vFilter.attr({\n                filterUnits: 'objectBoundingBox',\n                x: -1,\n                y: -1,\n                width: 3,\n                height: 3\n            });\n\n            if (attrs) {\n                vFilter.attr(attrs);\n            }\n\n            vFilter.node.id = id;\n\n            vector(svg).getDefs().append(vFilter);\n        }\n\n        // apply filter\n        utils.forEach(vels, function (vel) {\n            vel.attr('filter', 'url(#' + id + ')');\n        });\n\n        return this;\n    }\n\n    applyGradient(selector, attrName, gradient) {\n\n        // `selector` is a CSS selector or `'.'`.\n        // `attrName` is either a `'fill'` or `'stroke'`.\n        // `gradient` must be in the special gradient format:\n        //   {\n        //     type: <linearGradient|radialGradient>,\n        //     stops: [ { offset: <offset>, color: <color> }, ... ]\n        //   }\n        //\n        // example:\n        //   {\n        //     type: 'linearGradient',\n        //     stops: [\n        //       {\n        //          offset: '10%',\n        //          color: 'green'\n        //       }, {\n        //          offset: '50%',\n        //          color: 'blue'\n        //       }\n        //     ]\n        //   }\n\n        if (!attrName || !gradient) {\n            return this;\n        }\n\n        let type  = gradient.type;\n        let stops = gradient.stops;\n        let attrs = gradient.attrs;\n\n        if (!type || !stops || !stops.length) {\n            return this;\n        }\n\n        let vels = utils.isString(selector) ? this.find(selector) : selector;\n        if (!vels.length) {\n            return this;\n        }\n\n        let svg = this.paper.svg;\n        let id  = type + '-' + this.paper.id + '-' + utils.hashCode(JSON.stringify(gradient));\n\n        // define gradient\n        if (!svg.getElementById(id)) {\n\n            let gradientStr = [\n                '<' + type + '>',\n                utils.map(stops, function (stop) {\n                    return '<stop offset=\"' + stop.offset + '\" stop-color=\"' + stop.color + '\" stop-opacity=\"' + (utils.isFinite(stop.opacity) ? stop.opacity : 1) + '\" />';\n                }).join(''),\n                '</' + type + '>'\n            ].join('');\n\n            let vGradient = vector(gradientStr);\n\n            if (attrs) {\n                vGradient.attr(attrs);\n            }\n\n            vGradient.node.id = id;\n            vector(svg).getDefs().append(vGradient);\n        }\n\n        // apply gradient\n        utils.forEach(vels, function (vel) {\n            vel.attr(attrName, 'url(#' + id + ')');\n        });\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default VectorView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/VectorView.js\n **/","import * as utils from '../common/utils';\n\nconst format   = utils.format;\nconst isFinite = utils.isFinite;\n\n\n// exports\n// -------\n\nexport default {\n\n    outline(args) {\n\n        // `color`   ... outline color\n        // `width`   ... outline width\n        // `opacity` ... outline opacity\n        // `margin`  ... gap between outline and the element\n\n        let template = '' +\n            '<filter>' +\n            '  <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>' +\n            '  <feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" />' +\n            '  <feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" />' +\n            '  <feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/>' +\n            '  <feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/>' +\n            '  <feMerge>' +\n            '    <feMergeNode in=\"outline\"/>' +\n            '    <feMergeNode in=\"SourceGraphic\"/>' +\n            '  </feMerge>' +\n            '</filter>';\n\n        let margin = isFinite(args.margin) ? args.margin : 2;\n        let width  = isFinite(args.width) ? args.width : 1;\n\n        return format(template, {\n            color: args.color || 'blue',\n            opacity: isFinite(args.opacity) ? args.opacity : 1,\n            outerRadius: margin + width,\n            innerRadius: margin\n        });\n    },\n\n    highlight(args) {\n\n        // `color`   ... color\n        // `width`   ... width\n        // `blur`    ... blur\n        // `opacity` ... opacity\n\n        let template = '' +\n            '<filter>' +\n            '  <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>' +\n            '  <feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/>' +\n            '  <feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/>' +\n            '  <feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/> ' +\n            '  <feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/>' +\n            '</filter>';\n\n        return format(template, {\n            color: args.color || 'red',\n            width: isFinite(args.width) ? args.width : 1,\n            blur: isFinite(args.blur) ? args.blur : 0,\n            opacity: isFinite(args.opacity) ? args.opacity : 1\n        });\n    },\n\n    blur(args) {\n\n        // `x` ... horizontal blur\n        // `y` ... vertical blur (optional)\n\n        let template = '' +\n            '<filter>' +\n            '  <feGaussianBlur stdDeviation=\"${stdDeviation}\"/>' +\n            '</filter>';\n\n        let x = isFinite(args.x) ? args.x : 2;\n\n        return format(template, {\n            stdDeviation: isFinite(args.y) ? [x, args.y] : x\n        });\n    },\n\n    dropShadow(args) {\n\n        // `dx`      ... horizontal shift\n        // `dy`      ... vertical shift\n        // `blur`    ... blur\n        // `color`   ... color\n        // `opacity` ... opacity\n\n        let template = 'SVGFEDropShadowElement' in window\n            ? '<filter><feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\"/></filter>'\n            : '<filter><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\"/><feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\"/><feFlood flood-color=\"${color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"${opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n\n        return format(template, {\n            dx: args.dx || 0,\n            dy: args.dy || 0,\n            opacity: isFinite(args.opacity) ? args.opacity : 1,\n            color: args.color || 'black',\n            blur: isFinite(args.blur) ? args.blur : 4\n        });\n    },\n\n    grayScale(args) {\n\n        // `amount` ... the proportion of the conversion.\n        // A value of 1 is completely grayscale.\n        // A value of 0 leaves the input unchanged.\n\n        let template = '' +\n            '<filter>' +\n            '  <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/>' +\n            '</filter>';\n\n        let amount = isFinite(args.amount) ? args.amount : 1;\n\n        return format(template, {\n            a: 0.2126 + 0.7874 * (1 - amount),\n            b: 0.7152 - 0.7152 * (1 - amount),\n            c: 0.0722 - 0.0722 * (1 - amount),\n            d: 0.2126 - 0.2126 * (1 - amount),\n            e: 0.7152 + 0.2848 * (1 - amount),\n            f: 0.0722 - 0.0722 * (1 - amount),\n            g: 0.2126 - 0.2126 * (1 - amount),\n            h: 0.0722 + 0.9278 * (1 - amount)\n        });\n    },\n\n    sepia(args) {\n\n        // `amount` ... the proportion of the conversion.\n        // A value of 1 is completely sepia.\n        // A value of 0 leaves the input unchanged.\n\n        let template = '' +\n            '<filter>' +\n            '  <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/>' +\n            '</filter>';\n\n        let amount = isFinite(args.amount) ? args.amount : 1;\n\n        return format(template, {\n            a: 0.393 + 0.607 * (1 - amount),\n            b: 0.769 - 0.769 * (1 - amount),\n            c: 0.189 - 0.189 * (1 - amount),\n            d: 0.349 - 0.349 * (1 - amount),\n            e: 0.686 + 0.314 * (1 - amount),\n            f: 0.168 - 0.168 * (1 - amount),\n            g: 0.272 - 0.272 * (1 - amount),\n            h: 0.534 - 0.534 * (1 - amount),\n            i: 0.131 + 0.869 * (1 - amount)\n        });\n    },\n\n    saturate(args) {\n\n        // `amount` ... the proportion of the conversion.\n        // A value of 0 is completely un-saturated.\n        // A value of 1 leaves the input unchanged.\n\n        let template = '' +\n            '<filter>' +\n            '  <feColorMatrix type=\"saturate\" values=\"${amount}\"/>' +\n            '</filter>';\n\n        let amount = isFinite(args.amount) ? args.amount : 1;\n\n        return format(template, {\n            amount: 1 - amount\n        });\n    },\n\n    hueRotate(args) {\n\n        // `angle` ...  the number of degrees around the color\n        // circle the input samples will be adjusted.\n\n        let template = '' +\n            '<filter>' +\n            '  <feColorMatrix type=\"hueRotate\" values=\"${angle}\"/>' +\n            '</filter>';\n\n        return format(template, {\n            angle: args.angle || 0\n        });\n    },\n\n    invert(args) {\n\n        // `amount` ... the proportion of the conversion.\n        // A value of 1 is completely inverted.\n        // A value of 0 leaves the input unchanged.\n\n        let template = '' +\n            '<filter>' +\n            '  <feComponentTransfer>' +\n            '    <feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/>' +\n            '    <feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/>' +\n            '    <feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/>' +\n            '  </feComponentTransfer>' +\n            '</filter>';\n\n        let amount = isFinite(args.amount) ? args.amount : 1;\n\n        return format(template, {\n            amount,\n            amount2: 1 - amount\n        });\n    },\n\n    brightness(args) {\n\n        // `amount` ... proportion of the conversion.\n        // A value of 0 will create an image that is completely black.\n        // A value of 1 leaves the input unchanged.\n\n        let template = '' +\n            '<filter>' +\n            '  <feComponentTransfer>' +\n            '    <feFuncR type=\"linear\" slope=\"${amount}\"/>' +\n            '    <feFuncG type=\"linear\" slope=\"${amount}\"/>' +\n            '    <feFuncB type=\"linear\" slope=\"${amount}\"/>' +\n            '  </feComponentTransfer>' +\n            '</filter>';\n\n        return format(template, {\n            amount: isFinite(args.amount) ? args.amount : 1\n        });\n    },\n\n    contrast(args) {\n\n        // `amount` ... proportion of the conversion.\n        // A value of 0 will create an image that is completely black.\n        // A value of 1 leaves the input unchanged.\n\n        let template = '' +\n            '<filter>' +\n            '  <feComponentTransfer>' +\n            '    <feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>' +\n            '    <feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>' +\n            '    <feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>' +\n            '  </feComponentTransfer>' +\n            '</filter>';\n\n        let amount = isFinite(args.amount) ? args.amount : 1;\n\n        return format(template, {\n            amount,\n            amount2: 0.5 - amount / 2\n        });\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/filters.js\n **/","import * as utils from '../common/utils';\n\n\nclass CellView {\n\n    constructor(paper, cell) {\n\n        this.cell    = cell;\n        this.paper   = paper;\n        this.invalid = true;  // default need to be repainted\n\n        this.ensureElement();\n    }\n\n    ensureElement() { return this; }\n\n    render() { return this; }\n\n    update() { return this; }\n\n    compileMarkup(markup, data) {\n\n        return utils.isFunction(markup)\n            ? markup(data)\n            : utils.format(markup, data);\n    }\n\n    getCell() {\n\n        return this.cell;\n    }\n\n    getPaper() {\n\n        return this.paper;\n    }\n\n    getModel() {\n\n        return this.paper && this.paper.getModel();\n    }\n\n    getPane() {\n\n        let result;\n\n        let pane = this.cell.metadata.pane;\n        if (pane) {\n            if (utils.isString(pane)) {\n                result = this.paper[pane];\n            } else if (utils.isNode(pane)) {\n                result = pane;\n            }\n        }\n\n        return result || this.paper.drawPane;\n    }\n\n    destroy() {\n\n        utils.removeElement(this.elem);\n        utils.destroy(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default CellView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/CellView.js\n **/","import Node from '../../cells/Node';\n\n\nclass Image extends Node {}\n\n\nImage.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><image/></g><text/></g>',\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'text': {\n            'font-size': 14,\n            'text': '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-dy': 20,\n            'y-alignment': 'middle',\n            'fill': '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default Image;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Image.js\n **/","import Node from '../../cells/Node';\n\n\nclass Circle extends Node {}\n\n\nCircle.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><circle/></g><text/></g>',\n\n    size: {\n        width: 60,\n        height: 60\n    },\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'circle': {\n            'fill': '#ffffff',\n            'stroke': '#000000',\n            'r': 30,\n            'cx': 30,\n            'cy': 30\n        },\n        'text': {\n            'font-size': 14,\n            'text': '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': .5,\n            'y-alignment': 'middle',\n            'fill': '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default Circle;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Circle.js\n **/","import Path from './Path';\n\nclass Rhombus extends Path {}\n\nRhombus.setDefaults({\n\n    attrs: {\n        'path': {\n            d: 'M 30 0 L 60 30 30 60 0 30 z'\n        },\n        'text': {\n            'ref-y': 0.5,\n            'y-alignment': 'middle'\n        }\n    }\n});\n\nexport default Rhombus;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Rhombus.js\n **/","import Node from '../../cells/Node';\n\n\nclass Ellipse extends Node {}\n\n\nEllipse.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><ellipse/></g><text/></g>',\n\n    size: {\n        width: 60,\n        height: 40\n    },\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'ellipse': {\n            'fill': '#ffffff',\n            'stroke': '#000000',\n            'rx': 30,\n            'ry': 20,\n            'cx': 30,\n            'cy': 20\n        },\n        'text': {\n            'font-size': 14,\n            'text': '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': .5,\n            'y-alignment': 'middle',\n            'fill': '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default Ellipse;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Ellipse.js\n **/","import Node from '../../cells/Node';\n\nclass Polygon extends Node {}\n\nPolygon.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><polygon/></g><text/></g>',\n\n    size: {\n        width: 60,\n        height: 40\n    },\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'polygon': {\n            'fill': '#ffffff',\n            'stroke': '#000000'\n        },\n        'text': {\n            'font-size': 14,\n            'text': '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-dy': 20,\n            'y-alignment': 'middle',\n            'fill': '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default Polygon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Polygon.js\n **/","import Node from '../../cells/Node';\n\nclass Polyline extends Node {}\n\nPolyline.setDefaults({\n\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><polyline/></g><text/></g>',\n\n    size: {\n        width: 60,\n        height: 40\n    },\n\n    attrs: {\n        '.': {\n            'fill': '#ffffff',\n            'stroke': 'none'\n        },\n        'polyline': {\n            'fill': '#ffffff',\n            'stroke': '#000000'\n        },\n        'text': {\n            'font-size': 14,\n            'text': '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-dy': 20,\n            'y-alignment': 'middle',\n            'fill': '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default Polyline;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/Polyline.js\n **/","import Node from '../../cells/Node';\n\nclass LabelLink extends Node {}\n\nLabelLink.setDefaults({\n    markup: '<g class=\"pane-rotatable\"><g class=\"pane-scalable\"><rect/></g><a><text/></a></g>',\n    attrs: {\n        '.': {\n            'fill': '#fff',\n            'stroke': 'none'\n        },\n        'rect': {\n            'fill': '#fff',\n            'stroke': '#000',\n            'stroke-width': '1',\n            'width': 80,\n            'height': 30\n        },\n        'text': {\n            'fill': '#000',\n            'font-size': 12,\n            'ref-x': .5,\n            'ref-y': .5,\n            'text-anchor': 'middle',\n            'y-alignment': 'middle',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default LabelLink;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/LabelLink.js\n **/","import Node from '../../cells/Node';\n\nclass ElementLink extends Node {}\n\nElementLink.setDefaults({\n    markup: '<a><g class=\"pane-rotatable\"><g class=\"pane-scalable\"><rect/></g><text/></g></a>',\n    attrs: {\n        '.': {\n            'fill': '#fff',\n            'stroke': 'none'\n        },\n        'rect': {\n            'fill': '#fff',\n            'stroke': '#000',\n            'stroke-width': '1',\n            'width': 80,\n            'height': 30\n        },\n        'text': {\n            'fill': '#000',\n            'font-size': 12,\n            'ref-x': .5,\n            'ref-y': .5,\n            'text-anchor': 'middle',\n            'y-alignment': 'middle',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n});\n\n\nexport default ElementLink;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/basic/ElementLink.js\n **/","import           Change from '../changes/Change';\nimport       RootChange from '../changes/RootChange';\nimport      ChildChange from '../changes/ChildChange';\nimport    VisibleChange from '../changes/VisibleChange';\nimport   TerminalChange from '../changes/TerminalChange';\nimport   GeometryChange from '../changes/GeometryChange';\nimport ChangeCollection from '../changes/ChangeCollection';\n\n\nlet changes = {\n    Change,\n    RootChange,\n    ChildChange,\n    VisibleChange,\n    TerminalChange,\n    GeometryChange,\n    ChangeCollection\n};\n\n\nexport {\n    changes\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/index.js\n **/","// Abstract class for all changes\nclass Change {\n\n    /*\n     constructor() {\n        if (new.target === Change) {\n            throw new Error('`Change` is an abstract class that cannot be instantiated.');\n        }\n     }\n     */\n\n    digest() { return this; }\n}\n\n\n// exports\n// -------\n\nexport default Change;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/Change.js\n **/","import Change from './Change';\n\nclass RootChange extends Change {\n\n    constructor(model, root) {\n\n        super();\n\n        this.model    = model;\n        this.root     = root;\n        this.previous = root;\n    }\n\n    digest() {\n\n        this.root     = this.previous;\n        this.previous = this.model.rootChanged(this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default RootChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/RootChange.js\n **/","import Change from './Change';\n\n\nclass ChildChange extends Change {\n\n    constructor(model, child, parent, index) {\n\n        super();\n\n        this.model  = model;\n        this.child  = child;\n        this.parent = parent;\n        this.index  = index;\n\n        this.previous      = parent;\n        this.previousIndex = index;\n    }\n\n    digest() {\n\n        let model = this.model;\n        let child = this.child;\n\n        let newParent = this.previous;\n        let newIndex  = this.previousIndex;\n\n        let oldParent = child.parent;\n        let oldIndex  = oldParent ? oldParent.indexOfChild(child) : 0;\n\n        // the new parent is null, then the child(and link) will be removed\n        if (!newParent) {\n            this.disConnect(child, false);\n        }\n\n        oldParent = model.childChanged(child, newParent, newIndex);\n\n        this.parent        = newParent;\n        this.index         = newIndex;\n        this.previous      = oldParent;\n        this.previousIndex = oldIndex;\n\n        return this;\n    }\n\n    disConnect(cell) {\n\n        if (cell.isLink()) {\n\n            let source = cell.getTerminal(true);\n            let target = cell.getTerminal(false);\n\n            if (source) {\n                this.model.terminalChanged(cell, null, true);\n            }\n\n            if (target) {\n                this.model.terminalChanged(cell, null, false);\n            }\n        }\n\n        cell.eachChild(function (child) {\n            this.disConnect(child);\n        }, this);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default ChildChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/ChildChange.js\n **/","import Change from './Change';\n\nclass VisibleChange extends Change {\n\n    constructor(model, cell, visible) {\n\n        super();\n\n        this.model    = model;\n        this.cell     = cell;\n        this.visible  = visible;\n        this.previous = visible;\n    }\n\n    digest() {\n\n        this.visible  = this.previous;\n        this.previous = this.model.visibleChanged(this.cell, this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default VisibleChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/VisibleChange.js\n **/","import Change from './Change';\n\n\nclass TerminalChange extends Change {\n\n    constructor(model, link, terminal, isSource) {\n\n        super();\n\n        this.model    = model;\n        this.link     = link;\n        this.terminal = terminal;\n        this.previous = terminal;\n        this.isSource = isSource;\n    }\n\n    digest() {\n\n        this.terminal = this.previous;\n        this.previous = this.model.terminalChanged(this.link, this.terminal, this.isSource);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default TerminalChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/TerminalChange.js\n **/","import Change from './Change';\n\n\nclass GeometryChange extends Change {\n\n    constructor(model, cell, geometry) {\n\n        super();\n\n        this.model    = model;\n        this.cell     = cell;\n        this.geometry = geometry;\n        this.previous = geometry;\n\n    }\n\n    digest() {\n\n        this.geometry = this.previous;\n        this.previous = this.model.geometryChanged(this.cell, this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default GeometryChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/GeometryChange.js\n **/","class ChangeCollection {\n\n    constructor(model) {\n\n        this.model   = model;\n        this.changes = [];\n    }\n\n    hasChange() {\n\n        return !!this.changes.length;\n    }\n\n    getChanges() {\n\n        return this.changes;\n    }\n\n    add(change) {\n\n        if (change) {\n            this.changes.push(change);\n        }\n\n        return this;\n    }\n\n    clear() {\n\n        this.changes = [];\n\n        return this;\n    }\n\n    notify() {\n\n        this.model.trigger('change', this.changes);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default ChangeCollection;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/ChangeCollection.js\n **/","import Point   from './Point';\nimport Line    from './Line';\nimport Rect    from './Rect';\nimport Ellipse from './Ellipse';\nimport bezier  from './bezier';\n\nlet geometry = {\n    Point,\n    Line,\n    Rect,\n    Ellipse,\n    bezier\n};\n\nexport {\n    geometry\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/index.js\n **/","import * as utils from '../common/utils';\nimport      Point from '../geometry/Point';\n// import Line  from '../geometry/Line';\n\nfunction curveThroughPoints(points) {\n\n    let controlPoints = getCurveControlPoints(points);\n    let path = ['M', points[0].x, points[0].y];\n\n    utils.forEach(controlPoints[0], function () {\n\n    });\n\n    for (let i = 0; i < controlPoints[0].length; i++) {\n        path.push('C',\n            controlPoints[0][i].x,\n            controlPoints[0][i].y,\n            controlPoints[1][i].x,\n            controlPoints[1][i].y,\n            points[i + 1].x,\n            points[i + 1].y\n        );\n    }\n    return path;\n}\n\nfunction getCurveControlPoints(knots) {\n\n    let firstControlPoints = [];\n    let secondControlPoints = [];\n    let n = knots.length - 1;\n\n    // Special case: Bezier curve should be a straight line.\n    if (n === 1) {\n\n        // 3P1 = 2P0 + P3\n        firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n        // P2 = 2P1 – P0\n        secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n\n        return [firstControlPoints, secondControlPoints];\n    }\n\n    // Calculate first Bezier control points.\n    // Right hand side vector.\n    let rhs = [];\n\n    // Set right hand side X values.\n    for (let i = 1; i < n - 1; i++) {\n        rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n    }\n    rhs[0] = knots[0].x + 2 * knots[1].x;\n    rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n    // Get first control points X-values.\n    let x = getFirstControlPoints(rhs);\n\n\n    // Set right hand side Y values.\n    for (let i = 1; i < n - 1; ++i) {\n        rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n    }\n    rhs[0] = knots[0].y + 2 * knots[1].y;\n    rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n    // Get first control points Y-values.\n    let y = getFirstControlPoints(rhs);\n\n    // Fill output arrays.\n    for (let i = 0; i < n; i++) {\n        // First control point.\n        firstControlPoints.push(new Point(x[i], y[i]));\n        // Second control point.\n        if (i < n - 1) {\n            secondControlPoints.push(new Point(\n                2 * knots[i + 1].x - x[i + 1],\n                2 * knots[i + 1].y - y[i + 1]));\n        } else {\n            secondControlPoints.push(new Point(\n                (knots[n].x + x[n - 1]) / 2,\n                (knots[n].y + y[n - 1]) / 2));\n        }\n    }\n\n    return [firstControlPoints, secondControlPoints];\n}\n\nfunction getFirstControlPoints(rhs) {\n\n    let n = rhs.length;\n    // `x` is a solution vector.\n    let x = [];\n    let tmp = [];\n    let b = 2.0;\n\n    x[0] = rhs[0] / b;\n\n    // Decomposition and forward substitution.\n    for (let i = 1; i < n; i++) {\n        tmp[i] = 1 / b;\n        b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n        x[i] = (rhs[i] - x[i - 1]) / b;\n    }\n\n    for (let i = 1; i < n; i++) {\n        // back substitution.\n        x[n - i - 1] -= tmp[n - i] * x[n - i];\n    }\n\n    return x;\n}\n\n/* FIXME not used\nfunction getInversionSolver(p0, p1, p2, p3) {\n    let pts = arguments;\n\n    function l(i, j) {\n        // calculates a determinant 3x3\n        // [p.x  p.y  1]\n        // [pi.x pi.y 1]\n        // [pj.x pj.y 1]\n        let pi = pts[i];\n        let pj = pts[j];\n        return function (p) {\n            let w = (i % 3 ? 3 : 1) * (j % 3 ? 3 : 1);\n            let lij = p.x * (pi.y - pj.y) + p.y * (pj.x - pi.x) + pi.x * pj.y - pi.y * pj.x;\n            return w * lij;\n        };\n    }\n\n    return function solveInversion(p) {\n        let ct = 3 * l(2, 3)(p1);\n        let c1 = l(1, 3)(p0) / ct;\n        let c2 = -l(2, 3)(p0) / ct;\n        let la = c1 * l(3, 1)(p) + c2 * (l(3, 0)(p) + l(2, 1)(p)) + l(2, 0)(p);\n        let lb = c1 * l(3, 0)(p) + c2 * l(2, 0)(p) + l(1, 0)(p);\n        return lb / (lb - la);\n    };\n}\n*/\n\n/*\nfunction getCurveDivider(p0, p1, p2, p3) {\n\n    // Divide a Bezier curve into two at point defined by value 't' <0,1>.\n    // Using deCasteljau algorithm. http://math.stackexchange.com/a/317867\n    // @param control points (start, control start, control end, end)\n    // @return a function accepts t and returns 2 curves each defined by 4 control points.\n\n    return function divideCurve(t) {\n        let l = new Line(p0, p1).pointAt(t);\n        let m = new Line(p1, p2).pointAt(t);\n        let n = new Line(p2, p3).pointAt(t);\n        let p = new Line(l, m).pointAt(t);\n        let q = new Line(m, n).pointAt(t);\n        let r = new Line(p, q).pointAt(t);\n\n        return [{\n            p0,\n            p1: l,\n            p2: p,\n            p3: r\n        }, {\n            p0: r,\n            p1: q,\n            p2: n,\n            p3\n        }];\n    };\n}\n*/\n\n\n// exports\n// -------\n\nexport {\n    getCurveControlPoints,\n    curveThroughPoints\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geometry/bezier.js\n **/","import * as utils from '../common/utils';\n\n\nfunction triggerEvents(callbacks, args, context) {\n\n    let pass = true;\n\n    for (let i = 0, l = callbacks.length; i < l; i += 2) {\n        pass = utils.invoke(callbacks[i], args, callbacks[i + 1] || context) !== false && pass;\n    }\n\n    return pass;\n}\n\n\nclass Events {\n\n    on(events, callback, context) {\n\n        if (!callback) {\n            return this;\n        }\n\n        let listeners = this.__events || (this.__events = {});\n\n        utils.forEach(utils.split(events), function (event) {\n            let list = listeners[event] || (listeners[event] = []);\n            list.push(callback, context);\n        });\n\n        return this;\n    }\n\n    once(events, callback, context) {\n\n        let that = this;\n        let cb   = function () {\n            that.off(events, cb);\n            callback.apply(context || that, arguments);\n        };\n\n        return this.on(events, cb, context);\n    }\n\n    off(events, callback, context) {\n\n        let listeners = this.__events;\n        if (!listeners) {\n            return this;\n        }\n\n        // removing *all* events.\n        if (!(events || callback || context)) {\n            delete this.__events;\n            return this;\n        }\n\n        events = events ? utils.split(events) : utils.keys(listeners);\n\n        utils.forEach(events, function (event) {\n\n            let list = listeners[event];\n            if (!list) {\n                return;\n            }\n\n            // remove all event.\n            if (!(callback || context)) {\n                delete listeners[event];\n                return;\n            }\n\n            for (let i = list.length - 2; i >= 0; i -= 2) {\n                if (!(callback && list[i] !== callback ||\n                    context && list[i + 1] !== context)) {\n                    list.splice(i, 2);\n                }\n            }\n        });\n\n        return this;\n    }\n\n    trigger(eventName, ...args) {\n\n        let listeners = this.__events;\n        if (!listeners || !eventName) {\n            return null;\n        }\n\n        let pass = true;\n        let all  = listeners['*'];\n\n        utils.forEach(utils.split(eventName), function (event) {\n\n            let callbacks;\n\n            if (event !== '*') {\n                callbacks = listeners[event];\n                if (callbacks) {\n                    pass = triggerEvents(callbacks, args, this) && pass;\n                }\n            }\n\n            if (all) {\n                pass = triggerEvents(all, [event].concat(args), this) && pass;\n            }\n        }, this);\n\n        return pass;\n    }\n}\n\n\n// exports\n// -------\n\nexport default Events;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/common/Events.js\n **/","import * as utils from '../common/utils';\nimport Events     from '../common/Events';\nimport Cell       from '../cells/Cell';\nimport Terminal   from '../cells/Terminal';\n\nimport RootChange       from '../changes/RootChange';\nimport SizeChange       from '../changes/SizeChange';\nimport ChildChange      from '../changes/ChildChange';\nimport VisibleChange    from '../changes/VisibleChange';\nimport PositionChange   from '../changes/PositionChange';\nimport RotationChange   from '../changes/RotationChange';\nimport TerminalChange   from '../changes/TerminalChange';\nimport GeometryChange   from '../changes/GeometryChange';\nimport AttributeChange  from '../changes/AttributeChange';\nimport ChangeCollection from '../changes/ChangeCollection';\n\n\nclass Model extends Events {\n\n    constructor(root) {\n\n        super();\n\n        this.nextId       = 0;\n        this.updateLevel  = 0;\n        this.endingUpdate = false;\n\n        this.changes = new ChangeCollection(this);\n\n        if (root) {\n            this.setRoot(root);\n        } else {\n            this.clear();\n        }\n    }\n\n    clear() {\n\n        return this.setRoot(this.createRoot());\n    }\n\n    getDefaultParent() {\n\n        // the first layer\n        return this.getRoot().getChildAt(0);\n    }\n\n    isOrphan(cell) {\n\n        return cell && cell.isOrphan();\n    }\n\n    isAncestor(ancestor, descendant) {\n\n        return ancestor && ancestor.isAncestor(descendant);\n    }\n\n    contains(ancestor, descendant) {\n\n        if (!descendant) {\n            descendant = ancestor;\n            ancestor   = this.root;\n        }\n\n        return this.isAncestor(ancestor, descendant);\n    }\n\n    getAncestors(descendant) {\n\n        return descendant ? descendant.getAncestors() : [];\n    }\n\n    getDescendants(ancestor) {\n\n        return ancestor ? ancestor.getDescendants() : [];\n    }\n\n    getParents(/* cells */) {\n        /* FIXME\n         let parents = [];\n\n         if (cells) {\n\n         let hash = {};\n\n         forEach(cells, function (cell) {\n         let parent = cell.parent;\n\n         if (parent) {\n         let id = cellRoute.create(parent);\n\n         if (!hash[id]) {\n         hash[id] = parent;\n         parents.push(parent);\n         }\n         }\n         });\n         }\n\n         return parents;\n         */\n    }\n\n    getCellById(id) {\n\n        return this.cells ? this.cells[id] : null;\n    }\n\n    findCellAtPoint(localPoint) {\n\n        let result = [];\n\n        if (localPoint) {\n            this.eachCell(cell => {\n                if (this.isNode(cell)) {\n                    let rect = cell.getBBox();\n                    if (rect && rect.containsPoint(localPoint)) {\n                        result.push(cell);\n                    }\n                }\n            }, this);\n        }\n\n        return result;\n    }\n\n    findCellInArea(area) {\n\n        let result = [];\n\n        if (area) {\n            this.eachCell(cell => {\n                if (this.isNode(cell)) {\n                    let rect = cell.getBBox();\n                    if (rect && area.containsRect(rect)) {\n                        result.push(cell);\n                    }\n                }\n            }, this);\n        }\n\n        return result;\n    }\n\n    createCellId() {\n\n        let id = this.nextId;\n        this.nextId += 1;\n\n        return 'cell-' + id;\n    }\n\n\n    // root\n    // ----\n\n    isRoot(cell) {\n\n        return cell && this.root === cell;\n    }\n\n    createRoot() {\n\n        let root = new Cell();\n\n        root.insertChild(this.createLayer(), { silent: true });\n\n        return root;\n    }\n\n    getRoot(cell) {\n\n        let root = this.root;\n\n        while (cell) {\n            root = cell;\n            cell = cell.parent;\n        }\n\n        return root;\n    }\n\n    setRoot(root) {\n\n        return this.digest(new RootChange(this, root));\n    }\n\n    rootChanged(root) {\n\n        let prev = this.root;\n\n        this.root   = root;\n        this.cells  = null;\n        this.nextId = 0;\n        this.cellAdded(root);\n\n        return prev;\n    }\n\n\n    // Layers\n    // ------\n\n    isLayer(cell) {\n\n        return cell && this.isRoot(cell.parent);\n    }\n\n    getLayers() {\n\n        return this.getRoot().children || [];\n    }\n\n    createLayer() {\n\n        return new Cell();\n    }\n\n    eachLayer(iterator, context) {\n\n        return utils.forEach(this.getLayers(), iterator, context);\n    }\n\n\n    // cell\n    // ----\n\n    addNode(node, parent, index) {\n\n        return this.addCells([node], parent, index);\n    }\n\n    addLink(link, source, target, parent, index) {\n\n        return this.addCells([link], parent, index, source, target);\n    }\n\n    addCell(cell, parent, index, source, target) {\n\n        return this.addCells([cell], parent, index, source, target);\n    }\n\n    addCells(cells, parent, index, source, target) {\n\n        parent = parent || this.getDefaultParent();\n        index  = utils.fixIndex(index, parent.getChildCount());\n\n        this.beginUpdate();\n\n        try {\n            utils.forEach(cells, child => {\n                if (child) {\n                    if (child !== parent) {\n                        this.setParent(child, parent, index);\n                        index++;\n                    }\n\n                    source && this.setTerminal(child, source, true);\n                    target && this.setTerminal(child, target, false);\n                }\n            }, this);\n\n        } finally {\n            this.endUpdate();\n        }\n\n        return this;\n    }\n\n    removeCell(cell) {\n\n        if (cell) {\n            if (this.isRoot(cell)) {\n                this.setRoot(null);\n            } else if (this.getParent(cell)) {\n                this.digest(new ChildChange(this, cell, null));\n            }\n        }\n\n        return cell;\n    }\n\n    getParent(child) {\n\n        return child ? child.parent : null;\n    }\n\n    setParent(child, parent, index) {\n\n        if (child) {\n            if (parent) {\n                try {\n                    this.beginUpdate();\n                    this.digest(new ChildChange(this, child, parent, index));\n                } finally {\n                    this.endUpdate();\n                }\n            } else {\n                this.removeCell(child);\n            }\n        }\n        return this;\n    }\n\n    childChanged(child, parent, index) {\n\n        let previous = this.getParent(child);\n\n        if (parent) {\n            if (parent !== previous || previous.indexOfChild(child) !== index) {\n                // `insertChild` will firstly remove cell from previous parent\n                parent.insertChild(child, index, { silent: true });\n            }\n        } else if (previous) {\n            previous.removeChild(child, { silent: true });\n        }\n\n        if (parent) {\n            // check if the previous parent was already in the\n            // model and avoids calling cellAdded if it was.\n            if (!this.contains(previous)) {\n                this.cellAdded(child);\n            }\n        } else {\n            this.cellRemoved(child);\n        }\n\n        return previous;\n    }\n\n    // linkChanged(link, terminal, isSource) {\n    //\n    //    let prev = link.getTerminal(isSource);\n    //\n    //    if (terminal) {\n    //        terminal.addLink(link, isSource);\n    //    } else if (prev) {\n    //        prev.removeLink(link, isSource);\n    //    }\n    //\n    //    return prev;\n    // }\n\n    cellAdded(cell) {\n\n        // create an Id for the cell and map it\n\n        if (cell) {\n            // creates an Id for the cell if not Id exists\n            let id = cell.getId() || this.createCellId(cell);\n            if (id) {\n                let collision = this.getCellById(id);\n\n                if (collision !== cell) {\n                    // creates new Id for the cell as long as there is a collision\n                    while (collision) {\n                        id        = this.createCellId(cell);\n                        collision = this.getCellById(id);\n                    }\n\n                    // lazily creates the cells dictionary\n                    if (!this.cells) {\n                        this.cells = {};\n                    }\n\n                    cell.setId(id);\n                    this.cells[id] = cell;\n                }\n            }\n\n            // makes sure IDs of deleted cells are not reused\n            if (utils.isNumeric(id)) {\n                this.nextId = Math.max(this.nextId, id);\n            }\n\n            cell.setModel(this);\n            // recursively processes child cells\n            cell.eachChild(this.cellAdded, this);\n        }\n    }\n\n    cellRemoved(cell) {\n\n        if (cell) {\n            cell.eachChild(child => {\n                this.cellRemoved(child);\n            }, this);\n\n            let id = cell.getId();\n            if (this.cells && id) {\n                delete this.cells[id];\n            }\n\n            cell.setModel(null);\n        }\n    }\n\n    updateLinkParents(cell, root) {\n\n        // Updates the parent for all links that are connected to node\n\n        root = root || this.getRoot(cell);\n\n        // update links on children first\n        cell.eachChild(child => {\n            this.updateLinkParents(child, root);\n        }, this);\n\n        // update the parents of all connected links\n        cell.eachLink(link => {\n            // update edge parent if edge and child have\n            // a common root node (does not need to be the\n            // model root node)\n            if (this.isAncestor(root, link)) {\n                this.updateLinkParent(link, root);\n            }\n        }, this);\n    }\n\n    updateLinkParent(link, root) {\n\n        let that   = this;\n        let cell   = null;\n        let source = link.getTerminal(true);\n        let target = link.getTerminal(false);\n\n        // use the first non-relative descendants of the source terminal\n        while (source && !source.isLink() && source.geometry && source.geometry.relative) {\n            source = source.parent;\n        }\n\n        // use the first non-relative descendants of the target terminal\n        while (target && !target.isLink() && target.geometry && target.geometry.relative) {\n            target = target.parent;\n        }\n\n        if (that.isAncestor(root, source) && that.isAncestor(root, target)) {\n\n            if (source === target) {\n                cell = source.parent;\n            } else {\n                cell = that.getNearestCommonAncestor(source, target);\n            }\n\n            if (cell &&\n                (cell.parent !== that.viewport || that.isAncestor(cell, link)) &&\n                link.parent !== cell) {\n\n                let geo = link.geometry;\n\n                if (geo) {\n                    let origin1 = that.getOrigin(link.parent);\n                    let origin2 = that.getOrigin(cell);\n\n                    let dx = origin2.x - origin1.x;\n                    let dy = origin2.y - origin1.y;\n\n                    geo = geo.clone();\n                    geo.translate(-dx, -dy);\n                    that.setGeometry(link, geo);\n                }\n\n                that.add(cell, link);\n            }\n        }\n    }\n\n    getNearestCommonAncestor(/* cell1, cell2 */) {\n\n        /* FIXME\n         if (cell1 && cell2) {\n\n         let route1 = cellRoute.create(cell1);\n         let route2 = cellRoute.create(cell2);\n\n         if (route1 && route2) {\n\n         let cell = cell1;\n         let route = route2;\n         let current = route1;\n\n         if (route1.length > route2.length) {\n         cell = cell2;\n         route = route1;\n         current = route2;\n         }\n\n         while (cell) {\n         let parent = cell.parent;\n\n         // check if the cell path is equal to the beginning of the given cell path\n         if (route.indexOf(current + cellRoute.separator) === 0 && parent) {\n         return cell;\n         }\n\n         cell = parent;\n         current = cellRoute.getParentRoute(current);\n         }\n         }\n         }\n         */\n\n        return null;\n    }\n\n    eachCell(iterator, context) {\n\n        if (this.cells && iterator && utils.isFunction(iterator)) {\n            utils.forIn(this.cells, (cell, id) => {\n                iterator.call(context, cell, id);\n            });\n        }\n    }\n\n    filterCell(iterator, context) {\n\n        let result = [];\n\n        if (this.cells && iterator && utils.isFunction(iterator)) {\n            utils.forIn(this.cells, (cell, id) => {\n                if (iterator.call(context, cell, id)) {\n                    result.push(cell);\n                }\n            });\n        }\n\n        return result;\n    }\n\n    eachNode(iterator, context) {\n\n        let nodes = this.filterCell(cell => this.isNode(cell), this);\n\n        return utils.forEach(nodes, iterator, context);\n    }\n\n    eachLink(iterator, context) {\n\n        let links = this.filterCell(cell => this.isLink(cell), this);\n\n        return utils.forEach(links, iterator, context);\n    }\n\n    // children\n    // --------\n\n\n    getChildNodes(parent) {\n\n        return this.getChildCells(parent, true, false);\n    }\n\n    getChildLinks(parent) {\n\n        return this.getChildCells(parent, false, true);\n    }\n\n    eachChildNode(parent, iterator, context) {\n\n        utils.forEach(this.getChildNodes(parent), iterator, context);\n    }\n\n    eachChildLink(parent, iterator, context) {\n\n        utils.forEach(this.getChildLinks(parent), iterator, context);\n    }\n\n    getChildCells(parent, isNode, isLink) {\n\n        if (parent) {\n            return parent.filterChild(child => {\n                return (isNode && child.isNode()) || (isLink && child.isLink());\n            });\n        }\n\n        return [];\n    }\n\n    indexOfChild(cell, child) {\n\n        return cell ? cell.indexOfChild(child) : -1;\n    }\n\n    getChildAt(cell, index) {\n\n        return cell ? cell.getChildAt(index) : null;\n    }\n\n    getChildren(cell) {\n\n        return cell ? cell.children : null;\n    }\n\n    getChildCount(cell) {\n\n        return cell ? cell.getChildCount() : 0;\n    }\n\n\n    // node\n    // ----\n\n    isNode(cell) {\n\n        return cell ? cell.isNode() : false;\n    }\n\n    getLinkCount(cell) {\n\n        return cell ? cell.getLinkCount() : 0;\n    }\n\n    indexOfLink(cell, link) {\n\n        return cell ? cell.indexOfLink(link) : -1;\n    }\n\n    getLinkAt(cell, index) {\n\n        return cell ? cell.getLinkAt(index) : null;\n    }\n\n\n    // link\n    // ----\n\n    isLink(link) {\n\n        return link ? link.isLink() : false;\n    }\n\n    getTerminal(link, isSource) {\n\n        return link ? link.getTerminal(isSource) : null;\n    }\n\n    getTerminalNode(link, isSource) {\n\n        return link ? link.getTerminalNode(isSource) : null;\n    }\n\n    getTerminalPort(link, isSource) {\n\n        return link ? link.getTerminalPort(isSource) : null;\n    }\n\n    getTerminalPoint(link, isSource) {\n\n        return link ? link.getTerminalPoint(isSource) : null;\n    }\n\n    setTerminal(link, terminal, isSource) {\n\n        // fully replace the terminal\n\n        if (link) {\n            try {\n                this.beginUpdate();\n                this.digest(new TerminalChange(this, link, new Terminal(terminal), isSource));\n            } finally {\n                this.endUpdate();\n            }\n        }\n\n        return this;\n    }\n\n    setTerminalNode(link, node, isSource) {\n\n        if (link) {\n            this.setTerminal(link, node, isSource);\n        }\n\n        return this;\n    }\n\n    setTerminalPort(link, port, isSource) {\n\n        // partial replace the terminal port\n\n        if (link) {\n            let terminal = this.getTerminal(link, isSource);\n\n            terminal = terminal\n                ? terminal.duplicate({ port })\n                : new Terminal({ port });\n\n            this.setTerminal(link, terminal, isSource);\n        }\n\n        return this;\n    }\n\n    setTerminalPoint(link, point, isSource) {\n\n        if (link) {\n            this.setTerminal(link, point, isSource);\n        }\n\n        return this;\n    }\n\n    setTerminals(link, source, target) {\n\n        this.beginUpdate();\n\n        try {\n            this.setTerminal(link, source, true);\n            this.setTerminal(link, target, false);\n        } finally {\n            this.endUpdate();\n        }\n\n        return this;\n    }\n\n    removeFromTerminal(link, isSource) {\n\n        if (link) {\n            this.setTerminal(link, null, isSource);\n        }\n\n        return this;\n    }\n\n    terminalChanged(link, terminal, isSource) {\n\n        let prev = this.getTerminal(link, isSource);\n\n        if (terminal) {\n            terminal.addLink(link, isSource, { silent: true });\n        } else if (prev) {\n            prev.removeLink(link, isSource, { silent: true });\n        }\n\n        return prev;\n    }\n\n\n    // visible\n    // -------\n\n    isVisible(cell) {\n\n        return cell ? cell.isVisible() : false;\n    }\n\n    setVisible(cell, visible) {\n\n        if (cell && visible !== this.isVisible(cell)) {\n            try {\n                this.beginUpdate();\n                this.digest(new VisibleChange(this, cell, visible));\n            } finally {\n                this.endUpdate();\n            }\n        }\n\n        return this;\n    }\n\n    visibleChanged(cell, visible) {\n\n        let previous = this.isVisible(cell);\n\n        cell.setVisible(visible, { silent: true });\n\n        return previous;\n    }\n\n\n    // attribute\n    // ---------\n\n    getAttribute(cell) {\n\n        return cell ? cell.getAttribute() : null;\n    }\n\n    setAttribute(cell, attrs) {\n\n        if (cell) {\n            try {\n                this.beginUpdate();\n                this.digest(new AttributeChange(this, cell, attrs));\n            } finally {\n                this.endUpdate();\n            }\n        }\n\n        return this;\n    }\n\n    attributeChanged(cell, attrs) {\n\n        let previous = this.getAttribute(cell);\n\n        cell.setAttribute(attrs, { silent: true });\n\n        return previous;\n    }\n\n\n    // geometry\n    // --------\n\n    getPosition(cell, raw) {\n\n        return cell ? cell.getPosition(raw) : null;\n    }\n\n    setPosition(cell, position) {\n\n        if (cell && position) {\n\n            let previous = cell.getPosition(true) || {};\n\n            position.relative = position.relative === true;\n            previous.relative = previous.relative === true;\n\n            if (previous.x !== position.x ||\n                previous.y !== position.y ||\n                previous.relative !== position.relative) {\n\n                try {\n                    this.beginUpdate();\n                    this.digest(new PositionChange(this, cell, {\n                        x: position.x,\n                        y: position.y,\n                        relative: position.relative\n                    }));\n                } finally {\n                    this.endUpdate();\n                }\n            }\n        }\n\n        return this;\n    }\n\n    positionChanged(cell, position) {\n\n        let previous = cell.getPosition(true);\n\n        cell.setPosition(position, { silent: true });\n\n        return previous;\n    }\n\n    getSize(cell, raw) {\n\n        return cell ? cell.getSize(raw) : null;\n    }\n\n    setSize(cell, size) {\n\n        if (cell && size) {\n\n            let prev = cell.getSize(true) || {};\n\n            size.relative = size.relative === true;\n            prev.relative = prev.relative === true;\n\n            if (prev.width !== size.width ||\n                prev.height !== size.height ||\n                prev.relative !== size.relative) {\n\n                try {\n                    this.beginUpdate();\n                    this.digest(new SizeChange(this, cell, {\n                        width: size.width,\n                        height: size.height,\n                        relative: size.relative\n                    }));\n                } finally {\n                    this.endUpdate();\n                }\n            }\n        }\n\n        return this;\n    }\n\n    sizeChanged(cell, size) {\n\n        let previous = cell.getSize(true);\n\n        cell.setSize(size, { silent: true });\n\n        return previous;\n    }\n\n    getRotation(cell, raw) {\n\n        return cell ? cell.getRotation(raw) : null;\n    }\n\n    setRotation(cell, rotation) {\n\n        if (cell && rotation) {\n\n            let previous = cell.getRotation(true) || {};\n\n            rotation.relative = rotation.relative === true;\n            previous.relative = previous.relative === true;\n\n            if (previous.angle !== rotation.angle ||\n                previous.relative !== rotation.relative) {\n\n                try {\n                    this.beginUpdate();\n                    this.digest(new RotationChange(this, cell, {\n                        angle: rotation.angle,\n                        relative: rotation.relative\n                    }));\n                } finally {\n                    this.endUpdate();\n                }\n            }\n        }\n\n        return this;\n    }\n\n    rotationChanged(cell, rotation) {\n\n        let previous = cell.getRotation(true);\n\n        cell.setRotation(rotation, { silent: true });\n\n        return previous;\n    }\n\n    getGeometry(cell, raw) {\n\n        return cell ? cell.getGeometry(raw) : null;\n    }\n\n    setGeometry(cell, geom) {\n\n        if (cell && geom) {\n            try {\n                this.beginUpdate();\n                this.digest(new GeometryChange(this, cell, geom));\n            } finally {\n                this.endUpdate();\n            }\n        }\n\n        return this;\n    }\n\n    geometryChanged(cell, geom) {\n\n        let previous = cell.getGeometry(true) || {};\n\n        utils.forEach(['size', 'position', 'rotation'], key => {\n            if (geom[key]) {\n                this[key + 'Changed'](cell, geom[key]);\n            }\n        }, this);\n\n        return previous;\n    }\n\n    // update\n    // ------\n\n    digest(change) {\n\n        // take effect the change\n        change.digest();\n\n        this.beginUpdate();\n        this.changes.add(change);\n        this.endUpdate();\n\n        return this;\n    }\n\n    beginUpdate() {\n\n        this.updateLevel += 1;\n        this.trigger('beginUpdate');\n\n        if (this.updateLevel === 1) {\n            this.trigger('startEdit');\n        }\n    }\n\n    endUpdate() {\n\n        this.updateLevel -= 1;\n\n        if (this.updateLevel === 0) {\n            this.trigger('endEdit');\n        }\n\n        if (!this.endingUpdate) {\n\n            this.endingUpdate = this.updateLevel === 0;\n\n            let changes = this.changes;\n\n            this.trigger('endUpdate', changes.getChanges());\n\n            // TODO: 如果此时还没有和 paper 关联, 所有的 changes 都将失效, 还需要一种机制来管理\n            if (this.endingUpdate && changes.hasChange()) {\n                changes\n                    .notify()\n                    .clear();\n            }\n\n            this.endingUpdate = false;\n        }\n    }\n\n    destroy() {\n\n        utils.destroy(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Model;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Model.js\n **/","import Change from './Change';\n\nclass SizeChange extends Change {\n\n    constructor(model, cell, size) {\n\n        super();\n\n        this.model    = model;\n        this.cell     = cell;\n        this.size     = size;\n        this.previous = size;\n    }\n\n    digest() {\n\n        this.size     = this.previous;\n        this.previous = this.model.sizeChanged(this.cell, this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default SizeChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/SizeChange.js\n **/","import Change from './Change';\n\nclass PositionChange extends Change {\n\n    constructor(model, cell, position) {\n\n        super();\n\n        this.model    = model;\n        this.cell     = cell;\n        this.position = position;\n        this.previous = position;\n    }\n\n    digest() {\n\n        this.position = this.previous;\n        this.previous = this.model.positionChanged(this.cell, this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default PositionChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/PositionChange.js\n **/","import Change from './Change';\n\nclass RotationChange extends Change {\n\n    constructor(model, cell, rotation) {\n\n        super();\n\n        this.model    = model;\n        this.cell     = cell;\n        this.rotation = rotation;\n        this.previous = rotation;\n    }\n\n    digest() {\n\n        this.position = this.previous;\n        this.previous = this.model.rotationChanged(this.cell, this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default RotationChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/RotationChange.js\n **/","import Change from './Change';\n\n\nclass AttributeChange extends Change {\n\n    constructor(model, cell, attrs) {\n\n        super();\n\n        this.model    = model;\n        this.cell     = cell;\n        this.attrs    = attrs;\n        this.previous = attrs;\n    }\n\n    digest() {\n\n        this.attrs    = this.previous;\n        this.previous = this.model.attributeChanged(this.cell, this.previous);\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default AttributeChange;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/changes/AttributeChange.js\n **/","import * as utils from '../common/utils';\nimport vector     from '../common/vector';\nimport detector   from '../common/detector';\nimport Events     from '../common/Events';\nimport Rect       from '../geometry/Rect';\nimport Point      from '../geometry/Point';\n\nimport Model    from '../core/Model';\nimport Cell     from '../cells/Cell';\nimport LinkView from '../views/LinkView';\nimport NodeView from '../views/NodeView';\n\nimport RootChange      from '../changes/RootChange';\nimport ChildChange     from '../changes/ChildChange';\nimport SizeChange      from '../changes/SizeChange';\nimport VisibleChange   from '../changes/VisibleChange';\nimport PositionChange  from '../changes/PositionChange';\nimport RotationChange  from '../changes/RotationChange';\nimport TerminalChange  from '../changes/TerminalChange';\nimport GeometryChange  from '../changes/GeometryChange';\nimport AttributeChange from '../changes/AttributeChange';\n\n\n// const\n// -----\nconst win = window;\nconst doc = win.document;\n\nconst classNames = {\n    wrap: 'pane-wrap',\n    stage: 'pane-stage',\n    svg: 'pane-svg',\n    viewport: 'pane-viewport',\n    htmlPane: 'pane-html',\n    rawPane: 'pane-raw'\n};\n\n// the default options for paper\nconst defaultOptions = {\n    width: '100%',\n    height: '100%',\n    tx: 0,\n    ty: 0,\n    sx: 1,\n    sy: 1,\n    gridSize: 1,\n    container: null,\n    model: null,\n\n    // number of mouseMove events after which the\n    // pointerClick event will be still triggered.\n    clickThreshold: 0,\n    isValidEvent: null,\n    eventDelegate: null\n};\n\nlet idCounter = 0;\n\n\n// Paper\n// -----\n\nclass Paper extends Events {\n\n    constructor(options) {\n\n        super();\n\n        this.id = 'paper-' + idCounter++;\n\n        // You should call `init` manually when `options` is empty.\n        // That's useful when you want to listen life-cycle events.\n        if (options) {\n            this.init(options);\n        }\n    }\n\n\n    // events\n    // ------\n    //  - paper:configure\n    //  - paper:ensureElements\n    //  - paper:createPanes\n    //  - paper:setup\n    //  - paper:init\n    //  - paper:destroy\n    //  - paper:resize\n    //  - paper:scale\n    //  - paper:translate\n\n\n    configure(options) {\n\n        this.options = utils.merge({}, defaultOptions, options);\n        this.trigger('paper:configure', this.options);\n\n        return this;\n    }\n\n    init(options = {}) {\n\n        this.configure(options);\n        this.container = options.container;\n\n        if (!this.container) {\n            throw new Error('Initialize error: invalid container');\n        }\n\n        options = this.options;\n\n        this.ensureElement()\n            .createPanes()\n            .setup()\n            .resize(options.width, options.height)\n            .translate(options.tx, options.ty)\n            .scale(options.sx, options.sy)\n            .setModel(options.model);\n\n        this.trigger('paper:init', this.options);\n\n        return this;\n    }\n\n    ensureElement() {\n\n        this.wrap     = utils.createElement('div');\n        this.stage    = utils.createElement('div');\n        this.svg      = utils.createSvgDocument();\n        this.viewport = utils.createSvgElement('g');\n\n        utils.addClass(this.wrap, classNames.wrap);\n        utils.addClass(this.stage, classNames.stage);\n        utils.addClass(this.svg, classNames.svg);\n        utils.addClass(this.viewport, classNames.viewport);\n\n        this.svg.appendChild(this.viewport);\n        this.stage.appendChild(this.svg);\n        this.wrap.appendChild(this.stage);\n        this.container.appendChild(this.wrap);\n\n        this.trigger('paper:ensureElements');\n\n        return this;\n    }\n\n    getContainer() {\n\n        return this.container;\n    }\n\n    getWrap() {\n\n        return this.wrap;\n    }\n\n    getStage() {\n\n        return this.stage;\n    }\n\n    getSvg() {\n\n        return this.svg;\n    }\n\n    getViewport() {\n\n        return this.viewport;\n    }\n\n    createPanes() {\n\n        const viewport = this.viewport;\n        const stage    = this.stage;\n\n        this.backgroundPane = viewport.appendChild(utils.createSvgElement('g'));\n\n        // container of links\n        this.linkPane = viewport.appendChild(utils.createSvgElement('g'));\n\n        // container of nodes\n        this.drawPane = viewport.appendChild(utils.createSvgElement('g'));\n\n        // layer above the drawing pane, for controllers and handlers\n        this.controlPane = viewport.appendChild(utils.createSvgElement('g'));\n\n        // layer above the drawing pane and controller pane, for decorators\n        this.decoratePane = viewport.appendChild(utils.createSvgElement('g'));\n\n        // html pane for hold html element, with scale and translation\n        this.htmlPane = stage.appendChild(utils.createElement('div'));\n\n        utils.addClass(this.htmlPane, classNames.htmlPane);\n\n        // whithout scale and translation\n        this.rawPane = stage.appendChild(utils.createElement('div'));\n\n        utils.addClass(this.rawPane, classNames.rawPane);\n\n        this.trigger('paper:createPanes');\n\n        return this;\n    }\n\n    setup() {\n\n        let eventDelegate = this.options.eventDelegate;\n        if (utils.isFunction(eventDelegate)) {\n            eventDelegate = eventDelegate.call(this);\n        }\n\n        eventDelegate = eventDelegate || this.wrap;\n\n        utils.addEventListener(eventDelegate, 'contextmenu', this.onContextMenu.bind(this));\n        utils.addEventListener(eventDelegate, 'dblclick', this.onDblClick.bind(this));\n        utils.addEventListener(eventDelegate, 'click', this.onClick.bind(this));\n        utils.addEventListener(eventDelegate, 'mouseenter', '.pane-cell', this.onCellMouseEnter.bind(this));\n        utils.addEventListener(eventDelegate, 'mouseleave', '.pane-cell', this.onCellMouseLeave.bind(this));\n        utils.addEventListener(eventDelegate, 'mouseover', '.pane-cell', this.onCellMouseOver.bind(this));\n        utils.addEventListener(eventDelegate, 'mouseout', '.pane-cell', this.onCellMouseOut.bind(this));\n\n        utils.addEventListener(eventDelegate, detector.IS_TOUCH ? 'touchstart' : 'mousedown', this.onPointerDown.bind(this));\n\n        this.eventDelegate = eventDelegate;\n\n        // Hold the value when mouse has been moved: when mouse moved,\n        // no click event will be triggered.\n        this.mouseMoved = 0;\n\n        // Disables built-in pan and zoom in IE10 and later\n        if (detector.IS_POINTER) {\n            this.container.style.msTouchAction = 'none';\n        }\n\n        this.trigger('paper:setup');\n\n        return this;\n    }\n\n    getModel() {\n\n        return this.model;\n    }\n\n    setModel(model = new Model()) {\n\n        // one model can be used in different papers\n\n        this.model = model;\n        this.model.on('change', this.handleChanges, this);\n\n        this.reValidate();\n\n        return this;\n    }\n\n    destroy() {\n\n        this.trigger('paper:destroy');\n\n        utils.removeElement(this.wrap);\n\n        if (detector.IS_POINTER) {\n            this.container.style.msTouchAction = '';\n        }\n\n        let model = this.getModel();\n        if (model && !model.destroyed) {\n            model.destroy();\n        }\n\n        utils.destroy(this);\n    }\n\n    registerHandlers(handlers) {\n\n        handlers = utils.isArray(handlers) ? handlers : [handlers];\n\n        this.handlers      = this.handlers || [];\n        this.handlerByName = this.handlerByName || {};\n\n        utils.forEach(handlers, function (handler) {\n            if (this.handlerByName[handler.name]) {\n                throw new Error('handler with name \"' + handler.name + '\" is already registered');\n            }\n            // handler = utils.isFunction(handler) ? new handler(that) : handler;\n            this.handlers.push(handler);\n            this.handlerByName[handler.name] = handler;\n        }, this);\n\n        return this;\n    }\n\n\n    // transform\n    // ---------\n\n    resize(width, height, relative) {\n\n        if (!utils.isNil(width) && !utils.isNil(height)) {\n\n            let isPercent = utils.isPercentage(width);\n            if (isPercent) {\n                width = utils.toFloat(width, true) * this.container.clientWidth;\n            }\n\n            isPercent = utils.isPercentage(height);\n            if (isPercent) {\n                height = utils.toFloat(height, true) * this.container.clientHeight;\n            }\n\n            if (relative) {\n                width += utils.isNil(this.width) ? 0 : this.width;\n                height += utils.isNil(this.height) ? 0 : this.height;\n            }\n\n            width  = Math.round(width);\n            height = Math.round(height);\n\n            vector(this.svg).attr({\n                width,\n                height\n            });\n\n            utils.setStyle(this.stage, {\n                width: width + 'px',\n                height: height + 'px'\n            });\n\n            this.width  = width;\n            this.height = height;\n\n            this.trigger('paper:resize', width, height);\n        }\n\n        return this;\n    }\n\n    resizeTo(width, height) {\n\n        return this.resize(width, height, false);\n    }\n\n    resizeBy(width, height) {\n\n        return this.resize(width, height, true);\n    }\n\n    translate(tx, ty, relative) {\n\n        if (!utils.isNil(tx) && !utils.isNil(ty)) {\n\n            if (relative) {\n                tx += utils.isNil(this.tx) || 0;\n                ty += utils.isNil(this.ty) || 0;\n            }\n\n            vector(this.viewport).translate(tx, ty);\n\n            this.tx = tx;\n            this.ty = ty;\n\n            this.trigger('paper:translate', tx, ty);\n        }\n\n        return this;\n    }\n\n    translateTo(x, y) {\n\n        return this.translate(x, y, false);\n    }\n\n    translateBy(x, y) {\n\n        return this.translate(x, y, true);\n    }\n\n    scale(sx, sy, ox = 0, oy = 0) {\n\n        sy = sy || sx;\n\n        if (sx && sy) {\n\n            let vViewport = vector(this.viewport);\n\n            // remove previous transform so that the new scale is not affected\n            // by previous scales, especially the old translate() does not\n            // affect the new translate if an origin is specified.\n            vViewport.attr('transform', '');\n\n            let oldTx = this.tx;\n            let oldTy = this.ty;\n\n            if (ox || oy || oldTx || oldTy) {\n\n                let newTx = oldTx - ox * (sx - 1);\n                let newTy = oldTy - oy * (sy - 1);\n                this.translateTo(newTx, newTy);\n            }\n\n            vViewport.scale(sx, sy);\n\n            this.sx = sx;\n            this.sy = sy;\n\n            this.trigger('paper:scale', sx, sy, ox, oy);\n        }\n\n        return this;\n    }\n\n    getContentBBox(withoutTransformations) {\n\n        if (withoutTransformations) {\n\n            return vector(this.viewport).getBBox(true, this.svg);\n        }\n\n        let rect = this.viewport.getBoundingClientRect();\n\n        // Using Screen CTM was the only way to get the real viewport\n        // bounding box working in both Google Chrome and Firefox.\n        let screenCTM = this.viewport.getScreenCTM();\n\n        // for non-default origin we need to take the\n        // viewport translation into account\n        let viewportCTM = this.viewport.getCTM();\n\n        return Rect.fromRect({\n            x: rect.left - screenCTM.e + viewportCTM.e,\n            y: rect.top - screenCTM.f + viewportCTM.f,\n            width: rect.width,\n            height: rect.height\n        });\n    }\n\n    fitToContent(frameWidth, frameHeight, padding, options) {\n\n        // Expand/shrink the paper to fit the content. Snap the width/height to\n        // the grid defined in `gridWidth`, `gridHeight`. `padding` adds to the\n        // resulting width/height of the paper.\n\n        if (utils.isObject(frameWidth)) {\n\n            options     = frameWidth;\n            padding     = options.padding || 0;\n            frameWidth  = options.frameWidth || 1;\n            frameHeight = options.frameHeight || 1;\n\n        } else {\n\n            options     = options || {};\n            padding     = padding || 0;\n            frameWidth  = frameWidth || 1;\n            frameHeight = frameHeight || 1;\n        }\n\n        padding = utils.normalizeSides(padding);\n\n        // get the content boundary\n        let cBounds = this.getContentBBox(true);\n\n        cBounds.x *= this.sx;\n        cBounds.y *= this.sy;\n        cBounds.width *= this.sx;\n        cBounds.height *= this.sy;\n\n        let width  = utils.snapToGrid(cBounds.width + cBounds.x || 1, frameWidth, 'ceil');\n        let height = utils.snapToGrid(cBounds.height + cBounds.y || 1, frameHeight, 'ceil');\n\n        let tx = this.tx;\n        let ty = this.ty;\n\n        function needTranslate(val) {\n\n            return !options.allowNewOrigin\n                || options.allowNewOrigin === 'any'\n                || (options.allowNewOrigin === 'negative' && val < 0)\n                || (options.allowNewOrigin === 'positive' && val >= 0);\n        }\n\n        if (needTranslate(cBounds.x)) {\n\n            tx = Math.ceil(-cBounds.x / frameWidth) * frameWidth;\n            tx += padding.left;\n            width += tx;\n        }\n\n        if (needTranslate(cBounds.y)) {\n\n            ty = Math.ceil(-cBounds.y / frameHeight) * frameHeight;\n            ty += padding.top;\n            height += ty;\n        }\n\n        width += padding.right;\n        height += padding.bottom;\n\n        width  = utils.clamp(width, options.minWidth || 0, options.maxWidth || Number.MAX_VALUE);\n        height = utils.clamp(height, options.minHeight || 0, options.maxHeight || Number.MAX_VALUE);\n\n        let sizeChanged   = width !== this.width || height !== this.height;\n        let originChanged = tx !== this.tx || ty !== this.ty;\n\n        if (originChanged) {\n            this.translate(tx, ty);\n        }\n\n        if (sizeChanged) {\n            this.resize(width, height);\n        }\n\n        return sizeChanged || originChanged;\n    }\n\n    scaleContentToFit(options = {}) {\n\n        let contentBBox = this.getContentBBox(true);\n\n        if (!contentBBox.width || !contentBBox.height) {\n            return this;\n        }\n\n        options = utils.merge({\n            padding: 0,\n            minScale: null,\n            maxScale: null,\n            scaleGrid: null,\n            preserveAspectRatio: true,\n            // minScaleX,\n            // minScaleY,\n            // maxScaleX,\n            // maxScaleY,\n            // fittingBBox\n        }, options);\n\n\n        let padding     = utils.normalizeSides(options.padding);\n        let fittingBBox = options.fittingBBox;\n\n        if (!fittingBBox) {\n            fittingBBox = {\n                x: this.tx,\n                y: this.ty,\n                width: this.width,\n                height: this.height\n            };\n        }\n\n        fittingBBox = Rect.fromRect(fittingBBox).moveAndExpand({\n            x: padding.left,\n            y: padding.top,\n            width: -(padding.left + padding.right),\n            height: -(padding.top + padding.bottom)\n        });\n\n\n        let sx = fittingBBox.width / contentBBox.width;\n        let sy = fittingBBox.height / contentBBox.height;\n\n        // snap scale to a grid\n        let scaleGrid = options.scaleGrid;\n        if (scaleGrid) {\n            sx = utils.snapToGrid(sx, scaleGrid, 'floor');\n            sy = utils.snapToGrid(sy, scaleGrid, 'floor');\n        }\n\n        // scale min/max boundaries\n        let minScaleX = options.minScaleX || options.minScale;\n        let maxScaleX = options.maxScaleX || options.maxScale;\n        let minScaleY = options.minScaleY || options.minScale;\n        let maxScaleY = options.maxScaleY || options.maxScale;\n\n        sx = utils.clamp(sx, minScaleX, maxScaleX);\n        sy = utils.clamp(sy, minScaleY, maxScaleY);\n\n        if (options.preserveAspectRatio) {\n            sx = sy = Math.min(sx, sy);\n        }\n\n        this.scale(sx, sy);\n\n        contentBBox = this.getContentBBox(true);\n\n        let tx = fittingBBox.x - contentBBox.x;\n        let ty = fittingBBox.y - contentBBox.y;\n\n        this.translateTo(tx, ty);\n\n        return this;\n    }\n\n    // validate\n    // --------\n\n    reValidate() {\n\n        return this\n            .invalidate()\n            .validate();\n    }\n\n    clear(cell = this.model.getRoot(), force = false, recurse = true) {\n\n        this.removeView(cell);\n\n        if (recurse && (force || cell !== this.currentRoot)) {\n            cell.eachChild(function (child) {\n                this.clear(child, force, recurse);\n            }, this);\n        } else {\n            this.invalidate(cell, true, true);\n        }\n\n        return this;\n    }\n\n    invalidate(cell = this.model.getRoot(), recurse = true, includeLink = true) {\n\n        let view = this.getView(cell);\n        if (view) {\n            view.invalid = true;\n        }\n\n        if (!cell.invalidating) {\n\n            cell.invalidating = true;\n\n            if (recurse) {\n                cell.eachChild(function (child) {\n                    this.invalidate(child, recurse, includeLink);\n                }, this);\n            }\n\n            if (includeLink) {\n                cell.eachLink(function (link) {\n                    this.invalidate(link, recurse, includeLink);\n                }, this);\n            }\n\n            cell.invalidating = false;\n        }\n\n        return this;\n    }\n\n    validate(cell = this.model.getRoot()) {\n\n        return this\n            .validateCell(cell)\n            .validateView(cell);\n    }\n\n    validateCell(cell, visible = true) {\n\n        // create or remove view for cell\n        if (cell) {\n\n            visible = visible && cell.isVisible();\n\n            let view = this.getView(cell, visible);\n            if (view && !visible) {\n                this.removeView(cell, false, false);\n            }\n\n            cell.eachChild(function (child) {\n                this.validateCell(child, visible);\n            }, this);\n        }\n\n        return this;\n    }\n\n    validateView(cell, recurse = true) {\n\n        if (cell) {\n            let view = this.getView(cell);\n            if (view) {\n                if (view.invalid) {\n                    this.validateView(cell.getParent(), false)\n                        .updateNodeGeometry(cell)\n                        .renderView(cell);\n\n                    view.invalid = false;\n                }\n            }\n\n            if (recurse) {\n                cell.eachChild(function (child) {\n                    this.validateView(child, recurse);\n                }, this);\n            }\n        }\n\n        return this;\n    }\n\n    updateNodeGeometry(node) {\n        // update the node's geometry\n        if (node && node.isNode()) {\n            this.updateNodeSize(node)\n                .updateNodePosition(node)\n                .updateNodeRotation(node);\n        }\n\n        return this;\n    }\n\n    updateNodeSize(node) {\n\n        // only update the node's size\n        if (node && node.isNode()) {\n\n            let size   = node.metadata.size || {};\n            let width  = !utils.isUndefined(size.width) ? size.width : 1;\n            let height = !utils.isUndefined(size.height) ? size.height : 1;\n\n            let parent = node.parent;\n\n            if (size.relative && parent && parent.isNode()) {\n\n                let parentSize = parent.size;\n                let isPercent  = utils.isPercentage(width);\n\n                width = utils.fixNumber(width, isPercent, 0);\n\n                if (isPercent || width > 0 && width < 1) {\n                    width *= parentSize.width;\n                } else {\n                    width += parentSize.width;\n                }\n\n                isPercent = utils.isPercentage(height);\n                height    = utils.fixNumber(height, isPercent, 0);\n\n                if (isPercent || height > 0 && height < 1) {\n                    height *= parentSize.height;\n                } else {\n                    height += parentSize.height;\n                }\n\n            } else {\n                width  = utils.fixNumber(width, false, 1);\n                height = utils.fixNumber(height, false, 1);\n            }\n\n            // update size attribute of node\n            node.size = {\n                width: Math.max(width, 1),\n                height: Math.max(height, 1)\n            };\n        }\n\n        return this;\n    }\n\n    updateNodePosition(node) {\n\n        if (node && node.isNode()) {\n\n            let pos = node.metadata.position || {};\n            let x   = !utils.isUndefined(pos.x) ? pos.x : 0;\n            let y   = !utils.isUndefined(pos.y) ? pos.y : 0;\n\n            let parent = node.parent;\n\n            if (pos.relative && parent && parent.isNode()) {\n\n                let parentPos  = parent.position;\n                let parentSize = parent.size;\n\n                let isPercent = utils.isPercentage(x);\n\n                x = utils.fixNumber(x, isPercent, 0);\n\n                if (isPercent || x > -1 && x < 1) {\n                    x = parentPos.x + parentSize.width * x;\n                } else {\n                    x += parentPos.x;\n                }\n\n                isPercent = utils.isPercentage(y);\n\n                y = utils.fixNumber(y, isPercent, 0);\n\n                if (isPercent || y > -1 && y < 1) {\n                    y = parentPos.y + parentSize.height * y;\n                } else {\n                    y += parentPos.y;\n                }\n\n            } else {\n                x = utils.fixNumber(x, false, 0);\n                y = utils.fixNumber(y, false, 0);\n            }\n\n            node.position = this.snapToGrid({ x, y }, true);\n        }\n\n\n        return this;\n    }\n\n    updateNodeRotation(node) {\n\n        if (node && node.isNode()) {\n\n            let raw    = node.metadata.rotation || {};\n            let angle  = utils.fixNumber(raw.angle, false, 0);\n            let parent = node.parent;\n\n            if (raw.inherited && parent && parent.isNode() && parent.rotation !== 0) {\n\n                // update node's position\n                let pos    = node.position;\n                let size   = node.size;\n                let center = new Point(pos.x + size.width / 2, pos.y + size.height / 2);\n\n                let parentPos    = parent.position;\n                let parentSize   = parent.size;\n                let parentCenter = new Point(parentPos.x + parentSize.width / 2, parentPos.y + parentSize.height / 2);\n\n                // angle is according to the clockwise\n                center.rotate(parentCenter, -parent.rotation);\n\n                // move the node to the new position\n                pos.x = center.x - size.width / 2;\n                pos.y = center.y - size.height / 2;\n\n                angle += parent.rotation;\n            }\n\n            node.rotation = angle;\n        }\n\n        return this;\n    }\n\n\n    // view\n    // ----\n\n    getView(cell, create) {\n\n        if (cell) {\n            let view = this.getViewById(cell.id);\n            if (!view && create && cell.isVisible()) {\n                view = this.createView(cell);\n            }\n\n            return view;\n        }\n    }\n\n    getViewById(cellId) {\n\n        return this.views ? this.views[cellId] : null;\n    }\n\n    eachView(iterator, context) {\n\n        return utils.forIn(this.views, iterator, context);\n    }\n\n    getTerminalView(link, isSource) {\n\n        let terminal = this.model.getTerminal(link, isSource);\n\n        return terminal && terminal.node ? this.getView(terminal.node) : null;\n    }\n\n    createView(cell) {\n\n        if (cell) {\n\n            let View = cell.metadata.view;\n            if (!View) {\n                View = cell.isLink() ? LinkView\n                    : cell.isNode() ? NodeView\n                    : null;\n            }\n\n            if (View) {\n\n                let view = new View(this, cell);\n\n                if (!this.views) {\n                    this.views = {};\n                }\n\n                this.views[cell.id] = view;\n\n                return view;\n            }\n        }\n\n        return null;\n    }\n\n    removeView(cell, recurse = true, includeLink = true) {\n\n        if (cell) {\n\n            if (recurse) {\n                cell.eachChild(function (child) {\n                    this.removeView(child, recurse, includeLink);\n                }, this);\n            }\n\n            if (includeLink) {\n                cell.eachLink(function (link) {\n                    this.removeView(link, recurse, includeLink);\n                }, this);\n            }\n\n            let view = this.getView(cell);\n            if (view) {\n                delete this.views[cell.id];\n                view.destroy();\n            }\n        }\n\n        return this;\n    }\n\n    renderView(cell) {\n\n        let view = this.getView(cell);\n        if (view) {\n            if (cell.isLink() && !this.canRenderLink(cell)) {\n                this.removeView(cell);\n            } else {\n                view.render();\n            }\n        }\n\n        return this;\n    }\n\n    canRenderLink(link) {\n\n        let sourceNode = link.getTerminalNode(true);\n        let targetNode = link.getTerminalNode(false);\n\n        // unVisible or do not in the paper(view is null)\n        if (sourceNode && (!sourceNode.isVisible() || !this.getView(sourceNode))) {\n            return false;\n        }\n\n        if (targetNode && (!targetNode.isVisible() || !this.getView(targetNode))) {\n            return false;\n        }\n\n        return (sourceNode || link.getTerminalPoint(true))\n            && (targetNode || link.getTerminalPoint(false));\n    }\n\n    findViewByElem(elem) {\n\n        if (this.views) {\n\n            elem = utils.isString(elem)\n                ? this.svg.querySelector(elem)\n                : elem;\n\n            while (elem && elem !== this.svg && elem !== document) {\n\n                let cellId = elem.cellId;\n                if (cellId) {\n                    return this.views[cellId];\n                }\n\n                elem = elem.parentNode;\n            }\n        }\n\n        return null;\n    }\n\n    findViewByCell(cell) {\n\n        return utils.isString(cell)\n            ? this.getViewById(cell)\n            : this.getView(cell);\n    }\n\n    findViewByPoint(/* point */) {\n\n    }\n\n    findViewsInArea(/* rect */) {\n\n    }\n\n\n    // changes\n    // -------\n\n    handleChanges(changes) {\n\n        utils.forEach(changes, function (change) {\n            this.distributeChange(change);\n        }, this);\n\n        this.validate();\n\n        return this;\n    }\n\n    distributeChange(change) {\n\n        if (change instanceof RootChange) {\n\n            this.onRootChanged(change);\n\n        } else if (change instanceof ChildChange) {\n\n            this.onChildChanged(change);\n\n        } else if (change instanceof VisibleChange) {\n\n            this.onVisibleChange(change);\n\n        } else if (change instanceof TerminalChange) {\n\n            this.onTerminalChange(change);\n\n        } else if (change instanceof SizeChange) {\n\n            this.onSizeChange(change);\n\n        } else if (change instanceof PositionChange) {\n\n            this.onPositionChange(change);\n\n        } else if (change instanceof RotationChange) {\n\n            this.onRotationChange(change);\n\n        } else if (change instanceof AttributeChange) {\n\n            this.onAttributeChange(change);\n        } else if (change instanceof GeometryChange) {\n\n            this.onGeometryChange(change);\n        }\n\n        return this;\n    }\n\n    onRootChanged(change) {\n\n        if (change.viewport) {\n            this.invalidate(change.viewport, true, true);\n        }\n\n        if (change.previous) {\n            this.removeView(change.previous, true, true);\n        }\n    }\n\n    onChildChanged(change) {\n\n        let newParent = change.parent;\n        let oldParent = change.previous;\n\n        this.invalidate(change.child, true, true);\n\n        if (!newParent) {\n            this.removeView(change.child, true, true);\n        }\n\n        if (newParent !== oldParent) {\n            newParent && this.invalidate(newParent, false, false);\n            oldParent && this.invalidate(oldParent, false, false);\n        }\n    }\n\n    onVisibleChange(change) {\n\n        this.invalidate(change.cell, true, true);\n    }\n\n    onTerminalChange(change) {\n\n        this.invalidate(change.link, true, true);\n    }\n\n    onSizeChange(change) {\n\n        this.invalidate(change.cell, true, true);\n    }\n\n    onPositionChange(change) {\n\n        this.invalidate(change.cell, true, true);\n    }\n\n    onRotationChange(change) {\n\n        this.invalidate(change.cell, true, true);\n    }\n\n    onAttributeChange(change) {\n\n        this.invalidate(change.cell, true, true);\n    }\n\n    onGeometryChange(change) {\n\n        this.invalidate(change.cell, true, true);\n    }\n\n\n    // router\n    // ------\n\n    static registerRouter(name, fn) {\n\n        if (!this.router) {\n            this.router = {};\n        }\n\n        this.router[name] = fn;\n\n        return this;\n    }\n\n    static getRouter(name) {\n\n        return this.router ? this.router[name] : null;\n    }\n\n    getRouter(name) {\n\n        return this.constructor.getRouter(name);\n    }\n\n\n    // connector\n    // ---------\n\n    static registerConnector(name, fn) {\n\n        if (!this.connectors) {\n            this.connectors = {};\n        }\n\n        this.connectors[name] = fn;\n\n        return this;\n    }\n\n    static getConnector(name) {\n\n        return this.connectors ? this.connectors[name] : null;\n    }\n\n    getConnector(name) {\n\n        return this.constructor.getConnector(name);\n    }\n\n\n    // marker\n    // ------\n\n    static registerMarker(name, fn) {\n\n        if (!this.markers) {\n            this.markers = {};\n        }\n\n        this.markers[name] = fn;\n\n        return this;\n    }\n\n    static getMarker(name) {\n\n        return this.markers ? this.markers[name] : null;\n    }\n\n    getMarker(name) {\n\n        return this.constructor.getMarker(name);\n    }\n\n\n    // events\n    // ------\n\n    isValidEvent(e, view) {\n\n        // If the event is interesting, guard returns `true`.\n        // Otherwise, return `false`.\n\n        if (this.options.isValidEvent && !this.options.isValidEvent(e, view)) {\n            return false;\n        }\n\n        if (view && view.cell && view.cell instanceof Cell) {\n            return true;\n        }\n\n\n        let delegate = this.eventDelegate;\n        let target   = e.target;\n\n        if (delegate === target || utils.containsElement(delegate, target)) {\n            return true;\n        }\n    }\n\n    onContextMenu(e) {\n\n        e = utils.normalizeEvent(e);\n\n        let view = this.findViewByElem(e.target);\n\n        if (!this.isValidEvent(e, view)) {\n            return;\n        }\n\n        let localPoint = this.snapToGrid({\n            x: e.clientX,\n            y: e.clientY\n        });\n\n        if (view) {\n            this.trigger('cell:contextmenu', view.cell, view, e, localPoint.x, localPoint.y);\n        } else {\n            this.trigger('blank:contextmenu', e, localPoint.x, localPoint.y);\n        }\n    }\n\n    onDblClick(e) {\n\n        e.preventDefault();\n        e = utils.normalizeEvent(e);\n\n        let view = this.findViewByElem(e.target);\n\n        if (!this.isValidEvent(e, view)) {\n            return;\n        }\n\n        let localPoint = this.snapToGrid({\n            x: e.clientX,\n            y: e.clientY\n        });\n\n        if (view) {\n            this.trigger('cell:dblclick', view.cell, view, e, localPoint.x, localPoint.y);\n        } else {\n            this.trigger('blank:dblclick', e, localPoint.x, localPoint.y);\n        }\n    }\n\n    onClick(e) {\n\n        if (this.mouseMoved <= this.options.clickThreshold) {\n\n            e = utils.normalizeEvent(e);\n\n            let view = this.findViewByElem(e.target);\n\n            if (!this.isValidEvent(e, view)) {\n                return;\n            }\n\n            let localPoint = this.snapToGrid({\n                x: e.clientX,\n                y: e.clientY\n            });\n\n            if (view) {\n                this.trigger('cell:click', view.cell, view, e, localPoint.x, localPoint.y);\n            } else {\n                this.trigger('blank:click', e, localPoint.x, localPoint.y);\n            }\n        }\n    }\n\n    onCellMouseOver(e) {\n\n        this.onCellHover(e, 'mouseover');\n    }\n\n    onCellMouseOut(e) {\n\n        this.onCellHover(e, 'mouseout');\n    }\n\n    onCellMouseEnter(e) {\n\n        this.onCellHover(e, 'mouseenter');\n    }\n\n    onCellMouseLeave(e) {\n\n        this.onCellHover(e, 'mouseleave');\n    }\n\n    onCellHover(e, eventName) {\n\n        e = utils.normalizeEvent(e);\n\n        let view = this.findViewByElem(e.target);\n\n        if (!this.isValidEvent(e, view)) {\n            return;\n        }\n\n        let localPoint = this.snapToGrid({\n            x: e.clientX,\n            y: e.clientY\n        });\n\n        this.trigger('cell:' + eventName, view.cell, view, e, localPoint.x, localPoint.y);\n    }\n\n    onPointerDown(e) {\n\n        e = utils.normalizeEvent(e);\n\n        if (!utils.isLeftMouseButton(e)) {\n            return;\n        }\n\n        let view = this.findViewByElem(e.target);\n\n        if (!this.isValidEvent(e, view)) {\n            return;\n        }\n\n        e.preventDefault();\n        this.mouseMoved = 0;\n\n        let localPoint = this.snapToGrid({\n            x: e.clientX,\n            y: e.clientY\n        });\n\n        if (view) {\n            this.sourceView = view;\n            this.trigger('cell:pointerDown', view.cell, view, e, localPoint.x, localPoint.y);\n        } else {\n            this.trigger('blank:pointerDown', e, localPoint.x, localPoint.y);\n        }\n\n        this.onMouseMoveHandler = this.onMouseMoveHandler || this.onPointerMove.bind(this);\n        this.onMouseUpHandler   = this.onMouseUpHandler || this.onPointerUp.bind(this);\n\n        utils.addEventListener(doc, detector.IS_TOUCH ? 'touchmove' : 'mousemove', this.onMouseMoveHandler);\n        utils.addEventListener(doc, detector.IS_TOUCH ? 'touchend' : 'mouseup', this.onMouseUpHandler);\n    }\n\n    onPointerMove(e) {\n\n        e.preventDefault();\n        e = utils.normalizeEvent(e);\n\n        let localPoint = this.snapToGrid({\n            x: e.clientX,\n            y: e.clientY\n        });\n\n        let sourceView = this.sourceView;\n        if (sourceView) {\n            this.mouseMoved++;\n            this.trigger('cell:pointerMove', sourceView.cell, sourceView, e, localPoint.x, localPoint.y);\n        } else {\n            this.trigger('blank:pointerMove', e, localPoint.x, localPoint.y);\n        }\n    }\n\n    onPointerUp(e) {\n\n        e = utils.normalizeEvent(e);\n\n        let localPoint = this.snapToGrid({\n            x: e.clientX,\n            y: e.clientY\n        });\n\n        let sourceView = this.sourceView;\n        if (sourceView) {\n            this.trigger('cell:pointerUp', sourceView.cell, sourceView, e, localPoint.x, localPoint.y);\n            this.sourceView = null;\n        } else {\n            this.trigger('blank:pointerUp', e, localPoint.x, localPoint.y);\n        }\n\n        utils.removeEventListener(doc, detector.IS_TOUCH ? 'touchmove' : 'mousemove', this.onMouseMoveHandler);\n        utils.removeEventListener(doc, detector.IS_TOUCH ? 'touchend' : 'mouseup', this.onMouseUpHandler);\n    }\n\n\n    // utils\n    // -----\n\n    snapToGrid(point, isLocal) {\n\n        // Convert global coordinates to the local ones of the `drawPane`.\n        // Otherwise, improper transformation would be applied when the\n        // drawPane gets transformed (scaled/rotated).\n        let gridSize = this.options.gridSize || 1;\n\n        if (!isLocal) {\n            point = vector(this.drawPane).toLocalPoint(point.x, point.y);\n        }\n\n        return {\n            x: utils.snapToGrid(point.x, gridSize),\n            y: utils.snapToGrid(point.y, gridSize)\n        };\n    }\n\n    toLocalPoint(point) {\n\n        let svg      = this.svg;\n        let svgPoint = svg.createSVGPoint();\n\n        svgPoint.x = point.x;\n        svgPoint.y = point.y;\n\n        // This is a hack for Firefox! If there wasn't a fake (non-visible)\n        // rectangle covering the whole SVG area, the `$(paper.svg).offset()`\n        // used below won't work.\n        let fakeRect;\n        if (detector.IS_FF) {\n            fakeRect = vector('rect', {\n                width: this.options.width,\n                height: this.options.height,\n                x: 0,\n                y: 0,\n                opacity: 0\n            });\n            svg.appendChild(fakeRect.node);\n        }\n\n        let paperOffset = utils.getOffset(svg);\n\n        if (detector.IS_FF) {\n            fakeRect.remove();\n        }\n\n        let body       = doc.body;\n        let docElem    = doc.documentElement;\n        let scrollTop  = body.scrollTop || docElem.scrollTop;\n        let scrollLeft = body.scrollLeft || docElem.scrollLeft;\n\n        svgPoint.x += scrollLeft - paperOffset.left;\n        svgPoint.y += scrollTop - paperOffset.top;\n\n        // Transform point into the viewport coordinate system.\n        let result = svgPoint.matrixTransform(this.drawPane.getCTM().inverse());\n\n        return Point.fromPoint(result);\n    }\n\n    toLocalRect(rect) {\n\n        let origin = this.toLocalPoint({\n            x: rect.x,\n            y: rect.y\n        });\n        let corner = this.toLocalPoint({\n            x: rect.x + rect.width,\n            y: rect.y + rect.height\n        });\n\n        return new Rect(origin.x, origin.y, corner.x - origin.x, corner.y - origin.y);\n    }\n}\n\n\n// exports\n// -------\n\nexport default Paper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Paper.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport      Point from '../geometry/Point';\nimport VectorView from '../views/VectorView';\n\n\nclass LinkView extends VectorView {\n\n    render() {\n\n        this.vel.empty();\n\n        this.renderMarkup()\n            .update();\n\n        return this;\n    }\n\n    update() {\n\n        this.cache = {};\n\n        return this\n            .parseRouter()\n            .parseConnector()\n            .parseTerminal(true)\n            .parseTerminal(false)\n            .updateMarker()\n            .updateConnector()\n            .updateAttributes();\n    }\n\n    updateAttributes(attrs) {\n\n        utils.forIn(attrs || this.cell.attrs, function (attrMap, selector) {\n\n            let processed = [];\n\n            if (utils.isObject(attrMap.fill)) {\n                this.applyGradient(selector, 'fill', attrMap.fill);\n                processed.push('fill');\n            }\n\n            if (utils.isObject(attrMap.stroke)) {\n                this.applyGradient(selector, 'stroke', attrMap.stroke);\n                processed.push('stroke');\n            }\n\n            if (utils.isObject(attrMap.filter)) {\n                this.applyFilter(selector, attrMap.filter);\n                processed.push('filter');\n            }\n\n            // remove processed attributes from attrs\n            let normal = {};\n\n            utils.forIn(attrMap, function (value, key) {\n                if (!utils.contains(processed, key)) {\n                    normal[key] = value;\n                }\n            });\n\n            this.applyAttr(selector, normal);\n        }, this);\n\n        return this;\n    }\n\n    parseRouter() {\n\n        // convert vertices to router points\n        let link     = this.cell;\n        let router   = link.getRouter();\n        let vertices = utils.filter(link.vertices || [], function (p) {\n            return Point.isPointLike(p);\n        });\n\n        vertices = utils.map(vertices, function (p) {\n            return Point.fromPoint(p);\n        });\n\n        let parser = router.parse && utils.isFunction(router.parse)\n            ? router.parse\n            : router.name && this.paper.getRouter(router.name);\n\n        // parsed vertices\n        let routerPoints = parser && utils.isFunction(parser)\n            ? parser.call(this, vertices, router.options || {})\n            : vertices;\n\n        this.cacheRouterPoints(routerPoints);\n\n        return this;\n    }\n\n    parseConnector() {\n\n        let link         = this.cell;\n        let connector    = link.getConnector();\n        let sourceMarker = link.getMarker(true);\n        let targetMarker = link.getMarker(false);\n\n        let connectorStrokeWidth    = this.getStrokeWidth(connector.selector);\n        let sourceMarkerStrokeWidth = this.getStrokeWidth(sourceMarker.selector);\n        let targetMarkerStrokeWidth = this.getStrokeWidth(targetMarker.selector);\n\n        // update stroke width to marker options\n        let sourceMarkerOptions = sourceMarker.options;\n        if (!sourceMarkerOptions) {\n            sourceMarkerOptions = sourceMarker.options = {};\n        }\n\n        sourceMarkerOptions.connectorStrokeWidth = connectorStrokeWidth;\n        sourceMarkerOptions.markerStrokeWidth    = sourceMarkerStrokeWidth;\n\n        let targetMarkerOptions = targetMarker.options;\n        if (!targetMarkerOptions) {\n            targetMarkerOptions = targetMarker.options = {};\n        }\n\n        targetMarkerOptions.connectorStrokeWidth = connectorStrokeWidth;\n        targetMarkerOptions.markerStrokeWidth    = targetMarkerStrokeWidth;\n\n        // cache\n        this.cacheConnector(connector);\n        this.cacheMarker(sourceMarker, true);\n        this.cacheMarker(targetMarker, false);\n\n        return this;\n    }\n\n    parseTerminal(isSource) {\n\n        let link  = this.cell;\n        let point = link.getTerminalPoint(isSource);\n        let node  = link.getTerminalNode(isSource);\n        let view  = node && this.paper.getView(node);\n        let port  = link.getTerminalPort(isSource);\n\n        this.cacheStaticConnPoint(point, isSource);\n        this.cacheTerminalView(view, isSource);\n        this.cacheTerminalPort(port, isSource);\n\n        return this;\n    }\n\n    updateMarker() {\n\n        return this\n            .renderMarker(true)\n            .renderMarker(false)\n            .updateConnectionPoint(true)\n            .updateConnectionPoint(false)\n            .transformMarker(true)\n            .transformMarker(false)\n            .updateConnectionPointOnMarker(true)\n            .updateConnectionPointOnMarker(false);\n    }\n\n    updateConnector() {\n\n        let connector = this.fetchConnector();\n\n        let parser = connector.parse && utils.isFunction(connector.parse)\n            ? connector.parse\n            : connector.name && this.paper.getConnector(connector.name);\n\n        if (parser && utils.isFunction(parser)) {\n\n            let sourcePoint = this.getConnectionPoint(true);\n            let targetPoint = this.getConnectionPoint(false);\n            if (sourcePoint && targetPoint) {\n\n                let pathData = parser.call(this,\n                    sourcePoint,\n                    targetPoint,\n                    this.fetchRouterPoints(),\n                    connector.options || {}\n                );\n\n                this.applyAttr(connector.selector, { d: pathData });\n            } else {\n                this.vel.empty();\n            }\n        } else {\n            throw new Error('Unknown connector: \"' + connector.name + '\"');\n        }\n\n        return this;\n    }\n\n    renderMarker(isSource) {\n\n        let marker  = this.fetchMarker(isSource);\n        let vMarker = this.findOne(marker.selector);\n\n        if (marker && vMarker) {\n\n            let parser = marker.parse && utils.isFunction(marker.parse)\n                ? marker.parse\n                : marker.name && this.paper.getMarker(marker.name);\n\n            if (parser && utils.isFunction(parser)) {\n\n                let renderedMarker = parser(vMarker, marker.options);\n\n                // if return a new marker element, replace the old one\n                let newVel = renderedMarker.vel;\n                if (newVel) {\n\n                    // replace\n                    let elem      = vMarker.node;\n                    let parent    = elem.parentNode;\n                    let className = vMarker.getClassName();\n\n                    parent.insertBefore(newVel.node, elem);\n                    parent.removeChild(elem);\n                    newVel.addClass(className);\n\n                    vMarker = newVel;\n                }\n\n                this.cacheMarkerVel(vMarker, isSource);\n                this.cacheRenderedMarker(renderedMarker, isSource);\n            }\n        }\n\n        return this;\n    }\n\n    updateConnectionPoint(isSource) {\n\n        let staticPoint = this.fetchStaticConnPoint(isSource);\n        if (!staticPoint) {\n            this.updateConnPointOnPort(isSource)\n            || this.updateConnPointOnNode(isSource);\n        }\n\n        return this;\n    }\n\n    updateConnPointOnPort(isSource) {\n\n        let point = this.fetchConnPointOnPort(isSource);\n        if (!point) {\n\n            let view = this.fetchTerminalView(isSource);\n            let port = this.fetchTerminalPort(isSource);\n            if (port && view) {\n\n                if (view.getConnectionPointOnPort) {\n                    point = view.getConnectionPointOnPort(port, isSource);\n                }\n\n                if (!point) {\n                    let bbox = this.getPortBodyBBox(isSource);\n                    if (bbox) {\n\n                        let ref  = this.getReferencePoint(bbox, isSource);\n                        let geom = this.getPortBodyGeom(isSource) || bbox;\n\n                        if (ref) {\n                            point = geom.intersectionWithLineFromCenterToPoint(ref);\n                        }\n\n                        point = point || geom.getCenter();\n                    }\n                }\n\n                this.cacheConnPointOnPort(point, isSource);\n            }\n        }\n\n        return point;\n    }\n\n    updateConnPointOnNode(isSource) {\n\n        // find the connection point on the terminal\n\n        let point = this.fetchConnPointOnNode(isSource);\n        if (!point) {\n\n            let view = this.fetchTerminalView(isSource);\n            if (view) {\n\n                if (view.getConnectionPointOnBorder) {\n                    point = view.getConnectionPointOnBorder();\n                }\n\n                if (!point) {\n\n                    let bbox = this.getTerminalBBox(isSource);\n                    if (bbox) {\n\n                        let reference = this.getReferencePoint(bbox, isSource);\n                        if (reference) {\n                            point = bbox.intersectionWithLineFromCenterToPoint(reference);\n                        }\n\n                        point = point || bbox.getCenter();\n                    }\n                }\n\n                this.cacheConnPointOnNode(point, isSource);\n            }\n        }\n\n        return point;\n    }\n\n    getStrokeWidth(selector) {\n\n        let vel = this.findOne(selector);\n        if (vel && vel.node) {\n\n            let strokeWidth = utils.getComputedStyle(vel.node, 'stroke-width');\n\n            return strokeWidth && utils.toFloat(strokeWidth) || 0;\n        }\n\n        return 0;\n    }\n\n    getTerminalBBox(isSource) {\n\n        let bbox = this.fetchTerminalBBox(isSource);\n        if (!bbox) {\n\n            let view = this.fetchTerminalView(isSource);\n            if (view) {\n                bbox = view.getStrokedBBox();\n                bbox = this.fixStrokedBBox(bbox, isSource);\n            }\n\n            // cache\n            this.cacheTerminalBBox(bbox, isSource);\n        }\n\n        return bbox;\n    }\n\n    fixStrokedBBox(bbox, isSource) {\n\n        if (bbox) {\n\n            let marker         = this.fetchMarker(isSource);\n            let renderedMarker = this.fetchRenderedMarker(isSource);\n\n            if (marker && renderedMarker) {\n\n                let markerStrokeWidth = marker.options.markerStrokeWidth;\n                if (markerStrokeWidth) {\n\n                    let rad = renderedMarker.rad || 0;\n                    if (rad >= Math.PI / 4 || rad === 0) {\n                        bbox.grow(markerStrokeWidth / 2);\n                    } else {\n                        bbox.grow(markerStrokeWidth / Math.sin(rad) / 2);\n                    }\n                }\n            }\n        }\n\n        return bbox;\n    }\n\n    getReferencePoint(bbox, isSource) {\n\n        // static point\n        let reference = this.fetchStaticConnPoint(isSource);\n\n        // vertices\n        if (!reference) {\n\n            let vertices = this.fetchRouterPoints();\n\n            reference = isSource\n                ? vertices[0]\n                : vertices[vertices.length - 1];\n        }\n\n        // port\n        if (!reference) {\n\n            let portBBox = this.getPortBodyBBox(!isSource);\n            if (portBBox) {\n                reference = portBBox.intersectionWithLineFromCenterToPoint(bbox.getCenter());\n                reference = reference || portBBox.getCenter();\n            }\n        }\n\n        // terminal\n        if (!reference) {\n\n            let terminalBBox = this.getTerminalBBox(!isSource);\n            if (terminalBBox) {\n                reference = terminalBBox.intersectionWithLineFromCenterToPoint(bbox.getCenter());\n                reference = reference || terminalBBox.getCenter();\n            }\n\n        }\n\n        return reference;\n    }\n\n    getPortBodyBBox(isSource) {\n\n        let bbox = this.fetchPortBodyBBox(isSource);\n        if (!bbox) {\n\n            let view = this.fetchTerminalView(isSource);\n            let port = this.fetchTerminalPort(isSource);\n            if (view && port) {\n\n                if (view.getPortBodyBBox) {\n                    bbox = view.getPortBodyBBox(port, isSource);\n                }\n\n                if (bbox) {\n                    bbox = this.fixStrokedBBox(bbox, isSource);\n                    this.cachePortBodyBBox(bbox, isSource);\n                }\n            }\n        }\n\n        return bbox;\n    }\n\n    getPortBodyGeom(isSource) {\n\n        let geom = this.fetchPortBodyGeom(isSource);\n        if (!geom) {\n\n            let view = this.fetchTerminalView(isSource);\n            let port = this.fetchTerminalPort(isSource);\n            if (view && port) {\n\n                if (view.getPortBodyGeom) {\n                    geom = view.getPortBodyGeom(port, isSource);\n                }\n\n                if (geom) {\n                    geom = this.fixStrokedBBox(geom, isSource);\n                    this.cachePortBodyGeom(geom, isSource);\n                }\n            }\n        }\n\n        return geom;\n    }\n\n    getConnectionPoint(isSource) {\n\n        return this.fetchStaticConnPoint(isSource)\n            || this.fetchConnPointOnMarker(isSource)\n            || this.fetchConnPointOnPort(isSource)\n            || this.fetchConnPointOnNode(isSource);\n    }\n\n    transformMarker(isSource, ref) {\n\n        let renderedMarker = this.fetchRenderedMarker(isSource);\n        if (renderedMarker) {\n\n            let pane        = this.getPane();\n            let vertices    = this.fetchRouterPoints();\n            let sourcePoint = this.getConnectionPoint(true);\n            let targetPoint = this.getConnectionPoint(false);\n\n            let position = isSource ? sourcePoint : targetPoint;\n            let reference = ref || isSource\n                ? (vertices[0] || targetPoint)\n                : (vertices[vertices.length - 1] || sourcePoint);\n            // make the marker at the right position\n            let markerVel = this.fetchMarkerVel(isSource);\n\n            if (position && reference && markerVel) {\n                markerVel.translateAndAutoOrient(position, reference, pane);\n            }\n        }\n\n        return this;\n    }\n\n    updateConnectionPointOnMarker(isSource) {\n\n        let markerVel      = this.fetchMarkerVel(isSource);\n        let renderedMarker = this.fetchRenderedMarker(isSource);\n\n        if (markerVel && renderedMarker) {\n\n            let pane  = this.getPane();\n            let point = renderedMarker.point;\n\n            let p = vector.createSVGPoint(point.x, point.y);\n\n            p = p.matrixTransform(markerVel.getTransformToElement(pane));\n\n            let connectionPoint = Point.fromPoint(p);\n\n            this.cacheConnPointOnMarker(connectionPoint, isSource);\n        }\n\n        return this;\n    }\n\n\n    // cache\n    // -----\n\n    cacheRouterPoints(points) {\n\n        this.cache.routerPoints = points;\n    }\n\n    fetchRouterPoints() {\n\n        return this.cache.routerPoints;\n    }\n\n    cacheConnector(connector) {\n\n        this.cache.connector = connector;\n    }\n\n    fetchConnector() {\n\n        return this.cache.connector;\n    }\n\n    cacheMarker(marker, isSource) {\n\n        if (isSource) {\n            this.cache.sourceMarker = marker;\n        } else {\n            this.cache.targetMarker = marker;\n        }\n    }\n\n    fetchMarker(isSource) {\n\n        return isSource ? this.cache.sourceMarker : this.cache.targetMarker;\n    }\n\n    cacheRenderedMarker(renderedMarker, isSource) {\n\n        if (renderedMarker) {\n            if (isSource) {\n                this.cache.renderedSourceMarker = renderedMarker;\n            } else {\n                this.cache.renderedTargetMarker = renderedMarker;\n            }\n        }\n    }\n\n    fetchRenderedMarker(isSource) {\n\n        return isSource ? this.cache.renderedSourceMarker : this.cache.renderedTargetMarker;\n    }\n\n    cacheMarkerVel(vel, isSource) {\n\n        if (vel) {\n            if (isSource) {\n                this.cache.sourceMarkerVel = vel;\n            } else {\n                this.cache.targetMarkerVel = vel;\n            }\n        }\n    }\n\n    fetchMarkerVel(isSource) {\n\n        return isSource ? this.cache.sourceMarkerVel : this.cache.targetMarkerVel;\n    }\n\n    cacheTerminalView(view, isSource) {\n\n        if (view) {\n            if (isSource) {\n                this.cache.sourceView = view;\n            } else {\n                this.cache.targetView = view;\n            }\n        }\n    }\n\n    fetchTerminalView(isSource) {\n\n        return isSource ? this.cache.sourceView : this.cache.targetView;\n    }\n\n    cacheTerminalPort(port, isSource) {\n\n        if (!utils.isNil(port)) {\n            if (isSource) {\n                this.cache.sourcePort = port;\n            } else {\n                this.cache.targetPort = port;\n            }\n        }\n    }\n\n    fetchTerminalPort(isSource) {\n\n        return isSource ? this.cache.sourcePort : this.cache.targetPort;\n    }\n\n    cacheStaticConnPoint(point, isSource) {\n\n        if (point) {\n            if (isSource) {\n                this.cache.staticSourcePoint = point;\n            } else {\n                this.cache.staticTargetPoint = point;\n            }\n        }\n    }\n\n    fetchStaticConnPoint(isSource) {\n\n        return isSource ? this.cache.staticSourcePoint : this.cache.staticTargetPoint;\n    }\n\n    cacheConnPointOnMarker(point, isSource) {\n\n        if (point) {\n            if (isSource) {\n                this.cache.sourcePointOnMarker = point;\n            } else {\n                this.cache.targetPointOnMarker = point;\n            }\n        }\n    }\n\n    fetchConnPointOnMarker(isSource) {\n\n        return isSource ? this.cache.sourcePointOnMarker : this.cache.targetPointOnMarker;\n    }\n\n    cacheConnPointOnPort(point, isSource) {\n\n        if (point) {\n            if (isSource) {\n                this.cache.sourcePointOnPort = point;\n            } else {\n                this.cache.targetPointOnPort = point;\n            }\n        }\n    }\n\n    fetchConnPointOnPort(isSource) {\n\n        return isSource ? this.cache.sourcePointOnPort : this.cache.targetPointOnPort;\n    }\n\n    cacheConnPointOnNode(point, isSource) {\n\n        if (point) {\n            if (isSource) {\n                this.cache.sourcePointOnTerminal = point;\n            } else {\n                this.cache.targetPointOnTerminal = point;\n            }\n        }\n    }\n\n    fetchConnPointOnNode(isSource) {\n\n        return isSource ? this.cache.sourcePointOnTerminal : this.cache.targetPointOnTerminal;\n    }\n\n    cacheTerminalBBox(bbox, isSource) {\n\n        if (bbox) {\n            if (isSource) {\n                this.cache.sourceTerminalBBox = bbox;\n            } else {\n                this.cache.targetTerminalBBox = bbox;\n            }\n        }\n    }\n\n    fetchTerminalBBox(isSource) {\n\n        return isSource ? this.cache.sourceTerminalBBox : this.cache.targetTerminalBBox;\n    }\n\n    cachePortBodyBBox(bbox, isSource) {\n\n        if (bbox) {\n            if (isSource) {\n                this.cache.sourcePortBBox = bbox;\n            } else {\n                this.cache.targetPortBBox = bbox;\n            }\n        }\n    }\n\n    fetchPortBodyBBox(isSource) {\n\n        return isSource ? this.cache.sourcePortBBox : this.cache.targetPortBBox;\n    }\n\n    cachePortBodyGeom(geom, isSource) {\n\n        if (geom) {\n            if (isSource) {\n                this.cache.sourcePortGeom = geom;\n            } else {\n                this.cache.targetPortGeom = geom;\n            }\n        }\n    }\n\n    fetchPortBodyGeom(isSource) {\n\n        return isSource ? this.cache.sourcePortGeom : this.cache.targetPortGeom;\n    }\n}\n\n\n// exports\n// -------\n\nexport default LinkView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/LinkView.js\n **/","import * as utils from '../common/utils';\nimport Point      from '../geometry/Point';\nimport Cell       from '../cells/Cell';\n\n\nclass Link extends Cell {\n\n    constructor(options) {\n\n        super(options);\n\n        this.vertices = this.metadata.vertices || [];\n    }\n\n\n    // static\n    // ------\n\n    static isLink(link) {\n        return link && link instanceof Link;\n    }\n\n\n    // methods\n    // -------\n\n    isLink() {\n\n        return true;\n    }\n\n    getRouter() {\n\n        let router = this.metadata.router || {};\n\n        if (utils.isFunction(router)) {\n            router = { parse: router };\n        } else if (!utils.isObject(router)) {\n            router = { name: router };\n        }\n\n        return router;\n    }\n\n    getMarker(isSource) {\n\n        let marker = isSource\n            ? this.metadata.sourceMarker\n            : this.metadata.targetMarker;\n\n        if (utils.isFunction(marker)) {\n            marker = { parse: marker };\n        } else if (!utils.isObject(marker)) {\n            marker = { name: marker };\n        }\n\n        marker.selector = isSource\n            ? '.source-marker'\n            : '.target-marker';\n\n        return marker;\n    }\n\n    getConnector() {\n\n        let connector = this.metadata.connector || {};\n\n        if (utils.isFunction(connector)) {\n            connector = { parse: connector };\n        } else if (!utils.isObject(connector)) {\n            connector = { name: connector };\n        }\n\n        connector.selector = '.connector';\n\n        return connector;\n    }\n\n\n    // vertices\n    // --------\n\n    getVertices() {\n\n        return this.vertices;\n    }\n\n    getVerticesCount() {\n\n        return this.vertices ? this.vertices.length : 0;\n    }\n\n    getVerticeAt(index) {\n\n        return this.vertices ? this.vertices[index] : null;\n    }\n\n    indexOfVertice(point) {\n\n        if (point && Point.isPointLike(point)) {\n\n            for (let i = 0, l = this.getVerticesCount(); i < l; i++) {\n\n                let vertice = this.getVerticeAt(i);\n\n                if (point.x === vertice.x && point.y === vertice.y) {\n                    return i;\n                }\n            }\n        }\n\n        return -1;\n    }\n\n    eachVertice(iterator, context) {\n\n        return utils.forEach(this.vertices, iterator, context);\n    }\n\n    filterVertice(iterator, context) {\n\n        return utils.filter(this.vertices, iterator, context);\n    }\n\n    insertVertice(points, index) {\n\n        let length = this.getVerticesCount();\n\n        index = utils.fixIndex(index, length);\n\n        if (!utils.isArray(points)) {\n            points = [points];\n        }\n\n        if (index === length) {\n            this.vertices.push(...points);\n        } else {\n            this.vertices.splice(index, 0, points);\n        }\n\n        return this;\n    }\n\n    removeVertice(point) {\n\n        let index = this.indexOfVertice(point);\n        if (index >= 0) {\n            this.removeVerticeAt(index);\n        }\n\n        return this;\n    }\n\n    removeVerticeAt(index) {\n\n        let vertice = this.getVerticeAt(index);\n        if (vertice) {\n            this.vertices.splice(index, 1);\n        }\n        return vertice;\n    }\n\n    clearVertices() {\n\n        this.vertices = [];\n\n        return this;\n    }\n\n\n    // common\n    // ------\n\n    clone(options, withData) {\n\n        let cloned = super.clone(options, withData);\n\n        cloned.vertices = [];\n\n        utils.forEach(this.vertices, function (point) {\n            if (Point.isPointLike(point)) {\n                cloned.vertices.push({ x: point.x, y: point.y });\n            }\n        });\n\n        return cloned;\n    }\n}\n\n\nLink.setDefaults({\n    tagName: 'g',\n    markup: ''\n    + '<path class=\"connector\"/>'\n    + '<path class=\"source-marker\"/>'\n    + '<path class=\"target-marker\"/>',\n    classNames: 'pane-cell pane-link', // pane-cell for event handler\n    pane: 'linkPane',\n    data: null,   // related data(for business logic)\n    view: null,   // specify the constructor of the view\n    router: null,\n    connector: 'sharp',\n    sourceMarker: null,\n    targetMarker: null,\n    attrs: {\n        '.connector': {\n            'fill': 'none',\n            'stroke': '#000',\n            'stroke-width': 1\n        },\n        '.source-marker': {\n            'fill': '#000',\n            'stroke': '#000',\n            'stroke-width': 1\n        },\n        '.target-marker': {\n            'fill': '#000',\n            'stroke': '#000',\n            'stroke-width': 1\n        }\n    }\n});\n\n\n// exports\n// -------\n\nexport default Link;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/cells/Link.js\n **/","import * as utils from '../common/utils';\nimport Events     from '../common/Events';\n\n\nclass Handler extends Events {\n\n    constructor(paper, options = {}) {\n\n        super();\n\n        this.paper    = paper;\n        this.disabled = false;\n\n        this.configure(options)\n            .init();\n    }\n\n    configure() { return this; }\n\n    init() { return this; }\n\n    destroy() {\n\n        utils.destroy(this);\n    }\n\n    getPaper() {\n\n        return this.paper;\n    }\n\n    getModel() {\n\n        return this.paper && this.paper.model;\n    }\n\n    isDisabled() {\n\n        return this.disabled === true;\n    }\n\n    isEnabled() {\n\n        return this.disabled === false;\n\n    }\n\n    disable() {\n\n        this.disabled = true;\n        this.trigger('handler:disabled');\n\n        return this;\n    }\n\n    enable() {\n\n        this.disabled = false;\n        this.trigger('handler:enabled');\n\n        return this;\n    }\n\n    invoke(callback, context) {\n\n        if (!this.isDisabled()) {\n            callback.call(context);\n        }\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default Handler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/handlers/Handler.js\n **/","import       * as utils from '../common/utils';\nimport           vector from '../common/vector';\nimport          Handler from './Handler';\nimport VertexController from '../controllers/Vertex';\n\nclass SelectHandler extends Handler {\n\n    init(options = {}) {\n\n        let that = this;\n\n        this.name = options.name || 'select';\n\n        let paper = this.getPaper();\n        let model = this.getModel();\n\n        this.previewVel  = vector('rect', {\n            'fill': 'none',\n            'stroke-dasharray': '3px, 3px',\n            'stroke': 'black'\n        });\n        this.previewRect = this.previewVel.node;\n\n        paper.controlPane.appendChild(this.previewRect);\n\n        this.hidePreview();\n\n        paper.selection = [];\n\n        this.origin = {\n            x: 0,\n            y: 0\n        };\n\n        paper.on('cell:pointerDown', function (cell, view, e) {\n\n            that.invoke(function () {\n                that.origin = {\n                    x: e.x,\n                    y: e.y\n                };\n                that.selectCell(cell, utils.hasModifierKey(e));\n            });\n        });\n\n        paper.on('cell:pointerMove', function (cell, view, e) {\n            that.invoke(function () {\n                that.showPreview()\n                    .redrawPreview(e);\n            });\n        });\n\n        paper.on('cell:pointerUp', function (cell, view, e) {\n            that.invoke(function () {\n                let previousPosition = that.origin;\n                if (e.x !== previousPosition.x || e.y !== previousPosition.y) {\n\n                    model.beginUpdate();\n\n                    utils.forEach(paper.selection, function (c) {\n                        let position = c.metadata.position;\n                        model.setGeometry(c, {\n                            position: {\n                                x: position.x + (e.x - previousPosition.x),\n                                y: position.y + (e.y - previousPosition.y),\n                                relative: position.relative\n                            }\n                        });\n                    });\n\n                    model.endUpdate();\n\n                    utils.forEach(paper.selection, function (c) {\n                        c.vertexController.redraw();\n                    });\n                }\n                that.hidePreview();\n            });\n        });\n\n        paper.on('blank:pointerDown', function (e) {\n            that.invoke(function () {\n                if (!utils.hasModifierKey(e)) {\n                    that.clearSelection();\n                }\n            });\n        });\n\n        return this;\n    }\n\n    hidePreview() {\n\n        this.previewVel.hide();\n\n        return this;\n    }\n\n    showPreview() {\n\n        this.previewVel.show();\n        return this;\n    }\n\n    redrawPreview(position) {\n\n        let paper      = this.getPaper();\n        let previewVel = this.previewVel;\n        let selection  = paper.selection;\n\n        if (selection.length) {\n\n            let minP = {\n                x: Number.MAX_VALUE,\n                y: Number.MAX_VALUE\n            };\n            let maxP = {\n                x: 0,\n                y: 0\n            };\n\n            utils.forEach(selection, function (cell) {\n                let view = paper.getView(cell);\n                let bbox = view.vel.getBBox();\n                if (bbox.x < minP.x) {\n                    minP.x = bbox.x;\n                }\n                if (bbox.y < minP.y) {\n                    minP.y = bbox.y;\n                }\n                if (bbox.x + bbox.width > maxP.x) {\n                    maxP.x = bbox.x + bbox.width;\n                }\n                if (bbox.y + bbox.height > maxP.y) {\n                    maxP.y = bbox.y + bbox.height;\n                }\n            });\n\n            let previousPosition = this.origin;\n\n            previewVel.attr({\n                x: minP.x + (position.x - previousPosition.x),\n                y: minP.y + (position.y - previousPosition.y),\n                width: maxP.x - minP.x,\n                height: maxP.y - minP.y\n            });\n        }\n\n        return this;\n    }\n\n    _selectCell(cell) {\n\n        let paper = this.getPaper();\n\n        cell.vertexController = new VertexController(paper, {\n            cell\n        });\n        cell.selected         = true;\n        paper.selection.push(cell);\n        return this;\n    }\n\n    _unselectCell(cell) {\n\n        let paper     = this.getPaper();\n        let selection = paper.selection;\n\n        if (utils.contains(selection, cell)) {\n            paper.selection.splice(utils.indexOf(selection, cell), 1);\n        }\n\n        cell.vertexController.destroy();\n        cell.selected = false;\n\n        return this;\n    }\n\n    selectCell(cell, multi) {\n\n        if (!multi) {\n            this.clearSelection();\n        } else {\n            return cell.selected\n                ? this._unselectCell(cell)\n                : this._selectCell(cell);\n        }\n\n        if (cell.selected) {\n            return this;\n        }\n\n        this.clearSelection();\n        this._selectCell(cell);\n\n        return this;\n    }\n\n    clearSelection() {\n\n        utils.forEach(this.paper.selection, function (cell) {\n            cell.vertexController.destroy();\n            cell.selected = false;\n        });\n\n        this.paper.selection = [];\n\n        return this;\n    }\n}\n\n\n// exports\n// -------\n\nexport default SelectHandler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/handlers/Selection.js\n **/","import * as utils from '../common/utils';\nimport   detector from '../common/detector';\nimport     vector from '../common/vector';\nimport       Rect from '../geometry/Rect';\nimport Controller from './Controller';\n\n\n// TODO listen to cell's change event to redraw\n\nconst win = window;\nconst doc = win.document;\n\nconst defaults = {\n    boundsAttr: {\n        fill: 'none',\n        'stroke-dasharray': '3px, 3px',\n        stroke: '#0f0',\n    },\n    rotaterOffset: -12,\n    rotaterAttr: {\n        rx: 5,\n        ry: 5,\n        fill: '#0f0',\n        stroke: 'black',\n        style: 'cursor:crosshair;'\n    },\n    resizerAttr: {\n        height: 6,\n        width: 6,\n        fill: '#0f0',\n        stroke: 'black',\n    }\n};\n\nconst RESIZER_NAMES = [\n    'nw-resize',\n    'n-resize',\n    'ne-resize',\n    'e-resize',\n    'se-resize',\n    's-resize',\n    'sw-resize',\n    'w-resize',\n];\n\n\nclass VertexController extends Controller {\n\n    init(options) {\n\n        this.options = utils.merge({}, defaults, options);\n\n        let vel   = vector('g', {\n            'class': 'vertex-bounds'\n        });\n        this.cell = options.cell;\n        this.vel  = vel;\n        this.elem = vel.node;\n        this.paper.controlPane.appendChild(this.elem);\n\n        this.redraw();\n\n        return this;\n    }\n\n    redraw() {\n        let that = this;\n        let cell = that.cell;\n\n        that.moveTo(cell.position)\n            .rotate()\n            .setSize(cell.size)\n            .drawBounds()\n            .drawRotater()\n            .drawResizers();\n\n        this.bindEvents();\n\n        return this;\n    }\n\n    moveTo(pos) {\n\n        this.vel.translate(pos.x, pos.y);\n        this.position = pos;\n\n        return this;\n    }\n\n    setSize(size) {\n\n        this.size = size;\n\n        return this;\n    }\n\n    rotate(rotation, cx, cy) {\n\n        let cell = this.cell;\n\n        cx       = utils.isNumeric(cx) ? cx : cell.size.width / 2;\n        cy       = utils.isNumeric(cy) ? cy : cell.size.height / 2;\n        rotation = utils.isNumeric(rotation) ? rotation : cell.rotation;\n\n        this.vel.rotate(rotation, cx, cy);\n        this.rotation = rotation;\n\n        return this;\n    }\n\n    drawBounds() {\n\n        let attrs = utils.extend({}, this.options.boundsAttr, this.size);\n        if (this.boundsVel) {\n            this.boundsVel.attr(attrs);\n        } else {\n            this.boundsVel = vector('rect', attrs);\n            this.vel.append(this.boundsVel);\n        }\n\n        return this;\n    }\n\n    drawRotater() {\n\n        if (!this.rotaterVel) {\n            this.rotaterVel = vector('ellipse', this.options.rotaterAttr);\n            this.vel.append(this.rotaterVel);\n        }\n\n        this.rotaterVel.translate(this.size.width / 2, this.options.rotaterOffset);\n\n        return this;\n    }\n\n    drawResizers() {\n\n        let options = this.options;\n\n        if (!this.resizers) {\n            this.resizers = [];\n            utils.forEach(RESIZER_NAMES, function () {\n                this.createResizer();\n            }, this);\n        }\n\n        // TODO change class and cursor style according to cell rotate angle\n        let resizers = this.resizers;\n        let rx       = options.resizerAttr.width / 2;\n        let ry       = options.resizerAttr.height / 2;\n        let h        = this.size.height;\n        let w        = this.size.width;\n        resizers[0].translate(-rx, -ry);\n        resizers[1].translate(-rx + w / 2, -ry);\n        resizers[2].translate(-rx + w, -ry);\n        resizers[3].translate(-rx + w, -ry + h / 2);\n        resizers[4].translate(-rx + w, -ry + h);\n        resizers[5].translate(-rx + w / 2, -ry + h);\n        resizers[6].translate(-rx, -ry + h);\n        resizers[7].translate(-rx, -ry + h / 2);\n\n        this.cacheResizerBBox();\n        this.adjustResizers();\n\n        return this;\n    }\n\n    cacheResizerBBox() {\n\n        utils.forEach(this.resizers, function (resizer) {\n            if (!resizer.hidden) {\n                resizer.cachedBBox = resizer.getBBox();\n            }\n        });\n        return this;\n    }\n\n    adjustResizers() {\n        let cell = this.cell;\n\n        const STEP_ANGLE = 45;\n        let rotation     = utils.normalizeAngle(cell.rotation);\n        let offset       = Math.floor(rotation / STEP_ANGLE);\n        let length       = RESIZER_NAMES.length;\n\n        utils.forEach(this.resizers, function (resizer, i) {\n            let name = RESIZER_NAMES[(i + offset) % length];\n            resizer.attr({\n                class: 'resizer ' + name\n            });\n            resizer.css({\n                cursor: name\n            });\n        });\n        return this;\n    }\n\n    createResizer() {\n        let that = this;\n\n        let resizerVel = vector('rect', that.options.resizerAttr);\n        that.resizers.push(resizerVel);\n        that.vel.append(resizerVel);\n        return that;\n    }\n\n    hideRotater() {\n\n        this.rotaterVel.hide();\n\n        return this;\n    }\n\n    showRotater() {\n\n        this.rotaterVel.show();\n        return this;\n    }\n\n    showResizers() {\n\n        utils.forEach(this.resizers, function (resizer) {\n            resizer.show();\n        });\n        return this;\n    }\n\n    hideResizers(exceptNode) {\n\n        this.cacheResizerBBox();\n        utils.forEach(this.resizers, function (resizer) {\n            if (resizer.node !== exceptNode) {\n                resizer.hide();\n            }\n        });\n\n        return this;\n    }\n\n    resetEvents(e) {\n\n        this.isRotating  = false;\n        this.isResizing  = false;\n        this.eventTarget = null;\n\n        if (e && e.target) {\n            this.eventTarget      = e.target;\n            this.isRotating       = (e.target === this.rotaterVel.node);\n            this.isResizing       = utils.hasClass(e.target, 'resizer');\n            this.oldEventPosition = {\n                x: e.x,\n                y: e.y\n            };\n        }\n        if (this.isRotating) {\n            this.hideResizers();\n        } else {\n            this.showResizers();\n        }\n        if (this.isResizing) {\n            this.hideRotater();\n            this.hideResizers(e.target);\n        } else {\n            this.showRotater();\n        }\n\n        return this;\n    }\n\n    bindEvents() {\n        let elem = this.elem;\n        this.resetEvents();\n\n        let onPointerDown = this.onPointerDown.bind(this);\n        let onPointerMove = this.onPointerMove.bind(this);\n        let onPointerUp   = this.onPointerUp.bind(this);\n        if (detector.IS_TOUCH) {\n            utils.addEventListener(elem, 'touchstart', onPointerDown);\n            utils.addEventListener(doc, 'touchmove', onPointerMove);\n            utils.addEventListener(doc, 'touchend', onPointerUp);\n        } else {\n            utils.addEventListener(elem, 'mousedown', onPointerDown);\n            utils.addEventListener(doc, 'mousemove', onPointerMove);\n            utils.addEventListener(doc, 'mouseup', onPointerUp);\n        }\n\n        return this;\n    }\n\n    onPointerDown(e) {\n\n        e.stopPropagation();\n\n        this.resetEvents(e);\n\n        return this;\n    }\n\n    onPointerMove(e) {\n        let that = this;\n        // let paper = that.paper;\n\n        if (that.isRotating) {\n            e.stopPropagation();\n            let dx = that.position.x + that.size.width / 2 - e.x;\n            let dy = that.position.y + that.size.height / 2 - e.y;\n\n            let alpha = (dx !== 0) ? Math.atan(dy / dx) * 180 / Math.PI + 90 : ((dy < 0) ? 180 : 0);\n            if (dx > 0) {\n                alpha -= 180;\n            }\n            that.rotate(alpha);\n        }\n        if (that.isResizing) {\n            e.stopPropagation();\n            let oldPos                = that.oldEventPosition;\n            let newPos                = {\n                x: e.x,\n                y: e.y\n            };\n            let eventTarget           = that.eventTarget;\n            let currentResizerIndex   = 0;\n            let isRotationResizer     = false;\n            let isAntiRotationResizer = false;\n            utils.some(that.resizers, function (resizer, i) {\n                if (resizer.node === eventTarget) {\n                    currentResizerIndex = i;\n                    return true;\n                }\n                return false;\n            });\n            let oppositeResizerIndex = (currentResizerIndex - 4 + 8) % 8;\n            if (currentResizerIndex % 2 !== 0) {\n                if (currentResizerIndex === 1 || currentResizerIndex === 5) {\n                    isRotationResizer = true;\n                }\n                if (currentResizerIndex === 3 || currentResizerIndex === 7) {\n                    isAntiRotationResizer = true;\n                }\n                currentResizerIndex -= 1;\n                oppositeResizerIndex -= 1;\n            }\n            let edgePoint       = that.resizers[oppositeResizerIndex].cachedBBox.getCenter();\n            let movingEdgePoint = that.resizers[currentResizerIndex].getBBox().getCenter();\n            let dx              = 0;\n            let dy              = 0;\n            if (isRotationResizer) {\n                dx = 0; // TODO\n                dy = 0; // TODO\n            } else if (isAntiRotationResizer) {\n                dx = 0; // TODO\n                dy = 0; // TODO\n            } else {\n                dx = newPos.x - oldPos.x;\n                dy = newPos.y - oldPos.y;\n            }\n            let newRect = Rect.fromVerticesAndRotation(edgePoint, {\n                x: movingEdgePoint.x + dx,\n                y: movingEdgePoint.y + dy\n            }, that.rotation);\n            // let newCenter = newRect.getCenter();\n\n            that\n                .moveTo({\n                    x: newRect.x,\n                    y: newRect.y\n                })\n                .setSize({\n                    height: newRect.height,\n                    width: newRect.width\n                })\n                .drawBounds()\n                .drawResizers()\n                .rotate(that.rotation/* , newCenter.x, newCenter.y */);\n\n            that.oldEventPosition = newPos;\n        }\n        return that;\n    }\n\n    onPointerUp(e) {\n        let that = this;\n\n        if (that.isResizing || that.isRotating) {\n            e.stopPropagation();\n            let model = that.model;\n            // let cell = that.cell;\n            model.beginUpdate();\n            if (that.isRotating) {\n                model.setGeometry(that.cell, {\n                    rotation: {\n                        angle: that.rotation\n                    }\n                });\n            }\n            if (that.isResizing) {\n                model.setGeometry(that.cell, {\n                    position: {\n                        x: that.position.x,\n                        y: that.position.y\n                    },\n                    rotation: {\n                        angle: that.rotation\n                    },\n                    size: {\n                        width: that.size.width,\n                        height: that.size.height,\n                    }\n                });\n            }\n            model.endUpdate();\n            that.redraw();\n            that.resetEvents();\n        }\n        return that;\n    }\n\n    destroy() {\n\n        this.boundsVel.remove();\n        this.rotaterVel.remove();\n\n        utils.forEach(this.resizers, function (vel) {\n            vel.remove();\n        });\n\n        this.vel.remove();\n\n        utils.destroy(this);\n    }\n}\n\n\n// exports\n// -------\n\nexport default VertexController;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/Vertex.js\n **/","import Events from '../common/Events';\n\n\nclass Controller extends Events {\n\n    constructor(paper, options = {}) {\n\n        super();\n\n        this.paper = paper;\n        this.model = paper.model;\n\n        this.init(options);\n        this.on('controller:initalized');\n    }\n\n    init() {\n        return this;\n    }\n\n    destroy() { }\n}\n\n\n// exports\n// -------\n\nexport default Controller;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controllers/Controller.js\n **/","import * as utils from '../common/utils';\nimport     vector from '../common/vector';\nimport       Rect from '../geometry/Rect';\nimport       Link from '../cells/Link';\nimport    Handler from './Handler';\n\n\nclass ConnectionHandler extends Handler {\n\n    init(options = {}) {\n\n        let that  = this;\n        let paper = this.getPaper();\n        let model = this.getModel();\n\n        this.name = options.name || 'connection';\n\n        this.sourceCellView = null;\n        this.targetCellView = null;\n        this.sourcePort     = null;\n        this.targetPort     = null;\n\n        this.connecting     = false;\n        this.previewingLink = null;\n\n        paper.on('cell:mouseOver', function (cell, view) {\n            if (that.sourceCellView !== view) {\n                if (that.connecting) {\n                    // 加校验\n                    that.setTargetCellView(view);\n                } else {\n                    // 加校验\n                    that.setSourceCellView(view);\n                }\n            }\n        });\n\n        paper.on('cell:mouseOut', function (cell, view, e) {\n            if (that.connecting) {\n                if (that.targetCellView === view && that._isOut(view, e.toElement)) {\n                    that.setTargetCellView(null);\n                }\n            } else {\n                if (that.sourceCellView === view && that._isOut(view, e.toElement)) {\n                    that.setSourceCellView(null);\n                }\n            }\n        });\n\n        utils.addEventListener(paper.decoratePane, 'mouseout', '.port-decorator.out', function (e) {\n            if (!that.connecting && !utils.hasClass(e.toElement, 'port-decorator-layer')) {\n                that.setSourceCellView(null);\n            }\n        });\n\n        utils.addEventListener(paper.decoratePane, 'mousedown', '.port-decorator.out', function (e) {\n            that.connecting   = true;\n            let decoratorNode = e.delegateTarget;\n            that.sourcePort   = decoratorNode.cellView.findPortByElem(decoratorNode.portBody);\n            that._drawInPortDecorators();\n        });\n\n        utils.addEventListener(paper.container, 'mousemove', function (e) {\n            if (that.connecting) {\n                if (that.previewingLink) {\n                    model.setTerminal(that.previewingLink, paper.toLocalPoint({\n                        x: e.x,\n                        y: e.y\n                    }), false);\n                } else {\n                    that.previewingLink = new Link({\n                        sourceMarker: 'block',\n                        targetMarker: 'block'\n                    });\n                    model.addLink(that.previewingLink, {\n                        node: that.sourceCellView.cell,\n                        port: that.sourcePort,\n                    }, paper.toLocalPoint({\n                        x: e.x,\n                        y: e.y\n                    }));\n                }\n            }\n        });\n\n        paper.on('cell:pointerUp', function (/* cell, view, e, x, y */) {\n            // console.log('cell:mouseup');\n            // if (that.connecting) {\n            // } else {\n            // }\n            that.connecting = false;\n            that.setSourceCellView(null);\n            that._clearInPortDecorators();\n        });\n        paper.on('blank:pointerUp', function (/* cell, view, e, x, y */) {\n            // console.log('blank:mouseup');\n            // if (that.connecting) {\n            // } else {\n            // }\n            that.connecting = false;\n            that.setSourceCellView(null);\n            that._clearInPortDecorators();\n        });\n\n        return this;\n    }\n\n    _isOut(view, elem) {\n        return !utils.containsElement(view.elem, elem) && !utils.hasClass(elem, 'port-decorator-layer');\n    }\n\n    setSourceCellView(view) {\n\n        let that  = this;\n        let paper = this.getPaper();\n        if (this.sourceCellView) {\n            utils.forEach(paper.decoratePane.querySelectorAll('.port-decorator.out'), function (decorator) {\n                vector(decorator).remove();\n            });\n        }\n\n        that.sourceCellView = view;\n\n        if (view) {\n            that._drawPortDecorators(view, 'out');\n        }\n\n        return this;\n    }\n\n    _drawInPortDecorators() {\n        let that = this;\n        // let sourceView = that.sourceCellView;\n        return that;\n    }\n\n    _clearInPortDecorators() {\n        let that  = this;\n        let paper = that.paper;\n        utils.forEach(paper.decoratePane.querySelectorAll('.port-decorator.in'), function (decorator) {\n            vector(decorator).remove();\n        });\n        return that;\n    }\n\n    _drawPortDecorators(view, inOrOut) {\n\n        let decoratorMarkup = [\n            '<g class=\"port-decorator ${className}\">',\n            '<circle class=\"back port-decorator-layer\" r=\"8\" cx=\"${x}\" cy=\"${y}\"></circle>',\n            '<circle class=\"front port-decorator-layer\" r=\"3\" cx=\"${x}\" cy=\"${y}\"></circle>',\n            '</g>'\n        ].join('');\n\n        let portBodies      = view.elem.querySelectorAll('.pane-ports.' + inOrOut + ' .pane-port .port-body');\n        let paper           = this.getPaper();\n        let decoratePane    = paper.decoratePane;\n\n        utils.forEach(portBodies, function (portBody) {\n            let bbox      = Rect.fromRect(vector(portBody).getBBox(false));\n            let center    = bbox.getCenter();\n            let decorator = vector(utils.format(decoratorMarkup, utils.extend({\n                className: inOrOut\n            }, center)));\n            decoratePane.appendChild(decorator.node);\n            decorator.node.cellView = view;\n            decorator.node.portBody = portBody;\n            // TODO decorator.node.portMeta = portMeta\n        });\n    }\n\n    setTargetCellView(/* view */) {\n        let that = this;\n        return that;\n    }\n}\n\nexport default ConnectionHandler;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/handlers/Connection.js\n **/","import * as utils from '../../common/utils';\n\nfunction sharpConnector(sourcePoint, targetPoint, vertices) {\n\n    let d = ['M', sourcePoint.x, sourcePoint.y];\n\n    utils.forEach(vertices, function (vertex) {\n\n        d.push(vertex.x, vertex.y);\n    });\n\n    d.push(targetPoint.x, targetPoint.y);\n\n    return d.join(' ');\n}\n\n\nexport default sharpConnector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/connector/sharp.js\n **/","import * as bezier from '../../geometry/bezier';\nimport       Point from '../../geometry/Point';\n\n\nfunction fixMarker(view, isSource, reference) {\n\n    let cache = view.cache;\n\n    let renderedMarker = isSource\n        ? cache.renderedSourceMarker\n        : cache.renderedTargetMarker;\n\n    let markerVel = isSource\n        ? cache.sourceMarkerVel\n        : cache.targetMarkerVel;\n\n    if (renderedMarker && markerVel) {\n\n        // get connection point of the marker connecting to the terminal\n        let position = isSource\n            ? cache.sourcePointOnTerminal || cache.staticSourcePoint\n            : cache.targetPointOnTerminal || cache.staticTargetPoint;\n\n        if (position) {\n            markerVel.translateAndAutoOrient(position, reference, view.getPane());\n            // fix the connection point on the marker\n            view.updateConnectionPointOnMarker(isSource);\n        }\n    }\n}\n\nfunction getConnectionPoint(view, isSource) {\n\n    let cache = view.cache;\n\n    if (isSource) {\n        return cache.sourcePointOnMarker\n            || cache.sourcePointOnTerminal\n            || cache.staticSourcePoint;\n    }\n\n    return cache.targetPointOnMarker ||\n        cache.targetPointOnTerminal ||\n        cache.staticTargetPoint;\n\n}\n\nfunction smoothConnector(sourcePoint, targetPoint, vertices) {\n\n    let view = this;\n    let pathArr;\n    let sourceReference;\n    let targetReference;\n\n    if (vertices && vertices.length) {\n\n        let knots         = [sourcePoint].concat(vertices).concat([targetPoint]);\n        let controlPoints = bezier.getCurveControlPoints(knots);\n        let length        = controlPoints[0].length;\n\n        sourceReference = Point.fromPoint(controlPoints[0][0]);\n        targetReference = Point.fromPoint(controlPoints[1][length - 1]);\n\n        fixMarker(view, true, sourceReference);\n        fixMarker(view, false, targetReference);\n\n        knots[0]                = getConnectionPoint(view, true);\n        knots[knots.length - 1] = getConnectionPoint(view, false);\n\n        pathArr = ['M', knots[0].x, knots[0].y];\n\n        for (let i = 0; i < length; i++) {\n            pathArr.push('C',\n                controlPoints[0][i].x,\n                controlPoints[0][i].y,\n                controlPoints[1][i].x,\n                controlPoints[1][i].y,\n                knots[i + 1].x,\n                knots[i + 1].y\n            );\n        }\n    } else {\n\n        // if we have no vertices use a default cubic bezier curve, cubic\n        // bezier requires two control points. The two control points are both\n        // defined with X as mid way between the source and target points.\n        // SourceControlPoint Y is equal to sourcePoint Y and targetControlPointY\n        // being equal to targetPointY. Handle situation were sourcePointX is\n        // greater or less then targetPointX.\n\n        // let controlPointX = sourcePoint.x < targetPoint.x\n        //    ? targetPoint.x - (targetPoint.x - sourcePoint.x) / 2\n        //    : sourcePoint.x - (sourcePoint.x - targetPoint.x) / 2;\n        //\n        // sourceReference = new Point(controlPointX, sourcePoint.y);\n        // targetReference = new Point(controlPointX, targetPoint.y);\n\n        let controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n\n        // sourceReference = new Point(sourcePoint.x, controlPointY);\n        // targetReference = new Point(targetPoint.x, controlPointY);\n        //\n        // fixMarker(view, true, sourceReference);\n        // fixMarker(view, false, targetReference);\n        //\n        // sourcePoint = getConnectionPoint(view, true);\n        // targetPoint = getConnectionPoint(view, false);\n\n        pathArr = [\n            'M', sourcePoint.x, sourcePoint.y,\n            'C', sourcePoint.x, controlPointY,\n            targetPoint.x, controlPointY,\n            targetPoint.x, targetPoint.y\n        ];\n    }\n\n    return pathArr.join(' ');\n}\n\n\n// exports\n// -------\n\nexport default smoothConnector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/connector/smooth.js\n **/","import * as utils from '../../common/utils';\nimport      Point from '../../geometry/Point';\n\nfunction roundedConnector(sourcePoint, targetPoint, vertices, options = {}) {\n\n    let offset = options.radius || 10;\n\n    let d1;\n    let d2;\n\n    let d = ['M', sourcePoint.x, sourcePoint.y];\n\n    utils.forEach(vertices, function (vertex, index) {\n\n        // the closest vertices\n        let prev = vertices[index - 1] || sourcePoint;\n        let next = vertices[index + 1] || targetPoint;\n        let cur = Point.fromPoint(vertex);\n\n        // a half distance to the closest vertex\n        d1 = d2 || cur.distance(prev) / 2;\n        d2 = cur.distance(next) / 2;\n\n        // control points\n        let c1 = Point.fromPoint(vertex).move(prev, -Math.min(offset, d1)).smooth();\n        let c2 = Point.fromPoint(vertex).move(next, -Math.min(offset, d2)).smooth();\n\n        d.push(c1.x, c1.y, 'S', vertex.x, vertex.y, c2.x, c2.y, 'L');\n    });\n\n    d.push(targetPoint.x, targetPoint.y);\n\n    return d.join(' ');\n}\n\n\nexport default roundedConnector;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/connector/rounded.js\n **/","import Point from '../../geometry/Point';\n\n\nfunction classicMarker(vMarker, options) {\n\n    if (vMarker) {\n\n        // let markerStrokeWidth = options.markerStrokeWidth;\n\n        let size = options.size || 7;\n        let pathArr = [];\n\n        let connectionX = size * 0.75;\n        let connectionY = size / 2;\n\n        pathArr.push('M', 0, size / 2);\n        pathArr.push('L', size, 0);\n        pathArr.push('L', connectionX, connectionY);\n        pathArr.push('L', size, size);\n        pathArr.push('Z');\n\n        vMarker.attr('d', pathArr.join(' '));\n\n        //\n        let connectorStrokeWidth = options.connectorStrokeWidth;\n\n        if (connectorStrokeWidth > 1) {\n            connectionX += (connectorStrokeWidth / 2) * (size - connectionX) / connectionY;\n        }\n\n        // return the connection point on the marker\n        return {\n            rad: Math.atan2(size / 2, size),\n            point: new Point(connectionX, connectionY)\n        };\n    }\n}\n\nexport default classicMarker;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/classic.js\n **/","import Point from '../../geometry/Point';\n\n\nfunction diamondMarker(vMarker, options) {\n\n    if (vMarker) {\n\n        let rx = options.rx || 5;\n        let ry = options.ry || rx / 2;\n        let pathArr = [];\n\n        pathArr.push('M', rx, 0);\n        pathArr.push('L', 0, ry);\n        pathArr.push('L', rx, ry * 2);\n        pathArr.push('L', rx * 2, ry);\n        pathArr.push('Z');\n\n        vMarker.attr('d', pathArr.join(' '));\n\n        // return the connection point on the marker\n        return {\n            rad: Math.atan2(ry, rx),\n            point: new Point(rx * 2 - 1, ry)\n        };\n    }\n}\n\nexport default diamondMarker;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/diamond.js\n **/","import Point from '../../geometry/Point';\n\nfunction blockMarker(vMarker, options) {\n\n    if (vMarker) {\n\n        let width  = options.width || 7;\n        let height = options.height || width * Math.tan(1 / 6 * Math.PI);\n\n        let pathArr = [];\n\n        pathArr.push('M', width, 0);\n        pathArr.push('L', 0, height);\n        pathArr.push('L', width, height * 2);\n        pathArr.push('Z');\n\n        vMarker.attr({\n            d: pathArr.join(' ')\n        });\n\n\n        // return the connection point on the marker\n        return {\n            rad: Math.atan2(height, width),\n            point: new Point(width, height)\n        };\n    }\n}\n\nexport default blockMarker;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/block.js\n **/","// import * as utils from '../../common/utils';\nimport Point from '../../geometry/Point';\n\nfunction clovenMarker(vMarker, options) {\n\n    if (vMarker) {\n\n        let rx = options.rx || 7;\n        let ry = options.ry || rx / 2;\n        let pathArr = [];\n\n        pathArr.push('M', rx, 0);\n        pathArr.push('L', 0, ry);\n        pathArr.push('L', rx, ry * 2);\n\n        vMarker.attr('d', pathArr.join(' '));\n\n        return {\n            rad: Math.atan2(ry, rx),\n            point: new Point(0, ry)\n        };\n    }\n}\n\nexport default clovenMarker;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/cloven.js\n **/","import vector from '../../common/vector';\nimport Point  from '../../geometry/Point';\n\n\nfunction ovalMarker(vMarker, options) {\n\n    // Note: vMarker should be a `g` element\n\n    if (vMarker) {\n\n        let rx = options.rx || 3.5;\n        let ry = options.ry || rx;\n\n        let vEllipse = vector('ellipse');\n\n        vEllipse.attr({\n            cx: rx,\n            cy: ry,\n            rx,\n            ry\n        });\n\n        // return the connection point on the marker\n        return {\n            vel: vEllipse,\n            rad: 0,\n            point: new Point(rx * 2, ry)\n        };\n    }\n}\n\nexport default ovalMarker;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shapes/marker/oval.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/style/index.less\n ** module id = 73\n ** module chunks = 0 1\n **/"],"sourceRoot":""}